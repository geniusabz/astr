!function(window,angular,undefined){function TmplService(){this.transferToPhantom=function(e){e&&(angular.isString(e)&&(e=+e),"function"!=typeof window.phantomJsLastModified||isNaN(e)||window.phantomJsLastModified(moment.unix(e).utcOffset(3).toDate().toUTCString()))}}angular.module("news_v4",["mosapp","mosapp.newspage","mosapp.newspage.districts","mosapp.themes.list","mos.newsfeed.main","mos.newsfeed.main.tv","mos.newsfeed.main.pulse","mosapp.rss.subscriber","mosapp.mayor.media","mosapp.filter.news","mosapp.filter.calendar","mosapp.news.districts.vertical","mosapp.banner.list","mosapp.news.feed","mosapp.news.feed.additional","mosapp.news.media.additional","ui.router","ngAnimate","mgcrea.ngStrap","news_v4.templates","mosapp.filters.imageSrc","mosapp.press.categories","mosapp.press.categoriesCheckbox","mosapp.sharing","mosapp.sharing.popup","mosapp.tags","mosapp.spheres","mosapp.filters.prepareDate","mosapp.responce.dialog","mosapp.mosError","mosapp.newspage.themes","mosapp.banner.service","mosapp.mosLightbox","mosapp.articleEmergency","mosapp.copyright","mos.embed.social"]).service("metaConfig",["$translate","$q",function(e,t){var a=!1,i={news:{image:"img",url:"news/"},districs:{image:"img",url:"news/"}};return this.config=i,this.init=function(){return a?t.when(i):t.when(e(["news_v4.news.section","news_v4.news.title","news_v4.news.description","news_v4.news.keywords","news_v4.districs.section","news_v4.districs.title","news_v4.districs.description"]).then(function(e){i.news.section=e["news_v4.news.section"],i.news.title=e["news_v4.news.title"],i.news.description=e["news_v4.news.description"],i.news.keywords=e["news_v4.news.keywords"],i.districs.section=e["news_v4.districs.section"],i.districs.title=e["news_v4.districs.title"],i.districs.description=e["news_v4.districs.description"],a=!0}))},this}]).run(["$rootScope","$state","toolsSrvc","LangSrvc",function(e,r,s,n){e.$on("$stateChangeStart",function(e,t,a,i){"mainnews"===t.name&&""!==i.name&&"ru"===n.getCurrentLang()&&window.location.reload();i=document.getElementById("canonicalLink");i&&i.parentNode&&i.parentNode.removeChild(i),t.redirectTo&&(e.preventDefault(),r.go(t.redirectTo,a))}),e.$on("$stateChangeSuccess",function(e,t,a,i,n){t.TARGET_NAME&&s.statCounter({metrika:{TARGET_NAME:t.TARGET_NAME}}),s.handleAlternateTags(r,t.name,["mainnews"])})}]).config(["$stateProvider","$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider","$compileProvider","$translatePartialLoaderProvider","$translateProvider",function(e,t,a,i,n,r,s){a.strictMode(!1),i.html5Mode(!0),i.hashPrefix("!"),n.debugInfoEnabled(!1),s.useSanitizeValueStrategy("escaped"),r.addPart("news_v4"),a.type("keyVal",{},function(){return{encode:function(e){return e},decode:function(e,t){return e},is:angular.isString,equals:function(e,t){return e==t}}}),this.scrollTop=function(e){TweenLite.to(window,e||.75,{scrollTo:{y:0},ease:Power2.easeOut,onComplete:function(){}})},t.otherwise(function(e,t){var a=t.path();t.$$absUrl.match(/\/#!(\/)?$/)&&0==a.length?e.invoke(["$state",function(e){e.go("mainnews",{},{location:!1})}]):e.invoke(["$state",function(e){e.go("404",{},{location:!1})}])}),t.rule(function(e,t){t=t.path();if(!(t.length<=1))return"/"===t[t.length-1]?void 0:t+"/"}),e.state("mosapp",{abstract:!0}).state("mainnews",{url:"/",template:'<div data-news-page="" data-root-state="mainnews"></div>',onEnter:function(){}}).state("404",{url:"/404/",template:'<div data-mos-error="404"></div>'}).state("mainnews.maintheme",{url:"maintheme/{theme_id:[0-9]+}/",views:{"@":{template:'<div data-news-page-themes="" data-root-state="mainnews.maintheme"></div>'}},onEnter:function(){scrollTop(.4)}}).state("mainnews.districts",{url:"districts/",views:{"@":{template:'<div data-news-page-districts="" data-root-state="mainnews.districts"></div>'}},onEnter:function(){scrollTop(.4)}}).state("mainnews.sphere_id",{url:"{sphere_id:[0-9]+|all}/"}).state("mainnews.sphere_id.department_id",{url:"{department_id:[0-9]+|all}/"}).state("mainnews.sphere_id.department_id.page",{url:"page-{page:[0-9]+}/"}).state("mainnews.sphere_id.department_id.range",{url:"from/{from:[^/]*}/to/{to:[^/]*}/"}).state("mainnews.districts.sphere_id",{url:"{sphere_id:[0-9]+|all}/"}).state("mainnews.districts.sphere_id.district_id",{url:"{district_id:[0-9]+|all}/"}).state("mainnews.districts.sphere_id.district_id.range",{url:"from/{from:[^/]*}/to/{to:[^/]*}/"}).state("mainnews.article",{url:"article/:id/",redirectTo:"mainnews.news"}).state("mainnews.interview",{url:"interview/{id}/",redirectTo:"mainnews.news"})}]).service("newsFilter",["$stateParams","$filter","toolsSrvc","$state",function(i,r,s,t){var n=[],o={},l="";function c(e){e.from&&(e.from=r("date")(e.from,"dd.MM.yyyy")),e.to?e.to=r("date")(e.to,"dd.MM.yyyy"):e.to=r("date")(new Date,"dd.MM.yyyy")}function d(e,t){for(var a={},i=0,n=0;n<t.length;n++){var r=t[n];!(e[r]&&""!==e[r]||0<=i)||e[r]||"range"==r||(e[r]="all"),("all"!==e[r]||"all"===e[r]&&0<i)&&(a[r]=e[r],a.from=e.from,a.to=e.to,i++),(e.from&&e.to&&""!==e.from&&""!==e.to||0<i)&&(a.from=e.from,a.to=e.to,i++)}return a}function a(){var e=d(o,n);t.go(function(e,t,a){for(var i="",n=0,r=0;r<t.length;r++){var s=t[r];(e[s]&&""!==e[s]||0<n&&"range"!==s||"range"===s&&e.from&&e.to)&&(i="."+s+i,n++)}return a+i}(e,n,l),e)}this.getParams=function(){return o},this.init=function(e,t,a){n=t,l=e,o={},c(o=a?angular.extend({},i,a):i),o.page||(o.page=1),d(o,n)},this.setState=function(e){c(o=angular.extend({},o,e))},this.getDateForCalendar=function(){return{from:r("date")(o.from,"yyyy-MM-dd"),to:r("date")(o.to,"yyyy-MM-dd")}},this.getParam=function(e){return o[e]},this.setAndGetParams=function(e){var t,a,i,n=angular.extend({},o);for(t in o.page=n.page=e?++o.page:1,n)"from"===t||"to"===t?(a="from"===t,n[t]=""!==o[t]?(i=s.ruStrToDate(n[t]),a?r("date")(i,"yyyy-MM-dd")+" 00:00:00":r("date")(i,"yyyy-MM-dd")+" 23:59:59"):n[t]):"type"===t&&"all"!==n.type?n.type=typesArray[n.type]?typesArray[n.type].toString():null:(n[t]=""!==n[t]?n[t]:"all","all"!==n[t]&&""!==n[t]||delete n[t]);return n},this.setFilterCalendar=function(e,t){o.from=r("date")(e,"dd.MM.yyyy"),o.to=r("date")(t,"dd.MM.yyyy"),a()},this.setNewDepartment=function(e){o.department_id=e||"all",a()},this.setNewArea=function(e){o.district_id=e||"all",a()},this.setNewSphere=function(e){o.sphere_id=e||"all",a()}}]),angular.module("news.page.article",[]).directive("newsPageArticle",["UrlSrvc","$stateParams","$timeout","metaConfig","toolsSrvc","$state","LangSrvc",function(i,e,t,a,n,r,s){return{restrict:"A",scope:{},link:function(e,t,a){t.on("$destroy",function(){e.$destroy()}),e.getLangLink=i.getLangLink},templateUrl:i.tmplPath("_news_v4/newsPageArticle/newsPageArticle.tpl.html")}}]),angular.module("mos.newsfeed.normalization.category",[]).service("normalizationCategory",["UrlSrvc","$filter",function(s,o){var l="news",c="mayorInfographic";return function(e){if(!e||!Array.isArray(e)||0===e.length)return e;for(var t,a,i=e.length,n=0;n<i;n++)if(e[n].kind&&e[n].kind.id)switch(e[n].kind.id){case"article":e[n].link=s.getLangLink(s.pagePath(l,"item/"+e[n].id)),e[n].sphere&&e[n].sphere.id&&(e[n].sphere.link=s.getLangLink(s.pagePath(l,e[n].sphere.id)));break;case"proxy":e[n].link=e[n].url,delete e[n].url,e[n].sphere&&delete e[n].sphere;break;case"news":e[n].sphere&&e[n].sphere.id?(e[n].link=s.getLangLink(s.pagePath("press",e[n].sphere.id+"/"+e[n].id)),e[n].sphere.link=s.getLangLink(s.pagePath("press",e[n].sphere.id))):e[n]=!1;break;case"conference":e[n].link=s.getLangLink(s.pagePath("conferences","item/"+e[n].id)),e[n].sphere&&(e[n].sphere.link=!1);break;case"interview":e[n].link=s.getLangLink(s.pagePath("interviews",e[n].id)),e[n].sphere&&(e[n].sphere.link=!1);break;case"infographic":e[n].link=s.getLangLink(s.pagePath(c,e[n].id)),e[n].sphere&&e[n].sphere.id&&(e[n].sphere.link=s.getLangLink(s.pagePath(c,"cat/"+e[n].sphere.id)));break;case"event":e[n].link=s.getLangLink(s.pagePath("afisha","event/"+e[n].id)),e[n].sphere&&e[n].sphere.id&&(a=new Date,t=o("date")(a,"dd.MM.yyyy"),a=o("date")(a.setMonth(a.getMonth()+1),"dd.MM.yyyy"),e[n].sphere.link=s.getLangLink(s.pagePath("afisha","from/"+t+"/to/"+a+"/"+e[n].sphere.id)))}else e[n].link=s.getLangLink(s.pagePath(l,"item/"+e[n].id));for(var i=e.length,r=[],n=0;n<i;n++)e[n]&&r.push(e[n]);return r}}]),angular.module("mos.embed.social",[]).directive("embedSocial",["UrlSrvc","$sce","embedSocialSrvc",function(e,t,l){return{restrict:"EA",scope:{code:"@"},link:function(e,t,a,i){t.on("$destroy",function(){e.$destroy(),"function"==typeof l.offIframeWatcher&&l.offIframeWatcher()});var n,r=[{name:"facebook-video",regexp:/facebook\.com\/plugins\/video\.php/},{name:"facebook-post",regexp:/facebook\.com\/plugins\/post\.php/},{name:"instagram",regexp:/instagram\.com/},{name:"vk",regexp:/vk\.com/}],s=decodeURIComponent(escape(window.atob(e.code)));$(t).find(".embed-social").append(s);for(var o=0;o<r.length;o++)r[o].regexp.test(s)&&(n=r[o].name);switch(n){case"facebook-video":e.displayBlock=!0,e.responsiveFrame=!0;break;case"facebook-post":e.displayBlock=!0;break;case"instagram":e.displayBlock=!0,window.instgrm&&window.instgrm.Embeds&&window.instgrm.Embeds.process();break;case"vk":e.displayBlock=!0}},templateUrl:e.tmplPath("00_mosNewsfeed/mosEmbedSocial/mosEmbedSocial.tpl.html")}}]).service("embedSocialSrvc",function(){this.offIframeWatcher=null}),angular.module("mos.newsfeed.main",[]).controller("mosNewsfeedMainController",["$scope","apiSrvc","$timeout","LangSrvc","normalizationCategory","$state","$stateParams","$filter","toolsSrvc","tmplSrvc","testDate","UrlSrvc","newsFilter","metaConfig","emergencyChecker","opengraphSrvc",function(n,e,a,t,i,r,s,o,l,c,d,m,p,u,g,h){var f=["range","department_id","sphere_id"],v=(s.page&&(s.page*=1,1===s.page&&r.go("mainnews.sphere_id.department_id",{sphere_id:s.sphere_id,department_id:"all"})),n.getNextPageUrl=function(){return m.getNextPageUrl(n.currentPage,P)},n.scrollTo=function(e){TweenLite.to(window,1,{scrollTo:{y:e},ease:Power1.easeOut,onComplete:function(){}})},n.scrollTo(0),n.lang=t.getCurrentLang(),{tv:!1,pulse:!1});g.get()&&(g.set(undefined),setTimeout(function(){g.set(!0)},200)),n.$on("$stateChangeSuccess",function(e,t){g.set(!0),t.name===n.rootState&&(w(),b())}),n.lang;function w(){var e={to:new Date};p.init(n.rootState,f,e)}w(),n.params={},u.init().then(function(){k(),s.sphere_id?m.setCanonical(m.getLangLink(m.pagePath("news",s.sphere_id))):m.setCanonical(m.getLangLink(m.pagePath("news","")))}),n.currentSphere={id:""},n.currentArea={id:""},n.itemsSphere=[],n.itemsArea=[],n.newsFeedItems=[],n.getMoreNewsFunc=null,n.activateButtonForNextLoading=!0,n.isThereMorePages=!1,n.setCurrentSphere=S,n.setCurrentArea=function(){n.currentArea={id:""};var e=p.getParam("department_id")||"";e="all"===e?"":e;for(var t=0;t<n.itemsArea.length;t++)n.itemsArea[t].id!==e&&n.itemsArea[t].id.toString()!==e||(n.currentArea=n.itemsArea[t])},n.setCalendarDate=function(){var e=p.getDateForCalendar();n.params={from:e.from,to:e.to}},n.setNewSphere=p.setNewSphere,n.setNewArea=p.setNewDepartment,n.setFilterCalendar=p.setFilterCalendar,n.setAndGetParams=p.setAndGetParams,n.extcontsTop=m.getBanners("newsPageTop"),n.extconts=m.getBanners("allNewsPage"),n.dates=[],n.$on("controls:inited",function(){s.sphere_id&&y(),b(),n.$on("$stateChangeSuccess",function(e,t){for(var a=!1,i=0;i<f.length;i++)if(-1<t.name.indexOf(f[i])){a=!0;break}t!==n.rootState&&!a||(b(),y(),k())}),k()}),n.$on("newsfeed:fetched",function(e,t){m.setPrevNextLinks(t.currentPage,t.isThereMorePages,P)});r="en"===n.lang?["news.tv_en_v1"]:["news.tv_ru"],"en"!=n.lang&&r.push("news.pulse_"+n.lang),t={expand:"positions",filter:{code:r}},r={loaderType:"plainDots",elems:document.querySelector(".news-page__tv-loader-indicator"),animate:!1};function _(){n.mainNewsData={ready:!0},n.filtersLoadedFlag&&a(function(){n.$broadcast("state:loaded")})}function y(){var e;"ru"===n.lang&&(e=angular.element(document).find(".filter-news").offset().top,n.scrollTo(e-75))}function b(){p.setState(s),n.setCalendarDate(),n.setCurrentSphere(),n.setCurrentArea(),n.$broadcast("state:loaded")}function S(){n.currentSphere={id:""};for(var e="all"===(e=p.getParam("sphere_id")||"")?"":e,t=0;t<n.itemsSphere.length;t++)n.itemsSphere[t].id!==e&&n.itemsSphere[t].id.toString()!==e||(n.currentSphere=n.itemsSphere[t])}function k(){var e;u.config.news.section.replace(/\s/g," ");angular.isNumber(n.currentSphere.id)?(e=n.currentSphere.title.replace(/\s/g," "),l.setTitle(n.currentSphere.preTitle!==undefined?n.currentSphere.preTitle+e:e,"Новости города"),l.setDescription(e+". Новости Москвы"),l.setKeywords(e+", новости "+e+", новости москвы")):(l.setMeta(n,u.config,"news"),l.setTitle(u.config.news.section),l.setKeywords(u.config.news.keywords),l.setRawDescription(u.config.news.description)),h.invalidateWithGlobalMeta().passUrl()}function A(e){for(var t,a=0;a<e.length;a++)e[a].element&&(angular.extend(e[a],angular.copy(e[a].element)),delete e[a].element,delete e[a].element_id,t=e[a].id,n.excludeIdsArray.push(t),e[a].date_timestamp&&(t=parseInt(e[a].date_timestamp),isNaN(t)||n.dates.push(t)));return e}function P(e){if(i=s.sphere_id&&"all"!==s.sphere_id,t=s.department_id&&"all"!==s.department_id,a=s.from||s.to,!i||t||a)return"";var t,a,i=s.sphere_id+"/all/";return 1===e?m.pagePath("news",i):1<e?m.pagePath("news",i+"page-"+e):""}n.excludeIdsArray=[],n.excludeIds="",e.getData("assembler","blocks",t,!0,r).then(function(e){if(angular.isArray(e.items))for(var t=e.items.length;t--;)if(angular.isObject(e.items[t]))switch(e.items[t].code){case"news.tv_"+n.lang+"_v1":case"news.tv_"+n.lang:v.tv=angular.copy(e.items[t].positions);break;case"news.pulse_"+n.lang:v.pulse=angular.copy(e.items[t].positions)}angular.isArray(n.dates)&&n.dates.length&&c.transferToPhantom(l.getMaxDate(n.dates)),n.tvItemsLength=v.tv.length,n.pulseItemsLength=v.pulse.length,n.tv_pulse=n.tvItemsLength&&n.pulseItemsLength,n.tv_only=n.tvItemsLength&&!n.pulseItemsLength,n.pulse_only=!n.tvItemsLength&&n.pulseItemsLength,a(function(){angular.isArray(v.tv)&&v.tv.length?n.news_items_tv=i(A(v.tv)):n.news_items_tv=[],angular.isArray(v.pulse)&&v.pulse.length?n.news_items_pulse=i(A(v.pulse)):n.news_items_pulse=[],n.excludeIds=n.excludeIdsArray.join(),_()})},function(){n.tv_pulse=!1,n.news_items_tv=[],n.news_items_pulse=[],_()}),n.$on("state:loaded",function(){n.filtersLoadedFlag=!0}),n.$watch("itemsSphere",S)}]),angular.module("mos.newsfeed.main.tv",["slick","mosapp.filters.prepareDateSince"]).directive("mosNewsfeedMainTv",["UrlSrvc","$timeout","toolsSrvc","LangSrvc","tmplSrvc",function(e,n,r,s,o){return{restrict:"A",scope:{items:"=",pagePath:"@",itemPath:"@",page:"@",itemLinkTarget:"@?"},templateUrl:e.tmplPath("00_mosNewsfeed/mosNewsfeedMainTv/mosNewsfeedMainTv.tpl.html"),link:function(a,t){function i(){var e=t.find(".news-televisor__list");window.innerWidth<768?"init"!==e.data("slickstate")&&n(function(){e.on("init",function(){e.data("slickstate","init")}),e.slick({infinite:!0,dots:!0,slidesToShow:1,slidesToScroll:1,speed:1e3,prevArrow:"<span class='slick-arrow-prev s-prev'><span class='ico'><span></span></span></span>",nextArrow:"<span class='slick-arrow-next s-next'><span class='ico'><span></span></span></span>"})},100):"init"===e.data("slickstate")&&(e.slick("unslick"),e.data("slickstate","destroy"))}t.on("$destroy",function(){$(window).off("resize.newsTelevisor"),a.$destroy()}),a.getLangLink=e.getLangLink,a.lang=s.getCurrentLang(),a.contentArea=t.find(".news-televisor"),r.hideContentArea(a.contentArea),a.hideme=!1,a.colorScheme=r.colorScheme(),a.datenow=moment(Date.now()).format("DD.MM.YYYY"),a.$watch("items",function(e,t){angular.isArray(e)&&(0===e.length?a.hideme=!0:(a.error=!1,a.items=e,angular.isObject(a.items[0])&&o.transferToPhantom(a.items[0].date_timestamp),n(function(){var e;i(),$(window).on("resize.newsTelevisor",function(){window.clearTimeout(e),e=window.setTimeout(i,50)}),r.showContentArea(a.contentArea)})))})}}}]),angular.module("mos.newsfeed.main.pulse",["mos.newsfeed.normalization.category"]).directive("mosNewsfeedMainPulse",["UrlSrvc","$timeout","toolsSrvc",function(r,s,o){return{restrict:"A",scope:{items:"=",pageUrlPath:"@",pathItem:"@",isSubscribe:"@",isShort:"@",isMainLink:"@",height:"=?",limit:"@?",onload:"&?",itemLinkTarget:"@?"},link:function(t,e,a){e.on("$destroy",function(){t.$destroy()}),t.contentArea=e.find(".b-pulse-news-vertical"),o.hideContentArea(t.contentArea),t.hideme=!1,t.colorScheme=o.colorScheme(),t.datenow=moment(Date.now()).format("DD.MM.YYYY"),t.isSubscribe=!!a.isSubscribe,t.isMainLink=!!a.isMainLink,t.pageUrlPath=r.getLangLink(t.pageUrlPath);var i=t.contentArea.first();function n(e){e&&i.css("height",e)}767<$(window).width()&&t.height&&n(t.height),t.$watch("height",function(e){n(e)}),t.$watch("items",function(e){angular.isArray(e)&&(0===e.length?t.hideme=!0:(t.error=!1,t.sitesection=r.pagePath(t.pageUrlPath,""),s(function(){o.showContentArea(t.contentArea),a.onload&&t.onload({data:".b-pulse-news-vertical"})})))})},templateUrl:r.tmplPath("00_mosNewsfeed/mosNewsfeedMainPulse/mosNewsfeedMainPulse.tpl.html")}}]),angular.module("mosapp.banner.service",[]).directive("mosExtcontsService",[function(){return{scope:{domain:"=",urlPath:"=",item:"="},link:function(e,t,a){if(e.banner=e.item,e.hideMe=!1,!e.item)return!(e.hideMe=!0);e.item.domain||(e.domain?e.item.domain=e.domain:e.item.domain="//"+window.location.hostname),e.item.urlPath||(e.banner.urlPath=e.urlPath),e.item.link=e.item.domain+(location.port?":"+location.port:"")+e.item.urlPath+"?id="+e.item.id;var i=document.createElement("script");i.type="text/javascript",i.language="JavaScript",i.id="mos-platform-"+e.item.id,i.src=e.item.link,angular.element(t).find(".extconts-service-container").append(i)},templateUrl:"mosBanner/mosBanner.tpl.html"}}]),angular.module("mosapp.newspage",["mos.newsfeed.main"]).directive("newsPage",["UrlSrvc",function(e){return{restrict:"A",scope:{rootState:"@"},link:function(e,t){t.on("$destroy",function(){e.$destroy()}),t.on("click",function(){})},controller:"mosNewsfeedMainController",templateUrl:e.tmplPath("newsPage/newsPage.tpl.html")}}]),angular.module("mosapp.newspage.districts",[]).directive("newsPageDistricts",["$state","$stateParams","$filter","toolsSrvc","testDate","UrlSrvc","$timeout","metaConfig","newsFilter","LangSrvc",function(e,o,t,l,a,c,d,m,p,u){return{restrict:"A",scope:{rootState:"@"},link:function(a,t,e){function i(){p.setState(o),a.setCalendarDate(),a.setCurrentSphere(),a.setCurrentArea(),a.$broadcast("state:loaded")}function n(){var e=t.find(".filter-news");e.length&&(e=e.offset().top,TweenLite.to(window,1,{scrollTo:{y:e-120},ease:Power2.easeOut}))}function r(){var e=angular.element(t).find(".districts-page__filters").outerHeight();angular.element(t).find(".news-media-wrapper").css("margin-top",-e)}var s;a.lang=u.getCurrentLang(),TweenLite.to(window,.1,{scrollTo:{y:0}}),a.activateButtonForNextLoading=!0,p.init(a.rootState,["range","district_id","sphere_id"],{to:new Date}),a.params={},m.init().then(function(){l.setMeta(a,m.config,"districs"),l.setTitle(m.config.districs.section)}),a.currentSphere={id:""},a.currentArea={id:""},a.itemsSphere=[],a.itemsArea=[],a.extconts=c.getBanners("newsPageDistricts"),a.newsFeedItems=[],a.getMoreNewsFunc=null,a.isThereMorePages=!1,a.setCurrentSphere=function(){a.currentSphere={id:""};var e=p.getParam("sphere_id")||"";e="all"===e?"":e;for(var t=0;t<a.itemsSphere.length;t++)a.itemsSphere[t].id!==e&&a.itemsSphere[t].id.toString()!==e||(a.currentSphere=a.itemsSphere[t])},a.setCurrentArea=function(){a.currentArea={id:""};var e=p.getParam("district_id")||"";e="all"===e?"":e;for(var t=0;t<a.itemsArea.length;t++)a.itemsArea[t].id!==e&&a.itemsArea[t].id.toString()!==e||(a.currentArea=a.itemsArea[t])},a.setCalendarDate=function(){var e=p.getDateForCalendar();a.params={from:e.from,to:e.to}},a.setNewSphere=p.setNewSphere,a.setNewArea=p.setNewArea,a.setFilterCalendar=p.setFilterCalendar,a.setAndGetParams=p.setAndGetParams,a.$on("controls:inited",function(){o.category&&n(),i(),a.$on("$stateChangeSuccess",function(){i(),n()})}),d(function(){r()},100),_WINDOW.on("resize",function(){d.cancel(s),s=d(r,100)})},templateUrl:c.tmplPath("newsPageDistricts/newsPageDistricts.tpl.html")}}]),angular.module("mosapp.themes.list",[]).directive("themesList",["UrlSrvc","apiSrvc","$timeout","$state","$stateParams","$translate","LangSrvc",function(r,s,p,e,t,a,i){return{scope:{apiRoot:"@",apiPath:"@",title:"@",pagePath:"@",itemPath:"@",hideSubtitle:"=?",h1:"="},link:function(o,l){o.isNewsPage=!!~e.current.name.indexOf("mainnews"),o.isMainPage=!!/^\/(en\/)?$/.test(window.location.pathname),o.isNewsPage&&t.theme_id&&(o.currentThemeId=t.theme_id),o.langPrefix=r.getLangLinkPrefix(),o.isMobile=device&&(device.mobile()||device.tablet()),o.hideme=!1,o.loading=!0,o.dropdown=[],o.items=[];var c=[];function d(){return o.title?angular.element(l).find(".themes__main-title").outerWidth():0}function m(){var e=$(l).find(".themes__list");if(_WINDOW.width()<751)return e.hide(),s=c.slice(),o.current&&o.currentThemeId&&s.filter(function(e){return e.id===o.current.id}).length&&s.unshift(o.current),void(o.dropdown=s);e.show(),angular.element(l).find(".themes__col-list").css("margin-left",d());var t=e.width(),a=angular.element(e).find("li"),i=0;0===a.length&&p(m,300);for(var n=0;n<a.length&&i<=t;n++)i+=(r=$(a[n])).width(),r.show();if(t<=i){var r,s=c.slice(--n);for(o.current&&o.currentThemeId&&s.filter(function(e){return e.id===o.current.id}).length&&s.unshift(o.current),o.dropdown=s;n<a.length;n++)(r=$(a[n])).hide()}else o.dropdown=[]}o.lang=i.getCurrentLang(),o.params={filter:{code:"en"===o.lang?"main_en_v3.themes_en_v1":"news_page.themes"},expand:"positions","element.fields":"id,title,status,url"},s.getData(o.apiRoot,o.apiPath,o.params,!0,$(l).find(".items-wrapper")).then(function(e){if(e&&Array.isArray(e.items)&&e.items.length&&Array.isArray(e.items[0].positions)){o.hideme=!1,o.loading=!1,c=[];for(var t,a=0;a<e.items[0].positions.length;a++){var i,n=e.items[0].positions[a];"object"==typeof n.element&&null!==n.element&&("number"==typeof(i=n.element).id&&(i.url&&""!==i.url?i.link=i.url:i.link=r.getLangLink(r.pagePath(o.pagePath,o.itemPath+i.id))||"#",c.push(i)))}o.dropdown=c.slice(),o.themes=c.slice(),o.currentThemeId?(o.current=c.filter(function(e){return e.id==o.currentThemeId}),o.current=o.current[0],o.current?(o.$emit("maintheme:init",o.current),angular.element(i).find(".themes__col-list").css("margin-left",d())):s.getData("newsfeed","mainThemes",{filter:{id:o.currentThemeId}}).then(function(e){e&&Array.isArray(e.items)&&e.items[0]&&(o.current=e.items[0],o.$emit("maintheme:init",o.current),angular.element(i).find(".themes__col-list").css("margin-left",d()))},function(e){})):(o.current=o.dropdown[0],o.$emit("maintheme:init",o.current),angular.element(i).find(".themes__col-list").css("margin-left",d())),p(m,300),_WINDOW.on("resize",function(e){clearTimeout(t),t=setTimeout(function(){m()},250)})}else o.hideme=!0},function(e){o.error=e,o.hideme=!0})},templateUrl:"themesList/themesList.tpl.html"}}]),angular.module("mosapp.mayor.media",[]).directive("mayorsMedia",["UrlSrvc","apiSrvc","$sce","toolsSrvc",function(n,r,s,o){return{restrict:"A",scope:{apiRoot:"@",apiPath:"@"},templateUrl:n.tmplPath("mayorsMedia/mayorsMedia.tpl.html"),link:function(t,e,a,i){t.getLangLink=n.getLangLink,t.trustAsHtml=function(e){return s.trustAsHtml(e)},t.hideme=!1,t.colorScheme=o.colorScheme(),t.getPhotoLink=function(e){return n.pagePath("mayor","/media/photo/"+e.id+"/tiles/1/0")},t.getVideoLink=function(e){return n.pagePath("mayor","/media/video/"+e.id)},r.getData(t.apiRoot,t.apiPath,{},!0,e).then(function(e){angular.isArray(e.items)?t.item=e.items[0]:angular.isObject(e)&&e.id?t.item=e:t.hideme=!0},function(e){t.error=e,t.hideme=!0})}}}]),angular.module("mosapp.news.districts.vertical",[]).directive("newsDistrictsVertical",["UrlSrvc","apiSrvc","$timeout","toolsSrvc",function(r,s,e,o){return{restrict:"A",scope:{apiRoot:"@",apiPath:"@",districtsApiRoot:"@",districtsApiPath:"@",pagePath:"@",itemPath:"@",setNewArea:"=",itemLinkTarget:"@?"},templateUrl:r.tmplPath("newsDistrictsVertical/newsDistrictsVertical.tpl.html"),link:function(i,t,e,a){var n=[];i.hideme=!1,i.colorScheme=o.colorScheme(),i.districtFilterUrl="/news/districts/all/%id%/",t.find(".news-districts-vertical__items").mCustomScrollbar({live:!0,callbacks:{whileScrolling:function(e){this.mcs.topPct<100?t.find(".news-districts-vertical__controls").removeClass("news-districts-vertical__controls_no-shadow"):t.find(".news-districts-vertical__controls").addClass("news-districts-vertical__controls_no-shadow")}}}),s.getData(i.apiRoot,i.apiPath,{},!0,t).then(function(e){if(angular.isArray(e.items)){for(var t=0;t<e.items.length;t++){var a=i.districtFilterUrl;e.items[t].districtFilterUrl=a.replace("%id%",e.items[t].territory_district_id),e.items[t].link=r.pagePath(i.pagePath,i.itemPath+e.items[t].id)}i.error=!1,i.items=e.items}else i.hideme=!0},function(e){i.error=e,i.hideme=!0}),s.getData(i.districtsApiRoot,i.districtsApiPath,{},!0,null).then(function(e){angular.isArray(e.items)&&(n=e.items)}),i.getAreaName=function(t){var e;if(n.length)return(e=n.filter(function(e){return e.id===t}))[0]?e[0].title:null}}}}]),angular.module("mosapp.banner.list",[]).directive("bannerListVertical",["UrlSrvc","apiSrvc","$sce",function(e,n,r){return{restrict:"A",link:function(t,e,a,i){t.trustAsHtml=function(e){return r.trustAsHtml(e)},t.hideme=!1,n.getData("mainpage","bannerListVertical",{},!0,e).then(function(e){t.items=e.items},function(e){t.error=e,t.hideme=!0})},scope:{},templateUrl:e.tmplPath("bannerListVertical/bannerListVertical.tpl.html")}}]),angular.module("mosapp.filter.news",[]).directive("filterNews",["apiSrvc","toolsSrvc","$timeout","UrlSrvc","LangSrvc","apiCache",function(e,t,n,a,r,s){return{restrict:"A",scope:{areaTitle:"@",apiRootSpheres:"@",apiPathSpheres:"@",apiRootAreas:"@",apiPathAreas:"@",setNewSphere:"=",setFilterCalendar:"=",setNewArea:"=",setCurrentSphere:"=",setCurrentArea:"=",setCalendarDate:"=",currentSphere:"=",currentArea:"=",itemsSphere:"=",itemsArea:"=",params:"="},templateUrl:a.tmplPath("filterNews/filterNews.tpl.html"),link:function(i,e){i.areaTitle=i.areaTitle||"Департамент",i.lang=r.getCurrentLang(),i.colorScheme=t.colorScheme(),i.controlsApiConf={},i.controlsApiConf[i.apiPathSpheres]={apiRoot:i.apiRootSpheres,itemsKey:"itemsSphere",parentFunc:"setCurrentSphere",elem:".filter-news__filter_sphere",params:{expand:"image",filter:{in_article:1},"per-page":50}},i.controlsApiConf[i.apiPathAreas]={apiRoot:i.apiRootAreas,itemsKey:"itemsArea",parentFunc:"setCurrentArea",elem:".filter-news__filter_area"},i.inited=!1,i.setCalendarDate(),Object.keys(i.controlsApiConf).forEach(function(t,a){i.controlsApiConf[t].apiRoot?s.getData(i.controlsApiConf[t].apiRoot,t,i.controlsApiConf[t].params,!0,e.find(i.controlsApiConf[t].elem)).then(function(e){i[i.controlsApiConf[t].itemsKey]=e.items,Object.keys(i.controlsApiConf).length-1===a&&(n(function(){i.$emit("controls:inited")},0),i.inited=!0)}):i.itemsArea.length&&Object.keys(i.controlsApiConf).length-1===a&&(n(function(){i.$emit("controls:inited")},0),i.inited=!0)}),i.getNewSphere=function(e){i.setNewSphere(e)},i.getNewArea=function(e){i.setNewArea(e)},i.applyFilterCalendar=function(e,t){i.setFilterCalendar(e,t)}}}}]),angular.module("mosapp.filter.calendar",[]).directive("filterCalendar",["UrlSrvc","toolsSrvc","daterangepickerlibsrvc","$timeout",function(e,o,l,c){return{restrict:"A",link:function(i,n,r,e){var t=angular.element(document).find(".filter-news .b-filter__calendar .calendar-inner .icon");function a(){var e,t;i.datepicker&&(e=i.fromDate?moment(o.ruStrToDate(i.fromDate)).format("DD MMMM YYYY").toString():undefined,t=i.untilDate?moment(o.ruStrToDate(i.untilDate)).format("DD MMMM YYYY").toString():undefined,e&&t?i.datepicker.data("dateRangePicker").setDateRange(e,t):i.datepicker.data("dateRangePicker").clear())}i.placeholder=r.placeholder||"Выберите диапазон дат",i.$watch(function(){return o.colorScheme()},function(e){e="contrast"===e?"2px;":"12px;";Function("/*@cc_on return document.documentMode===10@*/")()&&t.attr("style","background-position: right -35px top "+e),document.body.style.msTextCombineHorizontal!==undefined&&t.attr("style","background-position: right -35px top "+e)}),i.watchEnable&&(i.$watch("fromDate",function(){a()}),i.$watch("untilDate",function(e){a()}));var s=!(i.datepicker=null);l.load({}).then(function(e){i.clearDatepicker=function(){i.datepicker&&c(function(){i.silentSet=!0,i.applyNewRange(null,null),i.datepicker.data("dateRangePicker").clear(),c(function(){i.silentSet=!1},100)},50)},i.$on("$stateChangeStart",function(){var e;i.datepicker&&(e=$(i.datepicker[0]).data("dateRangePicker")).length&&e.destroy()}),i.$on("$stateChangeSuccess",function(){var e;i.datepicker&&i.datepicker.data("dateRangePicker")&&c(function(){i.silentSet=!0;var e=i.fromDate?moment(o.ruStrToDate(i.fromDate)).format("DD MMMM YYYY").toString():undefined,t=i.untilDate?moment(o.ruStrToDate(i.untilDate)).format("DD MMMM YYYY").toString():undefined;if(e&&t)try{i.datepicker.data("dateRangePicker").setDateRange(e,t)}catch(e){}else try{i.datepicker.data("dateRangePicker").clear()}catch(e){}c(function(){i.silentSet=!1},100)},50),i.datepicker&&i.datepicker.data("dateRangePicker")&&(e=i.datepicker.data("dateRangePicker"),s?n.hasClass("js-daterange-input")&&(e.open(),s=!1):(e.close(),s=!0))}),c(function(){var t,e=n.find("input.js-daterange-input"),a=(i.datepicker=e.dateRangePicker({format:"D MMMM YYYY",separator:" — ",language:"ru",startOfWeek:"monday",startDate:!!i.dateDiffs&&moment(i.dateDiffs.split("-")[0],"YYYY.MM.DD HH:mm:ss").format("D MMMM YYYY"),endDate:!!i.dateDiffs&&moment(i.dateDiffs.split("-")[1],"YYYY.MM.DD HH:mm:ss").format("D MMMM YYYY"),container:e.parent(),setValue:function(e){$(this).is(":disabled")||e==$(this).val()||$(this).val(e)},showShortcuts:!1,autoClose:!0}),i.datepicker.unbind("datepicker-closed").bind("datepicker-closed",function(){var e=document.querySelector('meta[name="viewport"]');e&&(e.content="width=device-width"),t&&t()}),i.datepicker.unbind("datepicker-open").bind("datepicker-open",function(){var e=document.querySelector('meta[name="viewport"]');e&&(e.content="width=device-width, initial-scale=1, user-scalable=no"),t=i.$watchCollection(function(){for(var e=$(".month-wrapper table"),t=[],a=0;a<e.length;a++){var i=$(e[a]).find("tr:last-child td:first-child>div")[0];t.push(i)}return t},function(e){for(var t=0;t<e.length;t++){var a=angular.element(e[t]);a.hasClass("nextMonth")&&a.parent().parent().remove()}})}),!1);i.datepicker.unbind("datepicker-change").bind("datepicker-change",function(e,t){r.applyNewRange&&(a&&c.cancel(a),a=c(function(){i.silentSet||i.applyNewRange({fromDate:t.date1,untilDate:t.date2}),a=!1},50))}),c(function(){i.silentSet=!0;var e=i.fromDate?moment(o.ruStrToDate(i.fromDate)).format("DD MMMM YYYY").toString():undefined,t=i.untilDate?moment(o.ruStrToDate(i.untilDate)).format("DD MMMM YYYY").toString():undefined;e&&t?i.datepicker.data("dateRangePicker").setDateRange(e,t):i.datepicker.data("dateRangePicker").clear(),c(function(){i.silentSet=!1},100)},50)},200);var t=device&&device.tablet()?"touchstart.closedatepicker":"click.closedatepicker";$("body").on(t,function(e){var t;i.datepicker&&i.datepicker.data("dateRangePicker")&&(t=i.datepicker.data("dateRangePicker"),s?$(e.target).hasClass("js-daterange-input")&&(t.open(),s=!1):$(e.target).closest(".dates").hasClass("dates")||(t.close(),s=!0))})},function(e){})},templateUrl:e.tmplPath("filterCalendar/filterCalendar.tpl.html"),scope:{fromDate:"@",untilDate:"@",applyNewRange:"&",clearDatepicker:"&",icon:"=",uniqId:"=",watchEnable:"@",dateDiffs:"@"}}}]).service("testDate",[function(){this.retDate=function(e){var t,a,i,n,r=null;return angular.isString(e)&&(i=e.split(".")).length&&(t=+i[2],a=+i[1]-1,i=+i[0],r=new Date(t,a,i),n=Date.parse(r),(r=!(isNaN(n)||n<0)&&r)&&r.getUTCDate()===i&&r.getUTCMonth()===a&&r.getUTCFullYear()===t&&(r=!0)),r?e:null}}]).service("daterangepickerlibsrvc",["UrlSrvc","$q","$rootScope","$window",function(i,t,n,e){this.load=function(e){return t(function(e,t){var a;n.daterangepickerlib?"ready"!==n.daterangepickerlib.status?(a=document.getElementById("daterangepickerlibapiscript"),$(a).on("load",function(){e()})):e():(n.daterangepickerlib={},n.daterangepickerlib.status="load",(a=document.createElement("script")).id="daterangepickerlibapiscript",a.async="true",document.getElementsByTagName("head")[0].appendChild(a),a.src=i.jsPath("jquery.daterangepicker.min.js"),$(a).on("load",function(){n.daterangepickerlib.status="ready",e()}))})}}]),angular.module("mosapp.news.feed",["slick","mosapp.filters.prepareDateSince","mos.newsfeed.normalization.category"]).directive("newsFeed",["UrlSrvc","apiSrvc","$timeout","toolsSrvc","$window","$document","$stateParams","LangSrvc","loader","normalizationCategory","tmplSrvc","$filter",function(T,C,$,L,e,D,E,I,O,N,j,R){return{restrict:"A",scope:{apiRoot:"@",apiPath:"@",startLoadEvent:"@",page:"@",pagePath:"@",itemPath:"@",additionalFeedItems:"=?",getMoreNews:"=?",activateButtonForNextLoading:"=?",currentPage:"=?",isThereMorePages:"=?",showDistricts:"@",itemsArea:"=?",limit:"@",dependentOn:"@",setClass:"@?",filterBrickOff:"@",allInMainFeed:"=?",excludeIds:"@?",waitDependency:"=?",itemLinkTarget:"@",typesArray:"="},templateUrl:T.tmplPath("newsFeed/newsFeed.tpl.html"),link:function(s,i,e){s.getLangLink=T.getLangLink,s.lang=I.getCurrentLang();var r,t,a,n=768,o={big_accent:500,accent:320,with_photo:140,other:140},l=40,c=0,d={},m=[],p=0,u={items:[],itemsWithoutImage:[]},g=E,h=(E.page?(E.page*=1,s.currentPage=E.page):s.currentPage=1,s.typesArray||{});function f(e){s.parsedDistrictsData={};for(var t=0;t<e.length;t++){var a=e[t];s.parsedDistrictsData[a.id]=a.title}}function v(e){for(var t=0;t<e.length;t++){var a=e[t];a.districtTitle=s.parsedDistrictsData[a.territory_district_id]}}function w(e){return(e=angular.isObject(e)?e:{}).fields="id,title,date_timestamp,image,kind,territory_district_id,sphere,entity_id,entity_suffix",e["per-page"]=10,e}function _(e){e&&e.withoutAllItems||m.splice(0),s.feeds.splice(0),s.feeds.push(M()),s.additionalFeedItems.splice(0),c=p=0}function y(){var e={},t=("newsAllArea"===s.apiPath&&(e.has_district=1,e.status=["public","public_oiv"]),[]);return(t=s.excludeIds?function(){for(var e=["073"],t=s.excludeIds.split(","),a=[],i=t.length;i--;){var n,r=t[i];isNaN(r)||(n=(r+="").slice(-3),-1<e.indexOf(n)&&a.push(parseInt(r)))}return a}():t).length&&(e["!=id"]=t),e}function b(){s.notFound=!1,s.allInMainFeed=!1,_();var e=E.page||1;if((d=s.setAndGetParams(e)).id)return!1;d=w(d);e=y(),d.filter=angular.isObject(d.filter)?angular.extend(d.filter,e):e,Object.keys(d.filter).length||delete d.filter,O.switchOn(i),e=angular.copy(d);C.getData(s.apiRoot,s.apiPath,e,!1,i).then(function(t){{var e,a;angular.isArray(t.items)&&t.items.length?(s.error=!1,s.moreButton=!0,e=s.$parent&&s.$parent.normalizator?s.$parent.normalizator(t.items):N(t.items),s.showDistricts&&s.parsedDistrictsData&&v(e),a=angular.isArray(m)&&0===m.length,m=angular.isArray(m)?m.concat(e):[],window.innerWidth<n?(_({withoutAllItems:!0}),x(e),$(function(){A()},0)):P(e),t._meta&&(t._meta.currentPage==t._meta.pageCount?s.isThereMorePages=!1:(s.isThereMorePages=!0,d.page=t._meta.currentPage,s.currentPage=t._meta.currentPage)),$(function(){var e;_WINDOW.on("resize",function(){$.cancel(e),e=$(A,100)}),!D.find(".news-televisor .news-televisor__list").length&&a&&angular.isObject(t.items[0])&&j.transferToPhantom(t.items[0].date_timestamp)},150)):(s.notFound=!0,s.isThereMorePages=!1,s.currentPage=null)}s.$emit("newsfeed:fetched",{isThereMorePages:s.isThereMorePages,currentPage:s.currentPage})},function(e){s.error=e,s.isThereMorePages=!1,s.notFound=!0})}function S(e,t){return t?R("date")(e,"yyyy-MM-dd")+" 00:00:00":R("date")(e,"yyyy-MM-dd")+" 23:59:59"}function k(e){e.sort(function(e,t){e=new Date(1e3*(e.date_timestamp||e.date_from_timestamp)),t=new Date(1e3*(t.date_timestamp||t.date_from_timestamp));return e<t?1:t<e?-1:0})}function A(){var e=i.find(".news-feed__list");0<p&&(e=e.eq(p)),window.innerWidth<n?(s.separated||(s.allInMainFeed=!1,x(m),s.separated=!0),$(function(){"init"!==e.data("slickstate")&&(e.on("init",function(){e.data("slickstate","init")}),e.slick({infinite:!0,slidesToShow:1,slidesToScroll:1,speed:1e3,prevArrow:'<span class="slick-arrow-prev s-prev"><span class="ico"><span></span></span></span>',nextArrow:'<span class="slick-arrow-next s-next"><span class="ico"><span></span></span></span>'}))},0),s.additionalFeedItems.splice(0)):(angular.forEach(e,function(e){e=angular.element(e);"init"===e.data("slickstate")&&(e.slick("unslick"),e.data("slickstate","destroy"))}),(s.separated||angular.isUndefined(s.separated))&&(s.allInMainFeed=!1,p=0,s.feeds.splice(0),s.feeds.push(M()),s.feeds[p].itemsWithoutImage.splice(0),P(m,!0),s.separated=!1))}function P(e,t){t&&_({withoutAllItems:!0});t=window.innerWidth;l=t<992?20:40;for(var a=0;a<e.length;a++){i=e[a].typeOfMaterial;var i=o[i]||o.other,n=c+i+l;if(!(n<=r||r<n&&n-r<r-c||!r&&s.feeds[p].items.length<s.limit)){s.additionalFeedItems=s.additionalFeedItems.concat(e.slice(a));break}s.feeds[p].items.push(e[a]),c+=i+l,s.dependentOn&&a===e.length-1&&!s.additionalFeedItems.length&&(s.allInMainFeed=!0)}}function x(e){for(var t,a=[],i=[],n=0;n<e.length;n++)((t=e[n]).image?a:i).push(t);s.feeds[p].items=a,s.feeds[p].itemsWithoutImage=i}function M(){var e=angular.copy(u);function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e.id=t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t(),e}s.limit=parseInt(s.limit)||7,s.feeds=[],s.feeds.push(M()),s.colorScheme=L.colorScheme(),s.datenow=moment(Date.now()).format("DD.MM.YYYY"),s.getMoreNews=function(e){s.allInMainFeed=!1,e=e||i.find(".news-feed__get-more");d=w(d=s.setAndGetParams(s.currentPage+1));var t=y();d.filter=angular.isObject(d.filter)?angular.extend(d.filter,t):t,Object.keys(d.filter).length||delete d.filter;O.switchOn(e);var a=m.length;C.getData(s.apiRoot,s.apiPath,d,!1,e).then(function(e){var t;angular.isArray(e.items)&&(s.activateButtonForNextLoading=!0,t=s.$parent&&s.$parent.normalizator?s.$parent.normalizator(e.items):N(e.items),s.showDistricts&&s.parsedDistrictsData&&v(t),m=m.concat(t),window.innerWidth<n?(p++,s.feeds.push(M()),t=m.slice(a),E.theme_id&&k(t),x(t),E.theme_id&&k(m),$(function(){A()},0)):(k(m),P(m,!0)),e._meta.currentPage==e._meta.pageCount?s.isThereMorePages=!1:(s.isThereMorePages=!0,d.page=e._meta.currentPage,s.currentPage=e._meta.currentPage))},function(e){s.error=e,s.moreButton=!1})},e.excludeIds||(s.excludeIds=!1),s.dependentOn&&s.$watch(function(){return(t=t||D.find(s.dependentOn)).height()},function(e){e&&window.innerWidth>=n&&(r=e,m.length&&P(m,!0))}),s.showDistricts&&(s.isHasInnerFeedData=function(e){return angular.isArray(e)&&e[0]&&e[0].items&&e[0].items.length&&angular.isObject(e[0].items[0])}),s.itemsArea&&s.itemsArea.length?f(s.itemsArea):a=s.$watch("itemsArea",function(e){e&&e.length&&(a(),f(e),s.feeds.forEach(function(e){e.items&&v(e.items)}),v(s.additionalFeedItems),v(m))},!0),s.init=function(){s.startLoadEvent?s.$on(s.startLoadEvent,b):b()},s.setAndGetParams=function(e){var t,a=angular.extend({},g);for(t in a.page=e||1,a)if("from"===t&&""!==g[t])a.filter=a.filter||{},a.filter[">=date"]=S(L.ruStrToDate(a[t]),!0),delete a.from;else if("to"===t&&""!==g[t])a.filter=a.filter||{},a.filter["<=date"]=S(L.ruStrToDate(a[t]),!1),delete a.to;else if("district_id"===t&&""!==g[t]&&"all"!==g[t])a.filter=a.filter||{},a.filter["districts.id"]=a[t],delete a.district_id;else if("type"===t&&"all"!==a.type)a.type=h[a.type]?h[a.type].toString():null;else if("sphere_id"===t&&"all"!==a.sphere_id)try{a.filter=a.filter||{},a.filter["spheres.id"]=JSON.parse("["+a.sphere_id+"]"),delete a.sphere_id}catch(e){}else if("theme_id"===t&&"all"!==a.theme_id)try{a.filter=a.filter||{"!=status":"public_oiv","themes.id":E.theme_id},a.expand="kind,url",delete a.theme_id}catch(e){}else a[t]=""!==a[t]?a[t]:"all","all"!==a[t]&&""!==a[t]||delete a[t];return a},e.waitDependency?s.$watch("waitDependency",function(e){e&&!0===e.ready&&s.init()}):s.init()}}}]),angular.module("mosapp.news.feed.additional",["slick","mosapp.filters.prepareDateSince"]).directive("newsFeedAdditional",["UrlSrvc","apiSrvc","$timeout","toolsSrvc","LangSrvc",function(n,e,t,r,s){return{restrict:"A",scope:{apiRoot:"@",apiPath:"@",pagePath:"@",itemPath:"@",items:"=",getMoreNews:"=?",isThereMorePages:"=",activateButtonForNextLoading:"=",currentPage:"=",c:"=",showDistricts:"@",minimize:"@",filterBrickOff:"@",allInMainFeed:"=",itemLinkTarget:"@?",getNextPageUrl:"="},templateUrl:n.tmplPath("newsFeedAdditional/newsFeedAdditional.tpl.html"),link:function(e,t,a,i){e.getLangLink=n.getLangLink,e.colorScheme=r.colorScheme(),e.lang=s.getCurrentLang(),e.getMore=function(){e.activateButtonForNextLoading&&(e.activateButtonForNextLoading=!1,e.getMoreNews(t.find(".news-feed-additional__get-more")[0]))}}}}]),angular.module("mosapp.news.media.additional",[]).directive("newsMediaAdditional",["UrlSrvc","apiSrvc","$sce","toolsSrvc",function(e,n,r,s){return{restrict:"A",scope:{apiRoot:"@",apiPath:"@"},templateUrl:e.tmplPath("newsMediaAdditional/newsMediaAdditional.tpl.html"),link:function(t,e,a,i){t.trustAsHtml=function(e){return r.trustAsHtml(e)},t.hideme=!1,t.colorScheme=s.colorScheme(),n.getData(t.apiRoot,t.apiPath,{},!0,e).then(function(e){angular.isArray(e.items)?t.item=e.items[1]:t.hideme=!0},function(e){t.error=e,t.hideme=!0})}}}]),angular.module("mosapp.carousel.four.items",["ngSanitize","slick","mosapp.customisation"]).directive("mosCarouselFourItems",["UrlSrvc","$timeout","$compile","CustomisationSrvc",function(s,o,e,l){return{restrict:"A",link:function(r,a,e,t){var i,n;r.uniqueeventsid="mosCarouselFourItems"+(new Date).getTime(),a.on("$destroy",function(){r.$destroy(),$(window).off("resize."+r.uniqueeventsid)}),r.speed=parseInt(e.speed)||1500,r.getCurrentVisibleSlides=function(){if(r.slick){var e=r.slick.slickGetOption("slidesToShow"),t=r.slick.slickGetOption("responsive");if(t&&t.length){for(var a=$(window).width(),i=5e3,n=0;n<t.length;n++)t[n].breakpoint>a&&(i=Math.min(i,t[n].breakpoint));for(n=0;n<t.length;n++)if(t[n].breakpoint===i){e=t[n].settings.slidesToShow;break}}return e}},r.navArrowsLogic=function(){var e=r.getCurrentVisibleSlides();r.items&&r.items.length>e?r.showArrows=!0:r.showArrows=!1},r.onAfterChange=function(){r.isAnimation=!1},r.onInitCarousel=function(e,t){r.slick=t,r.carousel=a.find(".b-slick-carousel"),r.carousel.on("afterChange",r.onAfterChange),r.navArrowsLogic()},r.locker=function(){r.isAnimation=!0,o(r.onAfterChange,r.speed)},r.gotoPrev=function(){if(r.isAnimation)return!1;r.locker(),r.slick.prev()},r.gotoNext=function(){if(r.isAnimation)return!1;r.locker(),r.slick.next()},$(window).on("resize."+r.uniqueeventsid,function(){i&&window.clearTimeout(i),i=window.setTimeout(function(){r.navArrowsLogic()},500)}),r.titleClick=function(){},r.utmType&&l.get("mosapp.carousel.four.items.titleClick")&&((e=l.get("mosapp.carousel.four.items.titleClick")).options&&e.options[r.utmType]&&(n=e.options[r.utmType],r.titleClick=function(e){e.preventDefault(),window.location=s.addParamsToUrl(e.currentTarget.href,n)}))},scope:{title:"@",titleImage:"=",moreLink:"@",moreLinkText:"@",items:"=",slidesToShow:"@",slidesToScroll:"@",rows:"@",slidesPerRow:"@",responsive:"=",infinite:"=",section:"@",sectionStory:"@",template:"@",swipe:"=",adaptiveHeight:"@",variableWidth:"@",moreLinkTarget:"@",speed:"@",initDelay:"@",utmType:"@?"},templateUrl:s.tmplPath("carouselFourItems/carouselFourItems.tpl.html")}}]).directive("compileTemplate",["$compile",function(n){return{scope:!0,link:function(t,a,e){var i;e.$observe("template",function(e){angular.isDefined(e)&&""!==e&&(i=n(e)(t),a.replaceWith(i))})}}}]),angular.module("mosapp.filters.containers",[]).directive("containerRatio",["$timeout",function(e){return{restrict:"A",link:function(a,e,t){for(var i="containerRatio"+(new Date).getTime()+(9998*Math.random()+1),n=(e.on("$destroy",function(){$(window).off("resize."+i),a.$destroy()}),a.attrParams=t.containerRatio,a.attrParams=a.attrParams.split(":"),a.params={},a.attrParams.length);n--;){var r=a.attrParams[n].split("|");a.params[r[0]]=r[1]}a.getRatio=function(){var e=document.documentElement.clientWidth;return e?1170<e?"e":970<e?"d":750<e?"c":463<e?"b":"a":"a"},a.setElementSize=function(){a.ratio=a.getRatio(),e.height(e.width()*a.params[a.ratio])},a.setElementSize(),a.$watch(function(){return e.width()},function(e,t){e!==t&&(a.t&&clearTimeout(a.t),a.t=setTimeout(function(){a.setElementSize()},50))})},scope:{containerRatio:"@"}}}]),angular.module("mosapp.filters.imageSrc",[]).value("imageSet",{defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",ratioMask:"x1_",size:{s:"small",m:"middle",b:"big"}}).service("imgSrvc",["mosconfig",function(t){this.isMarkupImage=function(e){return-1<e.indexOf("%markup_images_dir%")?e.replace("%markup_images_dir%",t.imagesPath):e},this.testSrc=function(e){return""!==e&&e},this.testObj=function(e,t){return!!(angular.isObject(e)&&angular.isObject(e[t])&&angular.isDefined(e[t].src)&&this.testSrc(e[t].src))&&e[t].src}}]).filter("imgThumb",["imgSrvc","imageSet",function(a,i){return function(e){var t=i.defaultImage;return angular.isObject(e)?angular.isDefined(e.src)&&a.testSrc(e.src)?a.isMarkupImage(e.src):(e=a.testObj(e,"thumb")||a.testObj(e,"small")||a.testObj(e,"middle")||a.testObj(e,"big"))?a.isMarkupImage(e):t:t}}]).filter("imgShow",["imgSrvc","imageSet",function(a,i){return function(e){var t=i.defaultImage;return angular.isObject(e)?angular.isDefined(e.src)&&a.testSrc(e.src)?a.isMarkupImage(e.src):(e=a.testObj(e,"show")||a.testObj(e,"big")||a.testObj(e,"original"))?a.isMarkupImage(e):t:t}}]).filter("imgDownload",["imgSrvc","imageSet",function(i,n){return function(e){var t,a=n.defaultImage;return angular.isObject(e)?angular.isDefined(e.src)&&i.testSrc(e.src)?i.isMarkupImage(e.src):(t=(t=i.testObj(e,"download")||i.testObj(e,"show")||i.testObj(e,"big")||i.testObj(e,"original"))&&0===i.isMarkupImage(t).split("/").pop().indexOf("undefined(",0)?i.testObj(e,"show")||i.testObj(e,"big")||i.testObj(e,"original"):t)?i.isMarkupImage(t):a:a}}]).filter("imageSrc",["imgSrvc","imageSet",function(a,i){return function(e){var t=i.defaultImage;return angular.isObject(e)?angular.isDefined(e.src)&&a.testSrc(e.src)?a.isMarkupImage(e.src):(e=a.testObj(e,"small")||a.testObj(e,"middle")||a.testObj(e,"big"))?a.isMarkupImage(e):t:t}}]).filter("imageSrcBig",["imgSrvc","imageSet",function(a,i){return function(e){var t=i.defaultImage;return angular.isObject(e)?angular.isDefined(e.src)&&a.testSrc(e.src)?a.isMarkupImage(e.src):(e=device.mobile()?a.testObj(e,"small")||a.testObj(e,"middle")||a.testObj(e,"big"):device.tablet()?a.testObj(e,"middle")||a.testObj(e,"big")||a.testObj(e,"small"):a.testObj(e,"big")||a.testObj(e,"middle")||a.testObj(e,"small"))?a.isMarkupImage(e):t:t}}]).filter("imageSrcMiddle",["imgSrvc","imageSet",function(a,i){return function(e){var t=i.defaultImage;return angular.isObject(e)?angular.isDefined(e.src)&&a.testSrc(e.src)?a.isMarkupImage(e.src):(e=a.testObj(e,"middle")||a.testObj(e,"big")||a.testObj(e,"small"))?a.isMarkupImage(e):t:t}}]).filter("imageSetSrc",["imgSrvc","imageSet",function(l,c){return function(e,t,a,i,n,r){var s=c.defaultImage,o=document.documentElement.clientWidth,r=o?1280<o?r:1024<o?n:768<o?i:480<o?a:t:i,n=(r=r.split("|"))[1]||"3",o=r[2]||"m";return angular.isObject(e)?angular.isDefined(e.src)&&l.testSrc(e.src)?l.isMarkupImage(e.src):(a=l.testObj(e,n+c.ratioMask+o)||l.testObj(e,c.size[o]))?l.isMarkupImage(a):s:s}}]).filter("imageSrcOriginal",["imgSrvc","imageSet",function(a,i){return function(e){var t=i.defaultImage;return angular.isObject(e)?angular.isDefined(e.src)&&a.testSrc(e.src)?a.isMarkupImage(e.src):(e=a.testObj(e,"original")||a.testObj(e,"big")||a.testObj(e,"middle")||a.testObj(e,"small"))?a.isMarkupImage(e):t:t}}]).filter("imgFileName",["imgSrvc",function(i){return function(e){var t="Moscow.jpg",a=angular.isObject(e)&&(a=angular.isDefined(e.src)&&i.testSrc(e.src)?i.isMarkupImage(e.src):i.isMarkupImage(i.testObj(e,"original")))?a.split("/").pop():t;return a}}]).directive("fixHeadImage",[function(){return{restrict:"A",scope:{},link:function(i,e){e.on("$destroy",function(){i.$destroy()}),i.EL=$(e),i.HDR=$(".b-header.attached"),i.WND=$(window),i.WND.on("scroll",function(){var e=i.EL.offset().top,t=i.HDR.length?i.HDR.height():0,a=e-t<(a=i.WND.scrollTop())?a+t-e:0;i.EL.css({"background-position":"center "+a+"px"})})}}}]).directive("imageSetElement",["imgSrvc","imageSet","$timeout","toolsSrvc","loader",function(s,o,e,t,l){return{restrict:"A",link:function(n,r){r.on("$destroy",function(){n.$destroy()}),n.removeLoader=function(){var e=r;n.loaderType&&(e={loaderType:n.loaderType,elems:r}),l.switchOff(e)},n.firstStart=!0,n.getSrc=function(){var e=o.defaultImage,t=r.width(),a=r.height(),i=(n.firstStart&&(i=r,n.loaderType&&(i={loaderType:n.loaderType,elems:r}),l.switchOn(i)),Math.round(t/a)),a=(i=(i=4<i?4:i)<1?1:i,800<t?"b":480<t?"m":"s");return angular.isObject(n.imageSetElement)?angular.isDefined(n.imageSetElement.src)&&s.testSrc(n.imageSetElement.src)?s.isMarkupImage(n.imageSetElement.src):(t=s.testObj(n.imageSetElement,i+o.ratioMask+a)||s.testObj(n.imageSetElement,o.size[a]))?s.isMarkupImage(t):e:e},n.setBackground=function(){n.firstStart&&(n.firstStart=!1,t.hideContentArea(angular.element(r))),n.removeLoader(),r.css("background-image",'url("'+n.img.src+'")'),t.showContentArea(angular.element(r))},n.loadBackground=function(){n.img=new Image,n.img.src=n.getSrc(),angular.element(n.img).on("load",n.setBackground).on("error",n.removeLoader)},e(function(){n.childImgEl=r.children("img"),n.childImgEl.length&&n.childImgEl[0]?n.$watch(function(){return n.childImgEl[0].src},function(){e.cancel(n.loadBGTimer),n.loadBGTimer=e(function(){n.loadBackground()},1e3)}):(n.loadBackground(),n.enableWatch&&(n.parentNode=angular.element(r[0].parentNode),n.$watch(function(){return{width:r.width(),height:r.height()}},function(e,t){e.width===t.width&&e.height===t.height||n.loadBackground()},!0)))})},scope:{imageSetElement:"=",loadHeight:"@",enableWatch:"@",loaderType:"@"}}}]).directive("imgSpacer",[function(){return{restrict:"A",link:function(e,t,a){for(var i="imgSpacer"+(new Date).getTime()+(9998*Math.random()+1),n=(t.on("$destroy",function(){$(window).off("resize."+i),e.$destroy()}),e.attrParams=a.imgSpacer,e.attrParams=e.attrParams.split(":"),e.params={},e.attrParams.length);n--;){var r=e.attrParams[n].split("|");e.params[r[0]]=r[1]}e.images={"1x1":"data:image/gif;base64,R0lGODlhDwAPAIAAAP///wAAACH5BAEAAAAALAAAAAAPAA8AAAINhI+py+0Po5y02otnAQA7","2x1":"data:image/gif;base64,R0lGODlhHgAPAIAAAP///wAAACH5BAEAAAAALAAAAAAeAA8AAAIThI+py+0Po5y02ouz3rz7D4ZTAQA7","3x1":"data:image/gif;base64,R0lGODlhLQAPAIAAAP///wAAACH5BAEAAAAALAAAAAAtAA8AAAIYhI+py+0Po5y02ouz3rz7D4biSJbmiTYFADs=","4x1":"data:image/gif;base64,R0lGODlhPAAPAIAAAP///wAAACH5BAEAAAAALAAAAAA8AA8AAAIchI+py+0Po5y02ouz3rz7D4biSJbmiabqyrZrAQA7"},e.rewriteSet=function(){e.w=document.documentElement.clientWidth,e.set="a",e.w&&(e.set="a",463<e.w&&(e.set="b"),750<e.w&&(e.set="c"),970<e.w&&(e.set="d"),1170<e.w&&(e.set="e")),t[0].src=e.images[e.params[e.set]+"x1"],t[0].style.width="100%",t[0].style.height="auto"},e.rewriteSet(),$(window).on("resize."+i,function(){e.t&&clearTimeout(e.t),e.t=setTimeout(function(){e.rewriteSet()},Math.floor(400*Math.random())+100)})},scope:{imgSpacer:"@"}}}]).directive("imgRatio",["mosconfig","$timeout","imgSrvc","imageSet","toolsSrvc","loader",function(e,s,o,l,c,d){return{restrict:"A",link:function(n,a,t){for(var e="imgRatio"+(new Date).getTime()+(9998*Math.random()+1),i=(a.on("$destroy",function(){$(window).off("resize."+e),n.$destroy()}),n.images={"1x1":"data:image/gif;base64,R0lGODlhDwAPAIAAAP///wAAACH5BAEAAAAALAAAAAAPAA8AAAINhI+py+0Po5y02otnAQA7","2x1":"data:image/gif;base64,R0lGODlhHgAPAIAAAP///wAAACH5BAEAAAAALAAAAAAeAA8AAAIThI+py+0Po5y02ouz3rz7D4ZTAQA7","3x1":"data:image/gif;base64,R0lGODlhLQAPAIAAAP///wAAACH5BAEAAAAALAAAAAAtAA8AAAIYhI+py+0Po5y02ouz3rz7D4biSJbmiTYFADs=","4x1":"data:image/gif;base64,R0lGODlhPAAPAIAAAP///wAAACH5BAEAAAAALAAAAAA8AA8AAAIchI+py+0Po5y02ouz3rz7D4biSJbmiabqyrZrAQA7"},n.noAnimation="true"===t.noAnimation,n.attrParams=t.imgRatio,n.attrParams=n.attrParams.split(":"),n.params={},n.attrParams.length);i--;){var r=n.attrParams[i].split("|");n.params[r[0]]=r[1]}n.parentNode=angular.element(a[0].parentNode),n.removeLoader=function(){d.switchOff(n.parentNode[0])},n.firstStart=!0,n.getSrc=function(e){var t=n.images[e+"x1"],a=n.parentNode.width(),i=(!n.noAnimation&&n.firstStart&&d.switchOn(n.parentNode[0]),800<a?"b":480<a?"m":"s");return n.parentNode.height(a/e),angular.isObject(n.imgSource)?angular.isDefined(n.imgSource.src)&&o.testSrc(n.imgSource.src)?(a=o.isMarkupImage(n.imgSource.src),/^(\/)|(http(s):\/\/)/.test(a)?a:"/"+a):(a=o.testObj(n.imgSource,e+l.ratioMask+i)||o.testObj(n.imgSource,l.size[i]))?o.isMarkupImage(a):t:t},n.restoreStyle=function(e){n.needForRestore=!1,s.cancel(n.needForRestoreTimer),n.noAnimation||n.removeLoader(),!n.noAnimation&&n.firstStart&&(n.firstStart=!1,c.hideContentArea(n.parentNode)),a[0].src=e,a[0].style.height="auto",n.noAnimation||c.showContentArea(n.parentNode)},n.brokenImageSrc=function(e){t.setBrokenImageSrc&&n.setBrokenImageSrc(e)},n.rewriteSet=function(){n.needForRestore=!0,a[0].style.width="100%";var e=new Image,t=n.params[n.ratio];e.src=n.getSrc(t),n.noAnimation&&(a[0].src=e.src),angular.element(e).on("load",function(){n.needForRestore&&(n.brokenImageSrc(!1),n.restoreStyle(e.src,t))}),angular.element(e).on("error",function(){e.src=n.images[t+"x1"],n.needForRestore&&(n.brokenImageSrc(!0),n.restoreStyle(e.src,t))}),n.needForRestoreTimer=s(function(){n.needForRestore&&(n.brokenImageSrc(!1),n.restoreStyle(e.src,t))},1e4)},n.getRatio=function(){var e=document.documentElement.clientWidth;return e?1170<e?"e":970<e?"d":750<e?"c":463<e?"b":"a":"a"},n.ratio=n.getRatio(),n.rewriteSet(),n.$watch(function(){return n.parentNode.width()},function(e,t){e!==t&&(n.ratio=n.getRatio(),n.parentNode.css({height:e/n.params[n.ratio],overflow:"hidden"}),a[0].style.height="100%",n.t&&clearTimeout(n.t),n.t=setTimeout(function(){n.rewriteSet()},Math.floor(100*Math.random())+50))})},scope:{imgRatio:"@",imgSource:"=",noAnimation:"@",setBrokenImageSrc:"=?"}}}]),angular.module("mosapp.filters.prepareDate",[]).filter("prepareDate",function(){return function(e){var t,a,i=[];return-1===e.indexOf("-")?e:((i=e.split("-"))[0]=i[0].slice(0,i[0].length-1),i[1]=i[1].slice(1,i[1].length+1),i[0]===i[1]?i[0]:(t=i[0].split(" "),a=i[1].split(" "),1===t.length&&1===a.length?e:t[1]===a[1]?t[0]+"–"+a[0]+" "+a[1]:i[0]!==i[1]?e:void 0))}}),angular.module("mosapp.filters.prepareDateSince",[]).filter("prepareDateSince",["$filter",function(n){return function(e,t){var a=new Date,i=a.getTimezoneOffset()/60,i=(a=-3!=i?new Date(a.getTime()+3600*i*1e3+108e5):a).getFullYear();if(new Date(e).getFullYear()<i)return n("date")(e,t+" yyyy");i=Math.abs(e-a.getTime());if(1<=Math.floor(i/864e5))return n("date")(e,t);a=Math.floor(i/36e5);if(0<a&&a<24)return a+n("translate")("prepareDateSince.hours");a=Math.floor(i/6e4);return 0<a&&a<60?a+n("translate")("prepareDateSince.minutes"):0==a?n("translate")("prepareDateSince.momentAgo"):n("date")(e,t)}}]),angular.module("mosapp.press.categories",[]).directive("mosPressCategories",["UrlSrvc","LangSrvc",function(e,n){return{restrict:"A",replace:!0,link:function(a,e,i,t){a.$watch("categories",function(e){for(var t in a.lang=n.getCurrentLang(),"en"==a.lang?a.allTitle="All":a.title="Все",a.categories)a.categories[t].preTitle="en"==a.lang?"News: ":"Новости: ";if(angular.isArray(e)&&!a.hideEmptyValue&&e[0]&&""!==e[0].id){e={id:"",title:i.placeholder||a.allTitle};a.categories.unshift(e);for(t=0;t<a.categories.length;t++){if(a.categories[t].id===a.category.id){a.category.title||(a.category=a.categories[0]);break}t!==a.categories.length-1||a.categories[t].active||(a.category=a.categories[0])}}}),a.$watch("category",function(e,t){!e||!e.hasOwnProperty("id")||a.categories&&!a.categories.length||t&&e.id===t.id||(""===e.id&&(a.category=a.categories[0]),a.changeCategory(e.id))}),a.changeCategory=function(e){a.catid=e,i.onCategoryChange&&a.catid!==a.category.id&&a.onCategoryChange({catid:e})}},scope:{categories:"=",category:"=",onCategoryChange:"&",hideEmptyValue:"=",h1:"="},templateUrl:e.tmplPath("pressCategories/pressCategories.tpl.html")}}]),angular.module("mgcrea.ngStrap.dropdown").run(["$templateCache",function(e){e.put("dropdown/dropdown.press.categories.tpl.html",'<div tabindex="-1" class="dropdown-menu customScrollbar" role="menu"><div role="presentation" ng-repeat="item in content" data-ng-class="{active: category.id==item.id}"><a role="menuitem" tabindex="-1" href="" ng-click="$hide();changeCategory(item.id);" ng-bind="item.title"></a></div></div>')}]),angular.module("mosapp.press.categoriesCheckbox",[]).directive("mosPressCategoriesCheckbox",["UrlSrvc","LangSrvc",function(e,n){return{restrict:"A",replace:!0,link:function(a,e,i,t){a.lang=n.getCurrentLang(),"en"==a.lang?a.allTitle="All":a.title="Все",a.$watch("categories",function(e){if(angular.isArray(e)&&!a.hideEmptyValue&&e[0]&&""!==e[0].id){e={id:"",title:i.placeholder||a.allTitle};a.categories.unshift(e);for(var t=0;t<a.categories.length;t++){if(a.categories[t].id===a.category.id){a.category.title||(a.category=a.categories[0]);break}t!==a.categories.length-1||a.categories[t].active||(a.category=a.categories[0])}}}),a.changeCategory=function(e){a.catid=e,i.onCategoryChange&&a.catid!==a.category.id&&a.onCategoryChange({catid:e})}},scope:{categories:"=",category:"=",onCategoryChange:"&",hideEmptyValue:"="},templateUrl:e.tmplPath("pressCategoriesCheckbox/pressCategoriesCheckbox.tpl.html")}}]).directive("mosPressCategoriesCheckboxLabel",["UrlSrvc","$http","$templateCache","$compile","$timeout","$window","toolsSrvc",function(i,n,r,o,l,c,d){return{restrict:"A",replace:!0,scope:{categories:"=",category:"=",placeholder:"@",onCategoryChange:"&",resetTitle:"@"},templateUrl:i.tmplPath("pressCategoriesCheckbox/pressCategoriesCheckboxLabel.tpl.html"),link:function(s,a,e,t){s.$watch(function(){return d.colorScheme()},function(e){s.colorScheme=e}),s.resetTitle&&(s.$watch("category",function(e){var t=[];1<e.length&&(e.forEach(function(e){e.title!=s.placeholder&&t.push(e)}),s.category=t)},!0),s.$watch("categories",function(e){angular.isArray(e)&&e.length&&e[0].title!=s.placeholder&&s.categories.unshift({id:"",title:s.placeholder})},!0)),angular.element(c).on("click",function(e){var t=$(e.target),e=0<a.find(e.target).length;a.hasClass("open")?t.closest(".dropdown-menu")&&e&&!t.hasClass("b-dropdown__opener")&&!t.hasClass("ico")||(a.find(".dropdown-menu-label").addClass("dropdown-menu-label__opacity0"),l(function(){a.removeClass("open"),a.find(".dropdown-menu").remove()},500)):e&&(a.addClass("open"),n.get(i.tmplPath("dropdown/dropdown.press.categoriesCheckboxLabel.tpl.html"),{cache:r}).then(function(e){s.content=angular.copy(s.categories);var t=o(e.data)(s);a.append(t),s.$applyAsync(function(){a.find(t).removeClass("dropdown-menu-label__opacity0")})}))});s.changeCategory=function(a){s.resetTitle&&(s.setAll=s.category.some(function(e){return e.title==s.placeholder}),a&&a.title==s.placeholder&&!s.setAll&&(s.category.forEach(function(e,t){e.title!=s.placeholder&&s.changeCategory(e)}),s.categories.forEach(function(e){try{e.title==s.category[0].title&&s.changeCategory(e)}catch(e){}})),a&&a.title!=s.placeholder&&s.setAll&&s.changeCategory(s.categories[0]));var i,n,r,e=angular.copy(s.category);e.length?(i=!0,angular.forEach(e,function(e,t){a.id==e.id&&(i=!1)}),i?s.category.push(a):s.category.splice((e=s.category,n=a,r=null,angular.forEach(e,function(e,t){n.id==e.id&&(r=t)}),r),1)):s.category.push(a),s.onCategoryChange(s.category)},s.isActive=function(a){var i=!1;return angular.forEach(s.category,function(e,t){a.id==e.id&&(i=!0)}),!!i},s.getTitle=function(e,t){return t}}}}]).filter("listTitles",[function(){return function(e){var a=e.length,i="",n=",";return angular.forEach(e,function(e,t){a-1==t&&(n=""),i+=e.title+n}),i}}]),angular.module("mgcrea.ngStrap.dropdown").run(["$templateCache",function(e){e.put("dropdown/dropdown.press.categoriesCheckbox.tpl.html",'<div tabindex="-1" class="dropdown-menu customScrollbar" role="menu"> <label ng-repeat="item in content" class="b-dropdown-checkbox__label"> <input type="checkbox" class="b-dropdown-checkbox__input" value="{{item.id}}"> {{item.title}} </label> </div>'),e.put("dropdown/dropdown.press.categoriesCheckboxLabel.tpl.html",'<div tabindex="-1" class="dropdown-menu dropdown-menu-label  dropdown-menu-label__opacity0 customScrollbar" role="menu"> <label ng-repeat="item in content" class="b-dropdown-checkbox__label" data-ng-class="{\'grayscale\':colorScheme==\'contrast\', \'active\':isActive(item)}" data-ng-click="changeCategory(item)">{{item.title}} </label></div>')}]),angular.module("mosapp.sharing",["mosapp.sharing.popup"]).directive("mosSharing",["UrlSrvc","$compile","$modal","$stateParams","apiSrvc","$timeout","mosconfig","LangSrvc",function(o,e,l,t,a,c,u,d){return{restrict:"A",priority:0,link:function(i,e,t){e.on("$destroy",function(){i.$destroy()}),i.$watch(function(){return angular.element(document).width()},function(e){i.direction=t.dynDirect?i.dynDirect:t.direction,i.dynClass="b-sharing-links_type_"+i.direction+" b-sharing-links_behaviour_plain"}),t.socials||(i.lang=d.getCurrentLang(),"ru"===i.lang?i.socials="vkontakte,odnoklassniki":i.socials="vkontakte");var a=["plain","modal"],m="icon-share",p={vkontakte:"vk",facebook:"facebook",twitter:"twitter",odnoklassniki:"odnoklassniki"},n=null;function r(e){return(e=e?String(e).replace(/\&\w{4,5};/gm," "):"")?String(e).replace(/<[^>]+>/gm,""):""}function s(){c(function(){var e="";u.domain&&(e=(e=(0===u.domain.indexOf("http")?"":location.protocol+"//")+u.domain).replace(new RegExp("/$"),""));var o=0===(o=i.image&&""!==i.image&&i.image.indexOf("data:image",0)<0?i.image:(u.imagesPath||"")+"icon200x200.png").indexOf("http")?o:e+"/"+o.replace(new RegExp("^/"),""),l=e+"/"+location.pathname.replace(new RegExp("^/"),""),c=r(i.title||i.text||document.title),d=r(i.description||i.preview||i.title||i.text||document.title),e=("article"!==t.itemType&&0!==window.location.pathname.indexOf("/city/about/symbols/")&&0!==window.location.pathname.indexOf("/city/about/honors/")||(o="https://"+window.location.hostname+"/open-graph/v1/frontend"+window.location.pathname,$('meta[property="og:image:width"]').attr("content","1200"),$('meta[property="og:image:height"]').attr("content","630")),i.letAloneOg||($('meta[property="og:url"]').attr("content",l),$('meta[property="og:title"]').attr("content",c),$('meta[property="og:description"]').attr("content",d),$('meta[property="og:image"]').attr("content",o),$('meta[property="og:image:url"]').attr("content",o)),"undefined"===i.showCounter||i.showCounter);i.socials&&i.id&&document.getElementById(i.id)&&(n?n.updateContent({url:l,title:c,description:d,image:o}):n=new Ya.share2(i.id,{content:{url:l,title:c,description:d,image:o},theme:{services:i.socials,counter:e,lang:"ru",bare:!1},hooks:{onready:function(){var n=$("#"+i.id),e=n.find(".ya-share2__icon"),a=i.getSocials(),r=(e.each(function(e,t){$(t).addClass(m).addClass(m+"-"+p[a[e]])}),new Date),s=setInterval(function(){var e=new Date;if(e-r<1e4&&n.find(".ya-share2__item_service_odnoklassniki").find(".ya-share2__link").attr("href","https://connect.ok.ru/dk?st.cmd=WidgetSharePreview&&st.imageUrl="+encodeURIComponent(o)+"&st.description="+encodeURIComponent(d)+"&st.shareUrl="+encodeURIComponent(l)+"&st.title="+encodeURIComponent(c)+"&utm_source=share2"),e-r<6e4)for(var t=n.find(".ya-share2__counter"),a=t.length-1;0<=a;a--){var i=$(t[a]);isNaN(parseInt(i.text()))?isNaN(i.data("count"))?i.removeClass("show-counter"):i.text($(t[a]).data("count")):i.hasClass("show-counter")||(i.css({opacity:0}).addClass("show-counter"),TweenLite.to(i,.75,{opacity:1,ease:Power1.easeOut}))}else clearInterval(s)},1e3)},onshare:function(e){for(var t=$("#"+i.id).find(".ya-share2__counter"),a=t.length-1;0<=a;a--)isNaN($(t[a]).text())||$(t[a]).css({opacity:1}).addClass("show-counter")}}})),i.calculatePos=function(){var e=angular.element(document).height(),t=angular.element(document).find(".b-popup-sharing__body").height();angular.element(document).find(".b-sharing").offset().top;return currentTop=(e-t)/2},i.isModal()&&i.$watch(function(){return angular.element(document).width()},function(e){i.widthShareItem&&(767<e?(angular.element(document).find(".ya-share2__item").attr("style","width: "+i.widthShareItem+"%"),i.calculatePos()):angular.element(document).find(".ya-share2__item").removeAttr("style"))})},10)}i.getSocials=function(){return i.socials.split(",")},i.isModal=function(){return i.type===a[1]||a.indexOf(i.type)<0},i.openPopup=function(e){i.widthShareItem=Math.round(100/i.getSocials().length),i.popup=l({scope:i,template:o.tmplPath("sharingPopup/sharingPopup.tpl.html"),show:!1,prefixClass:"share-modal",backdropAnimation:"am-fade"}),i.popup.$promise.then(function(){i.popup.show(),s()})},i.isModal()&&angular.element(window).on("click",function(e){angular.element(document).find(e.target).hasClass("am-fade")&&i.closePopup()}),i.closePopup=function(){n=null,i.popup.hide()},i.$watch("text",function(e){e&&!i.isModal()&&s()}),i.$watch("image",function(e){e&&!i.isModal()&&s()}),s()},scope:{id:"@",type:"@",socials:"@",direction:"@",dynDirect:"=",image:"@",text:"@",showCounter:"=",title:"@",preview:"@",description:"@",letAloneOg:"="},templateUrl:o.tmplPath("sharing/sharing.tpl.html")}}]),angular.module("mosapp.sharing.popup",[]).directive("mosSharingPopup",["UrlSrvc","$compile","$modal","$stateParams","apiSrvc","$timeout",function(e,t,a,i,n,r){return{restrict:"A",link:function(e,t,a){},scope:{},templateUrl:e.tmplPath("sharingPopup/sharingPopup.tpl.html")}}]),angular.module("mosapp.tags",[]).directive("mosTags",["UrlSrvc","apiSrvc",function(i){return{restrict:"A",scope:{tags:"=",section:"@"},link:function(t,e,a){t.$watch("tags",function(){t.getSearchLink=function(e){return e=encodeURIComponent(e),a.section&&""!==a.section?t.filtr=t.section:t.filtr="common",i.getLangLink(i.pagePath("search","")).replace(new RegExp("/$","g"),"")+"?category="+t.filtr+"&page=1&skip_stat=2&q="+e}})},templateUrl:i.tmplPath("tags/tags.tpl.html")}}]),angular.module("mosapp.spheres",[]).directive("mosSpheres",["UrlSrvc",function(e){return{restrict:"A",scope:{params:"=",createLink:"=",target:"@?"},link:function(a,e){e.on("$destroy",function(){a.$destroy()}),a.$watch("params",function(t){a.getSphereLink=function(e){return a.createLink?t.url.replace("%sphereid%",e.id):null}})},templateUrl:e.tmplPath("spheres/spheres.tpl.html")}}]),angular.module("mosapp.responce.dialog",[]).directive("responceDialog",["UrlSrvc","apiSrvc","$stateParams","$state",function(e,t,a,i){return{restrict:"A",scope:{notFound:"="},link:function(e,t,a){e.title=a.title},templateUrl:"responceDialog/responceDialog.tpl.html"}}]),angular.module("mosapp.mosError",["mosapp.filters.imageSrc","ngSanitize"]).filter("to_trusted",["$sce",function(t){return function(e){return t.trustAsHtml(e)}}]).directive("mosError",["UrlSrvc","apiSrvc","toolsSrvc","$state","$stateParams","$timeout","libsLoader","LangSrvc","headmetaSrvc","$translate",function(e,a,i,t,n,r,s,o,l,c){return{scope:{mosError:"="},link:function(t){s.get({js:"error/index.js",css:"error/index.css",id:"error-app.js",api:"Error"});["msapplication-tap-highlight","fb:pages","og:url","og:title","og:type","og:description","og:image","og:site_name","twitter:card"].forEach(function(e){l.removeMetaTag(e)}),c("mosError.errorMessage_"+t.mosError).then(function(e){i.setTitleClean(e)}),t.$watch("mosError",function(e){e!=undefined&&a.getData("mosError","page",{code:t.mosError},!0).then(function(e){t.pageInfo=e,r(function(){"function"==typeof window.phantomJsError&&window.phantomJsError(t.mosError)})})}),t.lang=o.getCurrentLang(),t.appId="en"===t.lang?"app-en":"app",t.isClientError="4"===t.mosError.toString()[0],t.showSearch=!("en"!==t.lang&&"ru"!==t.lang||!t.isClientError),"404"==t.mosError&&i.statCounter({metrika:{TARGET_NAME:"error_404"}})},templateUrl:e.tmplPath("mosError/mosError.tpl.html")}}]),angular.module("mosapp.rss.subscriber",[]).directive("rssSubscriber",["toolsSrvc","UrlSrvc",function(i,e){return{restrict:"A",scope:{},link:function(e,t,a){e.colorScheme=i.colorScheme()},templateUrl:e.tmplPath("rssSubscriber/rssSubscriber.tpl.html")}}]),angular.module("mosapp.newspage.themes",[]).directive("newsPageThemes",["$state","$stateParams","$filter","toolsSrvc","testDate","UrlSrvc","themeIdLinked","$timeout","metaConfig","newsFilter","LangSrvc","$translate",function(e,l,c,d,t,m,a,p,u,i,g,h){return{restrict:"A",scope:{rootState:"@"},link:function(n,t,e){n.activateButtonForNextLoading=!0;var a,i={theme_id:l.theme_id,page:1},r=c("translate"),s=(n.lang=g.getCurrentLang(),n.normalizator=function(e){for(var t=e.length,a=0;a<t;a++)e[a].id=parseInt(e[a].entity_id.toString()+e[a].entity_suffix.toString()),e[a].link=e[a].url;return angular.copy(e)},t.on("click",function(){}),u.init().then(function(){d.setMeta(n,u.config,"news")}),n.$on("maintheme:init",function(e,t){var a,i;t&&t.title&&(a=t.title+": "+r("newsPageThemes.newsMainThemeText"),i=u.config.news,angular.extend(i,{title:a}),d.setMeta(n,{news:i},"news"),d.setTitleClean(a),d._setMeta("description",r("newsPageThemes.newsOnTheTopic")+": "+t.title),d.setKeywords(t.title+", "+r("newsPageThemes.newsText")+" "+t.title+", "+r("newsPageThemes.moscowNewsText")),h(["newsPageThemes.newsTitle"]).then(function(e){n.h1=e["newsPageThemes.newsTitle"]+": "+t.title})),m.setCanonical(m.getLangLink(m.pagePath("news","/maintheme/"+l.theme_id))),s()}));function o(){var e=angular.element(t).find(".districts-page__filters").outerHeight();angular.element(t).find(".news-media-wrapper").css("margin-top",-e)}n.h1="",n.extconts=m.getBanners("newsPageThemes"),n.newsFeedItems=[],n.getMoreNewsFunc=null,n.isThereMorePages=!1,n.setAndGetParams=function(e){return e&&(i.page?i.page=++i.page:i.page=e),angular.copy(i)},p(function(){o()},100),_WINDOW.on("resize",function(){p.cancel(a),a=p(o,100)})},templateUrl:m.tmplPath("newsPageThemes/newsPageThemes.tpl.html")}}]).factory("themeIdLinked",function(){var t;return{set:function(e){t=e},get:function(){return t}}}),angular.module("mosapp.mosLightbox",[]).directive("mosLightbox",["$modal","UrlSrvc","$timeout","loader",function(re,se,oe,le){return{restrict:"A",scope:{fullImageLink:"@",description:"@",prefixClass:"@",scrollOn:"@",container:"@"},template:"",link:function(i,s,e){var n,r,a,o,l,c,d,m=document.body,t=document.documentElement,p=angular.element(document),u=angular.element(window),g=i.container&&s.parents(i.container),h=parseInt(s.attr("width")),f=parseInt(s.attr("height")),v=!h&&(f||0);function w(e,t,a,i,n,r){!t&&e!=a||t&&t!=a?(s.attr("height",Math.ceil(a/r)),!t&&f&&g&&g.width()>a&&i<n&&(e=Math.ceil(g.width()/r),s.attr("height",n<e?n:e))):t===a&&n&&s.attr("height",n)}function F(){var e=angular.element(s);i.popupImage={src:i.fullImageLink||e.attr("src"),description:i.description||(e.attr("data-jsalt")?"":e.attr("alt"))},i.popup=re({scope:i,template:se.tmplPath("mosLightbox/mosLightbox.tpl.html"),show:!1,prefixClass:"mos-lightbox",prefixEvent:"mos-lightbox",backdropAnimation:"am-fade",placement:"center",backdrop:"static"}),i.popup.$promise.then(function(){i.popup.show();var e,t=angular.element(i.popup.$element),a=t.find(".mos-lightbox-popup-modal__cont");le.switchOn(a),i.popupImage&&i.popupImage.src&&(e=new Image,r=$(e),n=$(i.popup.$element),e.onload=function(){le.switchOff(a),t.find(".mos-lightbox-popup-modal__wrapper").prepend(e),oe(function(){n.addClass("positioned"),u.on("resize.popup",B)},10)},r.on("mousedown",H),r.on("mousemove",V),r.on("mouseup mouseleave",J),r.on("touchstart pointerdown",te),r.on("touchmove pointermove",ae),r.on("touchend pointerup",ie),e.src=i.popupImage.src)})}f||s.attr("height",""),i.maxZoom=2,i.$on("$destroy",function(){p.off("keyup.mos-lightbox"),u.off("resize.lightboxImage")}),s.on("load",function(){var a=this.naturalWidth,e=this.naturalHeight,i=h&&f?h/f:a/e,e=s.width(),t=s.height();h&&(w(a,h,e,t,v,i),u.on("resize.lightboxImage",function(){var e=s.width(),t=s.height();w(a,h,e,t,v,i)}))}),i.$on("mos-lightbox.show",function(e,t){i.zoom=1,o=null,a=window.pageYOffset||m.scrollTop,m.style.position="fixed",m.style.top=-a+"px",m.style.width="100%",p.on("keyup.mos-lightbox",function(e){27===e.keyCode&&t.hide()}),(l=n.find(".mos-lightbox-popup-modal__cont-wrapper")).width(n.width()),c=n.find(".mos-lightbox-popup-modal__cont"),d=n.find(".mos-lightbox-popup-modal__wrapper"),l.css({height:n.height()}),n.mCustomScrollbar({axis:"yx",scrollbarPosition:"inside",theme:"minimal-dark",advanced:{updateOnImageLoad:!0,autoExpandHorizontalScroll:!0}}),A(),y=n.data("mCS"),b=n.find(".mCSB_container"),n.find(".mCSB_scrollTools_vertical"),n.find(".mCSB_scrollTools_horizontal"),touchMoveY=[],touchMoveX=[]}),i.$on("mos-lightbox.hide",function(){m.style.position="",m.style.width="",m.style.top="",t.scrollTop=a,m.scrollTop=a,u.off("resize.popup"),p.off("keyup.mos-lightbox")}),i.hidePop=function(){i.popup&&(i.popup.hide(),i.popup=null)};var _,y,b,S,k,U,q,z=angular.element(s);function B(){var e=1!==i.zoom?o*i.zoom:0;e<n[0].clientWidth?l.width(n[0].clientWidth):l.width(e),n.mCustomScrollbar("update")}function A(){c.outerHeight()<=n.height()?n.addClass("mos-lightbox-popup-modal_center"):n.removeClass("mos-lightbox-popup-modal_center")}function Y(e){var t,e=G(i.zoom,e=e||.2);i.zoom!==(e=2<e?2:e)&&(t=(o=o||r.width())*e,c.width(t),t>l.width()&&l.css({"max-width":"none"}),r.height()>=d.height()&&l.css({height:"auto"}),t>l[0].clientWidth&&l.width(t),r.css({width:"100%"}),i.zoom=e,A(),n.mCustomScrollbar("update"))}function W(e){var t,e=G(i.zoom,-(e=e||.2));i.zoom!==(e=e<1?1:e)&&(1!==e?((t=o*e)<n[0].clientWidth?l.width(n[0].clientWidth):l.width(t),c.width(t)):(l.css({"max-width":"",width:n[0].clientWidth,height:n[0].clientHeight}),c.css({width:""}),r.css("width","")),i.zoom=e,A(),n.mCustomScrollbar("update"))}function G(e,t){return e=e||1,Math.round(10*(e+t))/10}function H(e){e=e.originalEvent||e,_=!0,(new Date).getTime();var e=Q(e),t=b.offset();k=e[0]-t.top,S=e[1]-t.left}function V(e){var t,a;_&&((e=e.originalEvent||e).preventDefault(),e.stopImmediatePropagation(),(new Date).getTime(),e=Q(e),t=n.offset(),a=e[0]-t.top,e=e[1]-t.left,touchMoveY.push(a),touchMoveX.push(e),b[0].idleTimer=250,y.overflowed[0]&&0<k-a&&n.mCustomScrollbar("scrollTo",[k-a,null],{scrollEasing:"mcsLinearOut",dur:0,dir:"y",drag:!0,overwrite:"all"}),y.overflowed[1]&&0<S-e&&n.mCustomScrollbar("scrollTo",[null,S-e],{scrollEasing:"mcsLinearOut",dur:0,dir:"x",drag:!0,overwrite:"none",timeout:0}))}function J(){_=!1}function Q(e){return[e.pageY,e.pageX,!1]}z.on("click",function(e){e.stopPropagation(),F()}),z.parent(".mos-lightbox__wrapper").on("click",function(e){e.preventDefault(),F()}),i.zoomIn=Y,i.zoomOut=W;var P="",K=0,X=0,x=1,M=1,T=1,C=parseInt(e.maxScale,10),L=((isNaN(C)||C<=1)&&(C=3),0),D=0,E=0,I=0,O=0,N=0,Z=0,ee=0,j=0,R=0;function te(e){var t=(e.originalEvent||e).touches;t?(Z=t[0].clientX,ee=t[0].clientY,E=L,I=D,R=j=0):e.stopPropagation()}function ae(e){var t=(e.originalEvent||e).touches;t?(""===P&&(1===t.length&&1<x?P="swipe":2===t.length&&(P="pinch",T=x,X=ne(t),O=t[0].clientX-parseInt((t[0].clientX-t[1].clientX)/2,10)-r[0].offsetLeft-E,N=t[0].clientY-parseInt((t[0].clientY-t[1].clientY)/2,10)-r[0].offsetTop-I)),"swipe"===P?(j=t[0].clientX-Z,R=t[0].clientY-ee,L=E+j,D=I+R):"pinch"===P&&2===t.length&&(K=ne(t),L=O*(1-(M=K/X))+E+j,D=N*(1-M)+I+R,(1<(x=M*T)?Y:W)(.1))):e.stopPropagation()}function ie(e){var t=(e.originalEvent||e).touches;e.stopImmediatePropagation(),""===P||!t||0<t.length||(x<1?(x=1,D=L=0):C<x?(L=O*(1-(M=(x=C)/T))+E+j,D=N*(1-M)+I+R):(0<L?L=0:L<U*(1-x)&&(L=U*(1-x)),0<D?D=0:D<q*(1-x)&&(D=q*(1-x))),P="")}function ne(e){e=2===e.length?Math.sqrt(Math.pow(e[0].clientX-e[1].clientX,2)+Math.pow(e[0].clientY-e[1].clientY,2)):0;return parseInt(e,10)}}}}]),angular.module("mosapp.articleEmergency",["mosapp.filters.imageSrc","mosapp.filters.prepareDateSince"]).directive("articleEmergency",["UrlSrvc","apiSrvc","toolsSrvc","$stateParams","$timeout","$state","mosconfig","LangSrvc","emergencyChecker",function(n,r,e,t,s,o,a,l,c){return{restrict:"A",scope:{apiRoot:"@",apiPath:"@"},link:function(i,e){function t(){var a;"off"!=i.flagon&&(i.path=n.currentEmergencyPath(i.flagon),i.currentemergency=i.path,r.getData(i.apiRoot,i.apiPath,{},!0,e).then(function(e){if(c.get()){if(e.items&&e.items[0]&&e.items[0].id==o.params.id)return i.hideMe=!0,i.dubplicate=!0,angular.element(document).find(".subhead .row").css({"border-bottom":"3px solid #000"}),!1;i.hideMe=!1,i.dubplicate=!1,angular.element(document).find(".subhead .row").css({"border-bottom":"none"}),c.set(undefined)}if(!e||!e.items||Array.isArray(e.items)&&0==e.items.length)return!(i.hideMe=!0);if(""===e.items[0].importance)return!(i.hideMe=!0);e=e.items[0];if(!i.doNotHide){if(sessionStorage[e.id])return void(i.hideMe=!0);if((~o.current.name.indexOf("mainnews")||~o.current.name.indexOf("mainconferences"))&&o.params&&o.params.id==e.id)return void(i.hideMe=!0)}function t(e){e&&angular.isObject(e)&&(e._link=n.getLangLink(n.pagePath("news","/item/"+e.id)),i.emergency=e,$("body").addClass("hasEmergencyMessage"))}(!i.doNotHide||!~o.current.name.indexOf("mainnews")&&!~o.current.name.indexOf("mainconferences")||!o.params||o.params.id!=e.id)&&("important"!==e.importance&&"publicity"!==e.importance||~o.current.name.indexOf("mainnews"))?t(e):i.hideMe=!0}),i.markAsRead=function(){sessionStorage[i.emergency.id]=i.emergency.id},i.doNotHide||(a=i.$watch(function(){return i.emergency&&sessionStorage[i.emergency.id]},function(e,t){e&&(s(function(){$("body").removeClass("hasEmergencyMessage"),delete i.emergency}),a())})))}i.extconts=n.getBanners("emergencyBanner",l.getCurrentLang()),i.$on("$stateChangeSuccess",function(){c.get()||"mainnews"!=o.current.name||i.blockedQueries||c.set(!0)}),i.$watch(function(){return c.get()},function(e){e&&setTimeout(function(){t()},200)}),i.flagon=n.currentEmergency("current"),i.doNotHide=a.emergency.doNotHide||!1,setTimeout(function(){"mainnews.news"==o.current.name&&t()},200),_WINDOW.on("resize",function(e){setTimeout(function(){},100)})},templateUrl:n.tmplPath("articleEmergency_v2/articleEmergency_v2.tpl.html")}}]).factory("emergencyChecker",function(){var t;return{get:function(){return t},set:function(e){t=e}}}),angular.module("mosapp.copyright",[]).directive("mosCopyright",["UrlSrvc",function(e){return{restrict:"A",link:function(e,t,a,i){},scope:{title:"=",copyright:"="},templateUrl:e.tmplPath("mosCopyright/mosCopyright.tpl.html")}}]),angular.module("mosapp").service("APsrvc",["UrlSrvc","$q","$rootScope","$window",function(r,e,s,o){var l={default:"audioPlayer",v4:"audioPlayer_v4"};this.playerLoad=function(n){return e(function(e,t){var a,i=n.skin&&l[n.skin]||l.default;s.audioPlayer?"ready"!==s.audioPlayer.status?(a=document.getElementById("jplayerapiscript"),$(a).on("load",function(){e()})):e():(s.audioPlayer={},s.audioPlayer.status="load",(a=document.createElement("script")).id="jplayerapiscript",a.async="true",document.getElementsByTagName("head")[0].appendChild(a),a.src=r.jsPath("jplayer/jquery.jplayer.min.js"),$(a).on("load",function(){s.audioPlayer.api=o.jPlayer,s.audioPlayer.status="ready",e()}),n.nocss||((a=document.createElement("link")).rel="stylesheet",a.href=r.jsPath("jplayer/skin/"+i+".css"),a.type="text/css",document.getElementsByTagName("head")[0].appendChild(a)))})}}]),angular.module("mosapp").value("apiQueue",[]).value("lastReq",!1).service("apiSrvc",["UrlSrvc","$http","$q","transformRequestAsFormPost","apiQueue","$timeout","loader","lastReq","LangSrvc",function(m,o,t,l,p,c,u,d,n){function g(){d&&(d=!1,c(function(){"function"==typeof window.callPhantom&&window.callPhantom({queue:"isempty"})},100))}o.defaults.headers.common["x-caller-id"]="markup-app",this.sendRequestFromQueue=function e(){var a,i,n,t,r,s=Math.floor(50*Math.random()+25);0<p.length&&(a={},angular.forEach(p[0],function(e,t){a[t]=p[0][t]}),"POST"===a.method?(t=(n=a).header,r=n.notTransform,t={url:n.url,method:"POST",data:n.params,headers:t},r||(t.transformRequest=l),o(t).success(function(e,t){var a;n.showError&&e.error&&(a={title:"Ошибка получения данных из API.",content:e.description,placement:"top",type:"warning",show:!0},e.errorMessage=a),u.switchOff(n.loaderEl),g(),n.resolve(e)}).error(function(e,t){u.switchOff(n.loaderEl),g(),n.reject({content:e,code:t})})):o({url:(i=a).url,method:"GET",params:i.params}).success(function(e,t){var a;i.showError&&e.error&&(a={title:"Ошибка получения данных из API.",content:e.description,placement:"top",type:"warning",show:!0},e.errorMessage=a),i.loaderEl&&!i.loaderEl.dontSwitchOff&&u.switchOff(i.loaderEl),g(),i.resolve(e,t)}).error(function(e,t){u.switchOff(i.loaderEl),g(),i.reject({content:e,code:t})}),p.shift(),0===p.length&&(d=!0)),c(e,s)};new Date;function h(e,t,a,i){return console.error("Object '"+e+"' not found! Check config, please."),u.switchOff(i),("function"==typeof a?a:t)({error:"Object '"+e+"' not found! Check config, please."}),!1}function f(a,e){var i=[];angular.forEach(e,function(e,t){-1<a.indexOf("%"+t+"%")&&(a=a.replace("%"+t+"%",e),i.indexOf(t)<0&&i.push(t))});for(var t=0;t<i.length;t++)delete e[i[t]];return a=-1<a.indexOf("[lang]")?a.replace("[lang]",n.getCurrentLang()):a}this.sendRequestFromQueue(),this.getData=function(n,r,s,o,l){return t(function(e,t){u.switchOn(l);var a=angular.copy(s),i=m.apiPath(n);if(!angular.isObject(i))return h(n,e,t,l);if(!(i=i[r]))return h(n+"."+r,e,t,l);angular.isObject(a);i=f(i,a);p.push({method:"GET",url:i,resolve:e,reject:t,params:a,showError:o,loaderEl:l})})},this.getDataByUrl=function(i,n,r,s){return t(function(e,t){u.switchOn(s);var a=angular.copy(n);if(!i)return h(i,e,t,s);angular.isObject(a);e={method:"GET",url:i=f(i,a),resolve:e,reject:t,params:a,showError:r,loaderEl:s};p.push(e)})},this.getDataCancelable=function(n,r,s,o,l){var c,e=t(function(e,t){u.switchOn(l);var a=angular.copy(s),i=m.apiPath(n);return angular.isObject(i)?(i=i[r])?(angular.isObject(a),i=f(i,a),c={method:"GET",url:i,resolve:e,reject:t,params:a,showError:o,loaderEl:l},void p.push(c)):h(n+"."+r,e,t,l):h(n,e,t,l)});return e.cancel=function(){c.resolve({state:"cancelled"})},e},this.postData=function(n,r,s,o,l,c,d){return t(function(e,t){u.switchOn(l);var a=angular.copy(s),i=m.apiPath(n);if(!angular.isObject(i))return h(n,e,t,l);if(!(i=i[r]))return h(n+"."+r,e,t,l);i=f(i,a);p.push({method:"POST",url:i,resolve:e,reject:t,params:a,showError:o,loaderEl:l,header:c,notTransform:d})})}}]).factory("transformRequestAsFormPost",function(){return function(e,t){t()["Content-Type"]="application/x-www-form-urlencoded; charset=utf-8";var a,i=e;if(!angular.isObject(i))return null===i?"":i.toString();var n,r=[];for(n in i)i.hasOwnProperty(n)&&(a=i[n],r.push(encodeURIComponent(n)+"="+encodeURIComponent(null===a?"":a)));return r.join("&").replace(/%20/g,"+")}}).service("loader",["toolsSrvc",function(a){var i=50,n=.7;function r(e,t){"plainDots"===t.loaderType?(e.addClass("rel"),t.animate&&e.css({height:i+"px",overflow:"hidden"}),e.prepend('<div class="dots-loader-backdrop"></div><div class="dots-loader"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>')):(t="contrast"==a.colorScheme()?"grayscale":"",e.addClass("rel"),e.prepend('<div class="loader"><div class=" '+t+' loader-image"><div class="cssload-progress cssload-float cssload-shadow"><div class="cssload-progress-item"></div></div></div></div>'))}function s(e,t){var a;"plainDots"===t.loaderType?t.animate?(a=e,TweenLite.set(a,{height:""}),TweenLite.from(a,n,{height:i+"px",ease:Power2.easeIn,onComplete:function(){TweenLite.set(a,{height:"",overflow:""}),a.removeClass("rel"),a.find(".dots-loader-backdrop,.dots-loader").remove()}})):(e.removeClass("rel"),e.find(".dots-loader-backdrop,.dots-loader").remove()):(e.removeClass("rel"),e.find(".loader").remove())}function t(e){return e instanceof angular.element||("object"==typeof HTMLElement||"function"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof o&&null!==e&&1===o.nodeType&&"string"==typeof e.nodeName)}this.switchOn=function(a){var e;a&&(t(a)?(e=angular.element(a)).length&&r(e,a):a.hasOwnProperty("elems")&&(a.elems.hasOwnProperty("length")?a.elems.length&&angular.forEach(a.elems,function(e,t){r(angular.element(e),a),a.elems.length===t&&"function"==typeof a.onSwitchOn&&a.onSwitchOn()}):(r(e=angular.element(a.elems),a),"function"==typeof a.onSwitchOn&&a.onSwitchOn())))},this.switchOff=function(a){var e;a&&(t(a)?(e=angular.element(a)).length&&s(e,a):a.hasOwnProperty("elems")&&(a.elems.hasOwnProperty("length")?a.elems.length&&angular.forEach(a.elems,function(e,t){s(angular.element(e),a),a.elems.length===t&&"function"==typeof a.onSwitchOn&&a.onSwitchOn()}):(s(e=angular.element(a.elems),a),"function"==typeof a.onSwitchOff&&a.onSwitchOff()),"function"==typeof a.onSwitchOff&&a.onSwitchOff()))}}]).service("apiCache",["$q","apiSrvc",function(s,o){var l={};this.getData=function(e,t,a,i,n){var r=e+t+JSON.stringify(a);if(l[r])return s.when(l[r]);return o.getData(e,t,a,i,n).then(function(e){return l[r]=e})}}]),angular.module("mosapp.customisation",[]).service("CustomisationSrvc",[function(){var n={};return{add:function(e,t,a,i){return!n[e]&&(n[e]={name:e,fromWhere:t,options:a,callback:i},n.name)},get:function(e){return n[e]},delete:function(e){return delete n[e]},rewrite:function(e,t,a,i){return n[e]={name:e,fromWhere:t,options:a,callback:i},n[e]}}}]),angular.module("mosapp").service("districtsSrvc",["apiSrvc","$q","UrlSrvc","LangSrvc",function(e,t,a,r){var s=this,i={};function o(e){(e=e||{}).category=e.category||"";var t=(t=a.getLangLink(a.pagePath("search",""))).replace(new RegExp("/$","g"),"");return t=(t+="?category="+e.category)+("&hostApplied=false&page=1&skip_stat=2&q="+(e.query||"")),e.districts&&(t+="&districts="+e.districts),e.areas&&(t+="&areas="+e.areas),t}this.getDistricts=function(){return i.districtsMap?t.when(i.districtsMap):e.getData("newsfeed","directories",{expand:"areas"},!1).then(function(e){var a;return e.items&&e.items.length&&(a={},e.items.forEach(function(e){var t={};e.areas.forEach(function(e){t[e.id]=e}),e.areas=t,a[e.id]=e}),i.districtsMap=a),i.districtsMap},function(){return null})},this.extractDistrictsAndAreasFromMap=function(a,e,i){var n=[],r=[];return angular.forEach(e,function(e){var t=angular.copy(a[e.id]);t&&(t.url=o({districts:t.id,category:i.category,query:i.query}),n.push(t),e.area_ids&&e.area_ids.length&&angular.forEach(e.area_ids,function(e){e=t.areas[e];e&&(e.url=o({districts:t.id,areas:e.id,category:i.category,query:i.query}),r.push(e))}))}),{districts:n,areas:r}},this.handleDistricts=function(t,a,i){i=i||{};var n="ru"===r.getCurrentLang()?"title":"title_en";t&&t.length&&s.getDistricts().then(function(e){e&&(a.districts=[],a.areas=[],a.maxExtra=i.maxExtra||2,e=s.extractDistrictsAndAreasFromMap(e,t,{category:i.category}),a.districts=e.districts.map(function(e){return e.title=e[n],e}),a.areas=e.areas.map(function(e){return e.title=e[n],e}),a.districts.length>a.maxExtra?a.districtsMax=a.maxExtra:a.districtsMax=a.districts.length,a.areas.length>a.maxExtra?a.areasMax=a.maxExtra:a.areasMax=a.areas.length,a.moreClicked=function(e,t){t.widthLT768||(a[e+"Max"]=a[e].length)},a.moreReset=function(e){a[e+"Max"]=a.maxExtra})})}}]),angular.module("mosapp").service("GIS2srvc",["UrlSrvc","$q","$rootScope","$window","mosconfig","$timeout",function(e,a,t,i,n,r){var s={},o="no";this.add=function(e,t){s[e]=t},this.get=function(e){return s[e]},this.loadLibrary=function(){var e,t=a.defer();return"no"!==o?r(function e(){"yes"===o?t.resolve():"loading"===o&&r(e,100)},100):(o="loading",(e=document.createElement("script")).id="GisApi",e.async="true",document.getElementsByTagName("head")[0].appendChild(e),e.src=n["2GisApi"].url,$(e).on("load",function(){window.DG===undefined?(o="no",t.reject("API not found")):(o="yes",t.resolve())})),t.promise}}]),angular.module("mosapp").service("headmetaSrvc",["mosconfig","$timeout","LangSrvc","UrlSrvc","toolsSrvc",function(o,e,l,c,d){var m=this;this.expandWithSiteName=!0,this.reSetMetaTag=function(e,t,a){var i=document.querySelector("head"),n=i.querySelector("meta["+e+'="'+t+'"]');a?(n||(n=document.createElement("meta"),i.appendChild(n)),n.setAttribute(e,t),n.setAttribute("content",a)):n&&n.parentNode.removeChild(n)},this.removeMetaTag=function(e){var t=document.querySelector("head"),a=t.querySelector('meta[property="'+e+'"]');(a=a||t.querySelector('meta[name="'+e+'"]'))&&a.parentNode.removeChild(a)},this.setTitle=function(){for(var e=document.querySelector("head"),t=e.querySelector("title"),a=l.getCurrentLang(),i=o.titleParams||{},n=i.separator||" / ",i=i.siteName[a]||"Сайт Москвы",r=[],s=0;s<arguments.length;s++)r.push(d.htmlToPlaintext(arguments[s]));a=Array.prototype.slice.call(r,0);return a.push(i),t||(t=document.createElement("title"),e.appendChild(t)),t.innerHTML=a.join(n),this},this.setDescription=function(e){if(!e||""==e)return this;e=this.expandWithSiteName?this.expandDataWithSiteName(e):e;return m.reSetMetaTag("name","description",e),this},this.expandDataWithSiteName=function(e){var t=l.getCurrentLang(),t=(o.altParams||{})[t]||"Официальный сайт Мэра Москвы",a=" ";return e+(a="."!==e[e.length-1]?". ":a)+t},this.setKeywords=function(e){e&&""!=e&&m.reSetMetaTag("name","keywords",e)},this.addAmpHtml=function(e){var t=document.querySelector("head"),a=t.querySelector('link[rel="amphtml"]');a&&a.parentNode.removeChild(a),(e.match(/^\/mayor\/telegrams\/[\d]+\/$/)||e.match(/^\/mayor\/interviews\/[\d]+\/$/)||e.match(/^\/mayor\/transcripts\/[\d]+\/$/)||e.match(/^\/mayor\/media\/photo\/[\d]+\//)||e.match(/^\/mayor\/media\/video\/[\d]+\/$/))&&(a=document.createElement("link"),t.appendChild(a),a.setAttribute("rel","amphtml"),a.setAttribute("href","/amp"+e))},this.setPageMeta=function(e,t){if(!e[t])return this;var a,i=c.getMainDomain()||"",n=l.getCurrentLang(),r=(o.altParams||{})[n]||"Официальный сайт Мэра Москвы",s=angular.isObject(e[t].image)&&e[t].image.src?angular.copy(e[t].image):{src:(o.imagesPath||"")+"favicon/icon200x200.png",width:200,height:200,title:r};return s.src=0===s.src.indexOf("http")?s.src:i+"/"+s.src.replace(new RegExp("^/"),""),m.removeMetaTag("og:image"),m.removeMetaTag("og:image:width"),m.removeMetaTag("og:image:height"),m.removeMetaTag("og:image:alt"),"/mayor/themes/"!==window.location.pathname&&"/mayor/biography/"!==window.location.pathname&&0!==window.location.pathname.indexOf("/mayor/transcripts/")&&0!==window.location.pathname.indexOf("/mayor/telegrams/")&&0!==window.location.pathname.indexOf("/mayor/interviews/")&&0!==window.location.pathname.indexOf("/mayor/media/")&&!window.location.pathname.match("^/mayor/themes/[\\d]+/$")||(s.src="https://"+window.location.hostname+"/open-graph/v1/frontend"+window.location.pathname,s.width="1200",s.height="630"),m.reSetMetaTag("property","og:image",s.src),m.reSetMetaTag("property","og:image:url",s.src),m.reSetMetaTag("property","og:image:width",s.width),m.reSetMetaTag("property","og:image:height",s.height),m.reSetMetaTag("property","og:image:alt",s.fullTitle||s.title),m.addAmpHtml(location.pathname),m.reSetMetaTag("property","og:url",i+"/"+location.pathname.replace(new RegExp("^/"),"")),m.reSetMetaTag("property","og:site_name",r),t&&e[t]&&(a=d.htmlToPlaintext(e[t].description),setTimeout(function(){m.reSetMetaTag("property","og:title",d.htmlToPlaintext(e[t].title)),m.reSetMetaTag("property","og:description",a)}),m.setDescription(a),m.setKeywords(e[t].keywords),"article"===e[t].type?(m.reSetMetaTag("property","og:type",e[t].type),m.reSetMetaTag("property","article:publisher",o.linksPath.social[n].facebook),m.reSetMetaTag("property","article:author",o.linksPath.social[n].facebook),isNaN(+e[t].published_time)?m.removeMetaTag("article:published_time"):m.reSetMetaTag("property","article:published_time",moment.unix(+e[t].published_time).utcOffset(3).format()),m.reSetMetaTag("name","twitter:site_name",o.domain.replace("www.","")),m.reSetMetaTag("name","twitter:creator",o.linksPath.social[n].twitter_creator)):(m.removeMetaTag("article:publisher"),m.removeMetaTag("article:author"),m.removeMetaTag("article:published_time"),m.removeMetaTag("twitter:site_name"),m.removeMetaTag("twitter:creator"),m.reSetMetaTag("property","og:type",e[t].type||"website"))),this},this.extractMeta=function(){return{title:document.title,description:d.htmlToPlaintext(this.getContentFor("description")),keywords:this.getContentFor("keywords")}},this.getContentFor=function(e){e=document.querySelector('meta[name="'+e+'"]');return null!==e?e.getAttribute("content"):""},this.withoutSiteName=function(){return this.expandWithSiteName=!1,this},this.withSiteName=function(){return this.expandWithSiteName=!0,this}}]),angular.module("mosapp").service("libsLoader",["UrlSrvc","$q","$window",function(r,t,s){var a={};this.get=function(i){var n,e;return void 0===a[i.id]&&(n={},i.js&&(n.js=t(function(e,t){var a;n.status="load",i.js&&((a=document.createElement("script")).id=i.id,a.async="true"),document.getElementsByTagName("head")[0].appendChild(a),a.src=r.jsPath(i.js),$(a).on("load",function(){i.api&&(n.api=s[i.api]),n.status="ready",e(n)})})),a[i.id]=n,i.css&&((e=document.createElement("link")).rel="stylesheet",e.href=r.jsPath(i.css),e.type="text/css",document.getElementsByTagName("head")[0].appendChild(e))),a[i.id]}}]),angular.module("mosapp").config(["mosconfig","$translateProvider","$translatePartialLoaderProvider","LangSrvcProvider",function(e,t,a,i){t.usePostCompiling(!0),t.useSanitizeValueStrategy("escape"),t.useLoader("$translatePartialLoader",{urlTemplate:e.i18nPath+"{part}/{lang}.json?1677769505234"}),t.preferredLanguage(i.setCurrentLang())}]),angular.module("mosapp").service("opengraphSrvc",["mosconfig","$timeout","LangSrvc","UrlSrvc","toolsSrvc","headmetaSrvc","$location",function(e,t,a,i,n,r,s){this.invalidateWithGlobalMeta=function(){var e=r.extractMeta();return t(function(){r.reSetMetaTag("property","og:title",e.title),r.reSetMetaTag("property","og:description",e.description)}),this},this.passUrl=function(){return r.reSetMetaTag("property","og:url",s.absUrl().replace(new RegExp("all/$"),"")),this}}]),angular.module("mosapp").service("tColumn",["UrlSrvc","$q","$rootScope","$window",function(i,t,n,r){this.columnizerLoad=function(e){return t(function(e,t){var a;n.textColumnizer?"ready"!==n.textColumnizer.status?(a=document.getElementById("columnizerapiscript"),$(a).on("load",function(){e()})):e():(n.textColumnizer={},n.textColumnizer.status="load",(a=document.createElement("script")).id="columnizerapiscript",a.async="true",document.getElementsByTagName("head")[0].appendChild(a),a.src=i.jsPath("columnizer/jquery.columnizer.js"),$(a).on("load",function(){n.textColumnizer.api=r.columnizer,n.textColumnizer.status="ready",e()}))})}}]),angular.module("mosapp").service("tmplSrvc",TmplService),angular.module("mosapp").service("toolsSrvc",["mosconfig","$timeout","LangSrvc","UrlSrvc","$filter",function(mosconfig,$timeout,LangSrvc,UrlSrvc,$filter){var errorInfo,self=this;this.ruStrToDate=function(e){var t,a=!1;return(a=angular.isString(e)&&2<(t=e.split(".")).length?new Date(t[2],t[1]-1,t[0]):a)||e},this.getMaxDate=function(e){return Math.max.apply(null,e)},this.sanitize=function(e){return e.replace(/\u200B/g,"")},this.getSiteLogo=function(){return mosconfig.siteLogo||null},this.fillOutPages=function(e,t){for(var a=[],i=1;i<t+1;i++)a.push({num:i});return a},this.scrollTop=function(e){TweenLite.to(window,e||.75,{scrollTo:{y:0},ease:Power2.easeOut,onComplete:function(){}})},this.colorScheme=function(){return"true"===localStorage.getItem("contrast")?"contrast":"default"},this.htmlToPlaintext=function(e){return(e=e?String(e).replace(/\&\w{4,5};/gm," "):"")?String(e).replace(/<[^>]+>/gm,""):""},this.getMetaForImage=function(e){var t=LangSrvc.getCurrentLang();return{alt:e+". "+mosconfig.altParams[t],title:e}},this.removeMetaTag=function(e){var t=document.querySelector("head"),a=t.querySelector('meta[property="'+e+'"]');(a=a||t.querySelector('meta[name="'+e+'"]'))&&a.parentNode.removeChild(a)},this.setMeta=function(e,t,a){var i=UrlSrvc.getMainDomain(),e=e.image&&""!==e.image&&e.image.indexOf("data:image",0)<0?e.image:(mosconfig.imagesPath||"")+"favicon/icon200x200.png",n=(e=0===e.indexOf("http")?e:i+"/"+e.replace(new RegExp("^/"),""),LangSrvc.getCurrentLang()),n=(mosconfig.altParams||{})[n]||"Официальный сайт Мэра Москвы";0===window.location.pathname.indexOf("/news/maintheme/")||"/city/projects/"===window.location.pathname||"/city/about/plan/"===window.location.pathname||"/authority/documents/"===window.location.pathname||0===window.location.pathname.indexOf("/authority/documents/doc/")||0===window.location.pathname.indexOf("/authority/projects/active/")||0===window.location.pathname.indexOf("/authority/projects/archive/")||0===window.location.pathname.indexOf("/authority/projects/doc/")||"/authority/discussion/"===window.location.pathname||0===window.location.pathname.indexOf("/authority/discussion/doc/")||0===window.location.pathname.indexOf("/city/about/symbols/")||0===window.location.pathname.indexOf("/city/about/honors/")?(e="https://"+window.location.hostname+"/open-graph/v1/frontend"+window.location.pathname,$('meta[property="og:image:width"]').attr("content",1200),$('meta[property="og:image:height"]').attr("content",630)):(self.removeMetaTag("og:image:width"),self.removeMetaTag("og:image:height")),$('meta[property="og:url"]').attr("content",i+"/"+location.pathname.replace(new RegExp("^/"),"")),$('meta[property="og:type"]').attr("content","website"),$('meta[property="og:site_name"]').attr("content",n),a&&t[a]&&(i=this.htmlToPlaintext(t[a].description),$('meta[property="og:title"]').attr("content",this.htmlToPlaintext(t[a].title)),$('meta[property="og:description"]').attr("content",i),self.setDescription(i)),$('meta[property="og:image"]').attr("content",e),$('meta[property="og:image:url"]').attr("content",e),self.removeMetaTag("article:publisher"),self.removeMetaTag("article:author"),self.removeMetaTag("article:published_time"),self.removeMetaTag("og:image:alt")},this.setTitle=function(){for(var e=LangSrvc.getCurrentLang(),t=mosconfig.titleParams||{},a=t.separator||" / ",t=t.siteName[e]||"Сайт Москвы",i=[],n=0;n<arguments.length;n++)i.push(this.htmlToPlaintext(arguments[n]));e=Array.prototype.slice.call(i,0);e.push(t),$("title").text(e.join(a))},this.setTitleClean=function(){for(var e=(mosconfig.titleParams||{}).separator||" / ",t=[],a=0;a<arguments.length;a++)t.push(this.htmlToPlaintext(arguments[a]));var i=Array.prototype.slice.call(t,0);$("title").text(i.join(e))},this.setDescription=function(e){var t,a=LangSrvc.getCurrentLang();e&&""!=e&&(a=(mosconfig.altParams||{})[a]||"Официальный сайт Мэра Москвы",t=" ","."!==e[e.length-1]&&(t=". "),self._setMeta("description",e+t+a))},this.setRawDescription=function(e){self._setMeta("description",e)},this.setRawTitle=function(e){$("title").text(e)},this.setKeywords=function(e){e&&""!=e&&self._setMeta("keywords",e)},this.setVerification=function(){self._setMeta("baidu-site-verification","Jauog7E16g")},this._setMeta=function(e,t){var a;e&&0!=e.length&&(0<(a=$("meta[name="+e+"]")).length?a.attr("content",t):((a=document.createElement("meta")).name=e,a.content=t,document.getElementsByTagName("head")[0].appendChild(a)))},this.togglerBlackAndWhite=function(e,t,a){a instanceof $||"string"!=typeof a?a instanceof $&&void 0!==a||(a=$(document.body)):a=$(a),"contrast"===t?(a.find(e).addClass("grayscale"),a.find(".grayscale-img").addClass("grayscale"),a.find(".grayscale").gray()):(a.find(".grayscale").toggleClass("grayscale-off"),a.find(e).removeClass("grayscale"),a.find(".grayscale-img").removeClass("grayscale"))},this.prepareTags=function(e){var t=[];return angular.isString(e)?e:angular.isArray(e)?(e.forEach(function(e){t.push(e.title)}),t.join(", ")):void 0},this.setErrorInfo=function(e){errorInfo=e},this.getErrorInfo=function(){return errorInfo},this.statCounter=function statCounter(params){var maxAttempts=20;function trySendMetrika(COUNTER_ID,TARGET_NAME,GOAL_PARAMS,cnt){var js="yaCounter"+COUNTER_ID+".reachGoal('"+TARGET_NAME+"');",params;try{GOAL_PARAMS?(params="yaCounter"+COUNTER_ID+".params("+(angular.isObject(GOAL_PARAMS)?JSON.stringify(GOAL_PARAMS):GOAL_PARAMS)+");",eval(params)):eval(js)}catch(e){cnt++,cnt<maxAttempts&&$timeout(function(){trySendMetrika(COUNTER_ID,TARGET_NAME,GOAL_PARAMS,cnt)},500)}}if(angular.isObject(params)&&angular.isObject(params.metrika)&&params.metrika.TARGET_NAME){var COUNTER_ID,TARGET_NAME=angular.isObject(params.metrika)&&params.metrika.TARGET_NAME?params.metrika.TARGET_NAME:null,GOAL_PARAMS=angular.isObject(params.params)?params.params:null;try{COUNTER_ID=mosconfig.stat.metrika.id}catch(e){}COUNTER_ID&&TARGET_NAME&&trySendMetrika(COUNTER_ID,TARGET_NAME,GOAL_PARAMS,0)}},this.localeNum=function(e,t){if("number"!=typeof(e=+e))return"";if((!t||t.length<1)&&(t=new Array("")),0<(e=e.toString()).indexOf(".")||0<e.indexOf(","))return t[1];var a=e.length,i=new Number(a<2?0:e.substr(a-2,1)),e=new Number(e.substr(a-1,1));return 1!=i?1<e&&e<5?t[1]:4<e&&e<=9||0==e?t[2]:1==e?t[0]:void 0:t[2]},this.hideContentArea=function(e){e.css("opacity",0)},this.showContentArea=function(e){e&&e.length&&TweenLite.to(e,.5,{opacity:1,ease:Power1.easeIn,onComplete:function(){e.css("opacity","")}})},this.transformDateToMos=function(e){var t=e.getTimezoneOffset()/60;return e=-3!=t?new Date(e.getTime()+3600*t*1e3+108e5):e},this.handleAlternateTags=function(i,e,t){for(var a=document.querySelectorAll('link[rel="alternate"]'),n=function(e){var t,a=[];for(t in e)a.push({lang:t,href:e[t].href,fromState:e[t].fromState});return a}(i.current.alternateLinks),r=0;r<a.length;r++){var s=a[r].attributes.href.nodeValue,o=a[r].attributes.hreflang.nodeValue;(n=n||[]).push({lang:o,href:s,fromState:!1})}n&&n.length&&n.forEach(function(a){(function(e,t){"zn"===e&&(e="cn");return UrlSrvc.getMainDomain()+("ru"===e?"":"/"+e)+("ru"===LangSrvc.getCurrentLang()?t:t.slice(3))})(a.lang,i.href(e)).replace(/^https/,"http")!==a.href.replace(/^https/,"http")?(t.forEach(function(e){var t=i.href(e),t=new RegExp(("ru"===LangSrvc.getCurrentLang()?t:t.slice(3))+"$","i"),e=i.get(e);t.test(a.href)&&(e.alternateLinks||(e.alternateLinks={}),e.alternateLinks[a.lang]||(e.alternateLinks[a.lang]={}),e.alternateLinks[a.lang].href=a.href,e.alternateLinks[a.lang].fromState=!0)}),document.querySelector('link[rel="alternate"][hreflang="'+a.lang+'"][href="'+a.href+'"]').remove()):a.fromState&&angular.element("head").append('<link rel="alternate" hreflang="'+a.lang+'" href="'+a.href+'">')})},this.joinProperty=function(e,t,a){var i="";return t&&e?e.map(function(e){return e[t]}).join(a):i},this.statsMosCounter=function(e){if(angular.isObject(e)){e={eventType:e.type,eventSrc:"mos.ru",eventDst:"stats",eventTime:parseInt((new Date).getTime()/1e3,10),mosId:getCookie("mos_id"),eventObject:e.params},e=JSON.stringify(e);try{fetch("https://stats.mos.ru/eds.gif?o="+e,{credentials:"include"})}catch(e){}}},this.dateRange=function(e,t){var a="d MMMM",i="d MMMM yyyy",n=(e=!!e&&new Date(e),t=!!t&&new Date(t),new Date),r=n.getTimezoneOffset()/60;if(-3!=r&&(n=new Date(n.getTime()+3600*r*1e3+108e5)),!e&&!t)return"";if(!e||!t)return s=(r=e||t).getFullYear()===n.getFullYear(),$filter("date")(r,s?a:i);var s,r=(s=e.getFullYear()===n.getFullYear())?a:i;return e.getFullYear()===t.getFullYear()?e.getMonth()===t.getMonth()?e.getDate()===t.getDate()?$filter("date")(e,r):e.getDate()+" – "+$filter("date")(t,r):$filter("date")(e,a)+" – "+$filter("date")(t,r):$filter("date")(e,i)+" – "+$filter("date")(t,i)},this.formatHoursMinutes=function(e){var e=self.transformDateToMos(new Date(1e3*e)),t=((t=e.getHours())<10?"0":"")+t,e=e.getMinutes();return t+":"+((e<10?"0":"")+e)}}]),angular.module("mosapp").service("UrlSrvc",["mosconfig","LangSrvc","$rootScope",function(r,a,e){function i(e){var t,a;if(!(e.length<=1))return t=e.split("/"),t=t[t.length-1].split("?"),a="/"!=e[e.length-1],a&&1===t.length?e+"/":a&&1!=t.length&&""!=t[0]?e.replace("?","/?"):e}function n(e){var e=i(e),t=a.getCurrentLang();return"ru"==t?e:"/"+t+e}function s(e,t){t=t((e=e||1)+1);return t?n(t):""}function o(e,t){t=t((e=e||1)-1);return t?n(t):""}function l(e,t,a){var i,n;e&&t&&(n=!1,(i=a?document.getElementById(a):i)||(i=document.createElement("link"),n=!0),i.id=a,i.rel=e,i.href=function(){var e="";r.domain&&(e=(e=(0===r.domain.indexOf("http")?"":location.protocol+"//")+r.domain).replace(new RegExp("/$"),""));return e}()+t,n&&document.getElementsByTagName("head")[0].appendChild(i))}function c(e){e=document.getElementById(e);e&&"LINK"===e.tagName&&document.getElementsByTagName("head")[0].removeChild(e)}e.$on("$stateChangeSuccess",function(){try{setTimeout(window.$mos_layouts.api.setActive,0)}catch(e){}}),this.getMainDomain=function(){var e="";return e=r.domain?(e=(0===r.domain.indexOf("http")?"":location.protocol+"//")+r.domain).replace(new RegExp("/$"),""):e},this.getLangLink=n,this.getLangLinkPrefix=function(){var e=a.getCurrentLang();return"ru"==e?"":"/"+e},this.getLangPath=function(e,t){return this.getLangLink(this.pagePath(e,t))},this.tmplPath=function(e){return e},this.apiPath=function(e,t){return r.restAPI[e]},this.jsPath=function(e){return((r.jsPath||"")+e).replace(new RegExp("//","g"),"/")},this.cssPath=function(e){return((r.cssPath||"")+e).replace(new RegExp("//","g"),"/")},this.pagePath=function(e,t){return i((r.pagePath[e]||"")+t).replace(new RegExp("//","g"),"/")},this.linksPath=function(e){return r.linksPath[e]},this.specialType=function(e){return r.specialType[e]||""},this.currentEmergency=function(e){if(e||r.emergency)return r.emergency[e]||""},this.currentEmergencyPath=function(e){if(e||r.emergency||r.emergency.path)return r.emergency.path[e]||""},this.getBanners=function(e,t){if(e&&r.banners&&r.banners[e])return t=t||a.getCurrentLang(),{domain:r.banners.domain,urlPath:r.banners.urlPath,items:r.banners[e][t]}},this.isExternalUrl=function(e){return!/(^((http(s)?:\/\/)?(www.)?|\/\/)?mos.ru)|^\/{1}([^\/]+|$)/gi.test(e)},this.addParamsToUrl=function(e,t){if(!t)return e;var a=(n=e.split("#"))[1]?"#"+n[1]:"",i=[],n=n[0].split("?");return angular.forEach(t,function(e,t){i.push(t+"="+e)}),1===n.length?e=n[0]+"?"+i.join("&"):2===n.length&&(e=n[0]+"?"+n[1]+"&"+i.join("&")),e+a},this.setCanonical=function(e){var t,a="";r.domain&&(a=(a=(0===r.domain.indexOf("http")?"":location.protocol+"//")+r.domain).replace(new RegExp("/$"),"")),e&&((t=document.createElement("link")).id="canonicalLink",t.rel="canonical",t.href=a+e,document.getElementsByTagName("head")[0].appendChild(t))},this.setPrevNextLinks=function(e,t,a,i){var n=s(e,a),e=o(e,a);t&&n?l("next",n,"link-rel-next"):c("link-rel-next"),e?l("prev",e,"link-rel-prev"):c("link-rel-prev")},this.getNextPageUrl=s,this.getPrevPageUrl=o,this.appendLink=l}]),angular.module("mosapp").filter("imagesPath",["mosconfig",function(t){return function(e){return((t.imagesPath||"")+e).replace(new RegExp("//","g"),"/")}}]),angular.module("mosapp").run(["$state","$stateParams","$window",function(e,t,a){function i(){if(angular.isObject(e))try{e.transitionTo(e.current,t,{reload:!0,inherit:!1,notify:!0})}catch(e){return window.location=window.location.href,!1}else window.location=window.location.href}a.addEventListener?a.addEventListener("contrastTrigger",i):a.attachEvent("oncontrastTrigger",function(){i.call(a)})}]),angular.module("mosapp").provider("LangSrvc",function(){var e=!1;this.setCurrentLang=function(){return e=e||((e=document.documentElement.lang)||"ru")},this.$get=function(){return{getCurrentLang:function(){return e}}}}).service("linksInterceptor",[function(){var a,s=0,o=new Object(null),l=(o[++s]={regExp:[/\/pgu\./],attr:"href",callback:function(e,t){"object"==typeof _paq&&"function"==typeof _paq.push&&(e.preventDefault(),e=$(t).attr("href"),_paq.push(["trackLink",e,"link"]),(t=window.open(e,"_blank"))&&t.focus())},id:s},o[++s]={regExp:[/\/pgu\//],attr:"href",callback:function(e,t){"object"==typeof window._paq&&"function"==typeof window._paq.push&&(t=$(t).attr("href"),_paq.push(["trackLink",t,"link"]))},id:s},{openInNewTab:function(e,t){e.preventDefault();e=$(t).attr("href"),t=window.open(e,"_blank");t&&t.focus()}});function c(e){return"function"==typeof e.exec}return function e(){var t=$("div.b-content");a&&$timeout.cancel(a),t.length?t.on("click","a",function(n){var r=$(this);Object.keys(o).forEach(function(e){var t=o[e],a=r.attr(t.attr);if(a&&""!==a)for(var i=0;i<t.regExp.length;i++)if(null!==t.regExp[i].exec(a)){t.callback(n,r,t.cbParams);break}})}):a=$timeout(e,100)}(),{add:function(e,t,a,i){var n,r=new Object(null);if(Array.isArray(e)?(n=[],e.forEach(function(e){c(e)&&n.push(e)}),r.regExp=n):c(e)&&(r.regExp=[e]),r.attr="string"==typeof a?a:"href","function"==typeof t)r.callback=t;else if("string"==typeof t){if("function"!=typeof l[t])return!1;r.callback=l[t]}return r.cbParams="object"==typeof i?i:new Object(null),r.id=++s,o[s]=r},remove:function(e){return!!o[e]&&(delete o[e],!0)},check:function(e){return!!o[e]}}}]),angular.module("mosapp").service("VPsrvc",["UrlSrvc","$q","$rootScope","$window","$timeout",function(s,e,o,l,c){this.playerLoad=function(i){return e(function(e,t){var a;o.videoPlayer?"ready"!==o.videoPlayer.status?(a=document.getElementById("flowplayerapiscript"),$(a).on("load",function(){e()})):e():(o.videoPlayer={},o.videoPlayer.status="load",(a=document.createElement("script")).id="flowplayerapiscript",a.async="true",document.getElementsByTagName("head")[0].appendChild(a),a.src=s.jsPath("flowplayer/flowplayer.min.js"),$(a).on("load",function(){o.videoPlayer.api=l.flowplayer,o.videoPlayer.status="ready",o.videoPlayer.api.conf={splash:!0,key:"$219658761613389, $156847843995181, $217505261009336, $438958512312610"},e()}),i.nocss||((a=document.createElement("link")).rel="stylesheet",a.href=s.jsPath("flowplayer/skin/playful.css"),a.type="text/css",document.getElementsByTagName("head")[0].appendChild(a)))})},this.playerVideoJSLoad=function(r){return e(function(t,e){var a,i,n;o.videoPlayerJS?"load"===o.videoPlayerJS.status?c(function e(){"ready"===o.videoPlayerJS.status?t():c(e,100)},100):t():(o.videoPlayerJS={},o.videoPlayerJS.status="load",(n=document.createElement("script")).id="videojs_script",n.async="true",(i=document.getElementsByTagName("head")[0]).appendChild(n),n.src=s.jsPath("videojs/video.js"),$(n).on("load",function(){(a=document.createElement("script")).id="videojs_hls_script",a.async="true",a.src=s.jsPath("videojs/videojs-contrib-hls.js"),i.appendChild(a),$(a).on("load",function(){window.videojs.options.flash.swf=s.jsPath("videojs/video-js.swf"),o.videoPlayerJS.api=l.videojs,o.videoPlayerJS.status="ready",t()})}),r.nocss||((n=document.createElement("link")).rel="stylesheet",n.href=s.jsPath("videojs/video-js.min.css"),n.type="text/css",i.appendChild(n)))})}}]),angular.module("news_v4.templates",[]).run(["$templateCache",function(e){e.put("_news_v4/news_v4.tpl.html",""),e.put("_news_v4/newsPageArticle/newsPageArticle.tpl.html",""),e.put("00_mosNewsfeed/mosEmbedSocial/mosEmbedSocial.tpl.html",'<div class="embed-social-wrapper"><div class="embed-social" data-ng-class="{\'embed-social_displayb\': displayBlock, \'embed-social_resp-frame\': responsiveFrame}"></div></div>'),e.put("00_mosNewsfeed/mosNewsfeedMain/mosNewsfeedMain.tpl.html",""),e.put("00_mosNewsfeed/mosNewsfeedMainTv/mosNewsfeedMainTv.tpl.html",'<div class="news-televisor" data-ng-hide="hideme" data-ng-class="{\'contrast\':colorScheme==\'contrast\'}"><div class="news-televisor__list"><div class="news-televisor__item" data-ng-repeat="item in items track by $index | orderBy:\'position\'" data-ng-class="{\'news-televisor__item_accent\':  item.position==1, \'news-televisor__item_with-photo\': item.position&gt;1 &amp;&amp; item.image &amp;&amp; item.image.original}"><div class="news-televisor__item-wrapper" data-ng-if="item.image"><div class="news-televisor__item-text-wrapper"><div class="news-televisor__item-text"><a class="news-televisor__item-title" data-ng-href="{{ item.link }}" target="{{ itemLinkTarget }}">{{ item.title }}</a><div class="news-televisor__credentials"><span class="news-televisor__item-date" data-ng-if="item.date_timestamp &amp;&amp; !(item.kind &amp;&amp; item.kind.id === \'conference\')">{{item.date_timestamp*1000 | prepareDateSince : \'d MMM\'}}</span></div></div></div><a class="news-televisor__item-image-wrapper" data-ng-href="{{ item.link }}" target="{{ itemLinkTarget }}"><div class="news-televisor__item-image" data-ng-class="{\'grayscale\':colorScheme==\'contrast\'}" data-image-set-element="item.image"></div></a></div></div></div></div>'),e.put("00_mosNewsfeed/mosNewsfeedMainPulse/mosNewsfeedMainPulse.tpl.html",'<div class="b-pulse-news-vertical" data-ng-class="{\'contrast\':colorScheme==\'contrast\'}" data-ng-show="!hideme"><div class="customScrollbar"><div class="b-pulse-news-vertical__item" data-ng-repeat="item in items" data-ng-if="!item.hide"><a class="b-pulse-news-vertical__item-link" data-ng-href="{{item.link}}" target="{{ itemLinkTarget }}"><span class="b-pulse-news-vertical__item-title">{{item.title}}</span><span class="b-pulse-news-vertical__item-time" data-ng-if="item.date_timestamp">{{ item.date_timestamp*1000 | prepareDateSince : \'d MMM\' }}</span></a></div></div><div class="b-pulse-news-vertical__controls"><div class="b-pulse-news-vertical__button-panel"><a class="b-pulse-news-vertical__buttons pull-left" data-ng-if="isSubscribe" data-translate="mosMainPulseNewsVertical.title"></a><a class="b-pulse-news-vertical__buttons pull-right" data-ng-href="{{ pageUrlPath }}" data-ng-if="isMainLink" data-translate="mosMainPulseNewsVertical.titleLink"></a></div></div></div>'),e.put("mosBanner/mosBanner.tpl.html",'<div class="extconts-service-container"></div>'),e.put("newsPage/newsPage.tpl.html",'<div class="news-page__directives"><div class="after_header__clearfix" data-ng-if="lang !== \'en\'"></div><div class="col-xs-12"><div data-themes-list="" data-api-root="assembler" data-api-path="blocks" data-page-path="news" data-title="" data-item-path="/maintheme/"></div></div><div class="row"><div class="news-page__tv-loader col-xs-12 col-sm-8 col-md-9 col-lg-9"><div class="news-page__tv-loader-indicator"></div></div></div><div class="col-xs-12 col-sm-4 col-md-6 col-lg-6"><div data-mos-newsfeed-main-tv="" data-items="news_items_tv" data-page-path="news" data-item-path="/item/" data-page="news" data-item-link-target="_self"></div></div><div class="col-xs-12 col-sm-4 col-md-3 col-lg-3" data-ng-if="lang === \'ru\'"><div data-mos-newsfeed-main-pulse="" data-items="news_items_pulse" data-page-url-path="news" data-path-item="/item/" data-item-link-target="_self"></div></div><div class="col-xs-12 col-sm-4 col-md-3 col-lg-3" data-ng-if="lang === \'en\'"><div class="extconts" data-ng-if="extconts &amp;&amp; extconts.items.length"><div class="hidden-xs extconts-wrapper" data-ng-repeat="item in extconts.items" data-mos-extconts-service="" data-domain="extconts.domain" data-url-path="extconts.urlPath" data-item="item"></div></div></div><div class="col-xs-12 col-sm-4 col-md-3 col-lg-3 pull-right"><div class="extconts-wrapper top-news-banner" data-mos-teaser="{&quot;scroll&quot;:false,&quot;adaptive&quot;:[&quot;desktop&quot;,&quot;tablet&quot;,&quot;phone&quot;],&quot;adaptiveOptions&quot;:{&quot;tabletWidth&quot;:830,&quot;phoneWidth&quot;:480},&quot;placementParams&quot;:{&quot;p1&quot;:&quot;bxaln&quot;,&quot;p2&quot;:&quot;fpjg&quot;}}"></div><div data-mayors-media="" data-ng-if="lang === \'ru\'" data-api-root="newsfeed" data-api-path="mayorsMedia"></div></div><div class="col-xs-12 col-sm-12 col-md-9 col-lg-9 news-page__filters"><div data-filter-news="" data-api-root-spheres="newsfeed" data-api-path-spheres="newsShperes" data-api-root-areas="department" data-api-path-areas="departmentsList" data-set-new-sphere="setNewSphere" data-set-filter-calendar="setFilterCalendar" data-set-new-area="setNewArea" data-set-current-sphere="setCurrentSphere" data-set-current-area="setCurrentArea" data-set-calendar-date="setCalendarDate" data-current-sphere="currentSphere" data-current-area="currentArea" data-items-sphere="itemsSphere" data-items-area="itemsArea" data-start-find-posts="startFindPosts" data-params="params"></div></div><div class="col-xs-12" data-ng-class="{\'col-sm-8 col-md-9 col-lg-9\': lang !== \'ru\', \'col-sm-4 col-md-6 col-lg-6\': lang === \'ru\'}"><div data-news-feed="" data-api-root="newsfeed" data-api-path="newsMinor" data-start-load-event="state:loaded" data-set-and-get-params="setAndGetParams" data-page-path="news" data-item-path="/item/" data-additional-feed-items="newsFeedItems" data-is-there-more-pages="isThereMorePages" data-get-more-news="getMoreNewsFunc" data-activate-button-for-next-loading="activateButtonForNextLoading" data-get-next-page-url="getNextPageUrl" data-current-page="currentPage" data-limit="7" data-dependent-on="{{lang === \'ru\' ? \'.news-page__districts-and-media\' : \'\'}}" data-all-in-main-feed="allInMainFeed" data-exclude-ids="{{excludeIds}}" data-wait-dependency="mainNewsData" data-item-link-target="_self"></div></div><div class="news-page__districts-and-media col-xs-12 col-sm-4 col-md-3 col-lg-3" data-ng-if="lang === \'ru\'"><div data-news-districts-vertical="" data-ng-if="lang != \'en\'" data-api-root="newsfeed" data-api-path="newsDistricts" data-page-path="districts/" data-item-path="districts/item/" data-districts-api-root="newsfeed" data-districts-api-path="directories" data-set-new-area="setNewArea" data-item-link-target="_self"></div></div><div class="col-xs-12 col-sm-4 col-md-3 col-lg-3 pull-right"><div class="extconts"><div class="hidden-xs extconts-wrapper bottom-news-banner" data-mos-teaser="{&quot;scroll&quot;:false,&quot;adaptive&quot;:[&quot;desktop&quot;,&quot;tablet&quot;,&quot;phone&quot;],&quot;adaptiveOptions&quot;:{&quot;tabletWidth&quot;:830,&quot;phoneWidth&quot;:480},&quot;placementParams&quot;:{&quot;p1&quot;:&quot;bxalp&quot;,&quot;p2&quot;:&quot;fpjh&quot;}}"></div></div></div><div class="col-xs-12 col-sm-8 col-md-9 col-lg-9 hidden-xs strike" data-ng-if="lang === \'ru\'"><div class="newsPage__line"></div></div><div class="col-xs-12 col-sm-8 col-md-9 col-lg-9"><div data-news-feed-additional="" data-items="newsFeedItems" data-activate-button-for-next-loading="activateButtonForNextLoading" data-current-page="currentPage" data-is-there-more-pages="isThereMorePages" data-get-more-news="getMoreNewsFunc" data-get-next-page-url="getNextPageUrl" data-all-in-main-feed="allInMainFeed" data-item-link-target="_self"></div></div></div>'),e.put("newsPageDistricts/newsPageDistricts.tpl.html",'<div class="districts-page"><div class="row after_header__clearfix"></div><div class="districts-page__directives"><div class="col-xs-12" data-ng-if="lang===\'en\'"><div data-themes-list="" data-api-root="assembler" data-title="Новости округов" data-api-path="blocks" data-page-path="news" data-item-path="/maintheme/"></div></div><div class="col-xs-12 col-sm-12 col-md-9 col-lg-9 districts-page__filters"><div data-filter-news="" data-api-root-spheres="newsfeed" data-api-path-spheres="newsShperes" data-area-title="Округ" data-api-root-areas="newsfeed" data-api-path-areas="directories" data-set-new-sphere="setNewSphere" data-set-filter-calendar="setFilterCalendar" data-set-new-area="setNewArea" data-set-current-sphere="setCurrentSphere" data-set-current-area="setCurrentArea" data-set-calendar-date="setCalendarDate" data-current-sphere="currentSphere" data-current-area="currentArea" data-items-sphere="itemsSphere" data-items-area="itemsArea" data-start-find-posts="startFindPosts" data-params="params"></div></div><div class="districts-page__news col-xs-12 col-sm-8 col-md-9 col-lg-9"><div data-news-feed="" data-show-districts="true" data-items-area="itemsArea" data-api-root="newsfeed" data-api-path="newsAllArea" data-start-load-event="state:loaded" data-set-and-get-params="setAndGetParams" data-page="newsDistricts" data-page-path="news" data-item-path="/districts/item/" data-sphere-path="/districts/" data-additional-feed-items="newsFeedItems" data-max-height="1850" data-is-there-more-pages="isThereMorePages" data-activate-button-for-next-loading="activateButtonForNextLoading" data-get-more-news="getMoreNewsFunc" data-item-link-target="_self"></div></div><div class="news-media-wrapper col-xs-12 col-sm-4 col-md-3 col-lg-3 pull-right"><div class="extconts" data-ng-if="extconts &amp;&amp; extconts.items.length"><div class="hidden-xs" data-ng-repeat="item in extconts.items" data-mos-extconts-service="" data-domain="extconts.domain" data-url-path="extconts.urlPath" data-item="item"></div></div></div><div class="col-xs-12 col-sm-8 col-md-9 col-lg-9"><div data-news-feed-additional="" data-items="newsFeedItems" data-show-districts="true" data-is-there-more-pages="isThereMorePages" data-activate-button-for-next-loading="activateButtonForNextLoading" data-get-more-news="getMoreNewsFunc" data-item-link-target="_self"></div></div></div></div>'),e.put("themesList/themesList.tpl.html",'<div class="themes" data-ng-class="{\'add_padding\': hideme, \'themes_mainpage\': isMainPage, \'themes_ru\': lang === \'ru\'}"><div class="themes__row" data-ng-if="!hideme"><div class="themes__col themes__col-title" data-ng-class="{\'inited\': !loading}" data-ng-if="title"><h1 class="themes__main-title"><span data-ng-if="h1">{{ h1 }}</span><span data-ng-if="!h1" data-translate="themesList.newsTitle"></span></h1></div><div class="themes__col themes__col-list" data-ng-class="{\'inited\': !loading}"><div class="themes__themes-list"><div class="themes__title" data-ng-if="!hideSubtitle" data-translate="themesList.themesTitle"></div><ul class="themes__list hidden-xs" data-ng-class="{\'full-width\': dropdown.length == 0, \'no-subtitle\': hideSubtitle}"><li data-ng-repeat="theme in themes"><a class="themes__link" data-ng-href="{{theme.link}}" data-ng-class="{\'active\': theme.id == currentThemeId}">{{ theme.title }}</a></li></ul><div class="dropdown" data-ng-if="dropdown.length &gt; 0"><span class="hidden-xs" data-translate="themesList.see"></span><span class="visible-xs-inline" data-ng-attr-data-toggle="{{isMobile ? \'dropdown\' : undefined }}">{{ current.title }}<span class="ico icon-arrow_down_triangle"></span></span><div class="dropdown-menu-custom" data-ng-click="$event.stopPropagation()"><ul class="wrapper"><li data-ng-repeat="item in dropdown"><a data-ng-href="{{item.link}}" data-ng-class="{\'active\': item.id == currentThemeId}">{{ item.title }}</a></li></ul></div></div></div></div></div></div>'),e.put("mayorsMedia/mayorsMedia.tpl.html","<div class=\"mayors-media\" data-ng-hide=\"hideme\" data-ng-class=\"{'contrast':colorScheme=='contrast'}\"><div class=\"mayors-media__item\" data-ng-if=\"item.image\"><div class=\"mayors-media__item-image\" data-ng-class=\"{'grayscale':colorScheme=='contrast'}\" data-ng-style=\"{'background-image': 'url(&quot;{{item.image | imageSrc}}&quot;)'}\"></div><div class=\"mayors-media__item-title-wrap\"><div class=\"mayors-media__item-title\"><div class=\"mayors-media__item-icon\" data-ng-class=\"{'grayscale':colorScheme=='contrast','icon-play-white-red':item.type==='video','icon-camera-white-red':item.type==='gallery','icon-infographic-white-red':item.type==='infographic','icon-presentation-white-red':item.type==='presentation'}\"></div><div class=\"mayors-media__item-text\"><a data-ng-href=\"{{ getLangLink(getVideoLink(item)) }}\" data-ng-if=\"item.type === 'video'\">{{item.title}}</a><a data-ng-href=\"{{ getLangLink(getPhotoLink(item)) }}\" data-ng-if=\"item.type === 'gallery'\">{{item.title}}</a></div></div></div></div></div>"),e.put("newsDistrictsVertical/newsDistrictsVertical.tpl.html",'<div class="news-districts-vertical" data-ng-hide="hideme" data-ng-class="{\'contrast\':colorScheme==\'contrast\'}"><div class="news-districts-vertical__title">Новости округов</div><div class="news-districts-vertical__items"><div class="news-districts-vertical__item" data-ng-repeat="item in items track by $index"><a class="news-districts-vertical__item-district" data-ng-href="{{item.districtFilterUrl}}" data-ng-if="getAreaName(item.territory_district_id)">{{getAreaName(item.territory_district_id)}}</a><a class="news-districts-vertical__item-link" data-ng-href="{{item.link}}" target="{{ itemLinkTarget }}"><span class="news-districts-vertical__item-title">{{item.title}}</span></a></div></div><div class="news-districts-vertical__controls"><div class="news-districts-vertical__button-panel"><a class="news-districts-vertical__button" data-ng-href="{{pagePath}}">Все новости округов</a></div></div></div>'),e.put("bannerListVertical/bannerListVertical.tpl.html",'<div class="b-extcont-list-vertical" data-ng-hide="hideme" data-ng-class="{\'contrast\':colorScheme==\'contrast\'}"><div class="b-extcont-list-vertical__adviser hidden-xs"><div class="b-extcont-list-vertical__adviser-title"><img class="pull-left" ng-src="{{\'cityAdviser.svg\' | imagesPath}}" width="35" height="38" alt="data-translate=\'extcontListVertical.adviceHow\'"/><div class="b-extcont-list-vertical__adviser-title-text"><span data-translate="extcontListVertical.adviceBr1"></span><br/><span data-translate="extcontListVertical.adviceBr2"></span></div></div><div class="b-extcont-list-vertical__adviser-hint">Хочу узнать</div><div class="b-extcont-list-vertical__adviser-form"><input class="b-extcont-list-vertical__adviser-input" type="text" placeholder="data-translate=\'extcontListVertical.want"/><span class="b-extcont-list-vertical__adviser-btn input-group-btn"><button class="btn btn-default" type="button"><div class="ico"></div></button></span></div></div></div>'),e.put("filterNews/filterNews.tpl.html",'<div class="filter-news" data-ng-class="{\'contrast\':colorScheme==\'contrast\', \'hidden\': lang !== \'ru\'}"><div class="row"><div class="col-xs-12 col-sm-4 col-md-4 col-lg-4 filter-news__dropdown-wrap"><div class="filter-news__filter filter-news__filter_sphere"><div class="dropdown" data-mos-press-categories="" data-on-category-change="getNewSphere(catid)" data-categories="itemsSphere" data-category="currentSphere" data-placeholder="{{\'filterNews.sphereTitle\' | translate}}"></div></div></div><div class="col-xs-12 col-sm-4 col-md-4 col-lg-4 filter-news__dropdown-wrap"><div class="filter-news__filter filter-news__filter_area"><div class="dropdown" data-mos-press-categories="" data-on-category-change="getNewArea(catid)" data-categories="itemsArea" data-category="currentArea" data-placeholder="{{areaTitle}}"></div></div></div><div class="col-xs-12 col-sm-4 col-md-4 col-lg-4 filter-news__range-wrap"><div class="filter-news__filter b-filter__calendar b-filter__calendar_right right_side filter-news__filter_range"><div data-filter-calendar="" data-from-date="{{params.from}}" data-until-date="{{params.to}}" data-apply-new-range="applyFilterCalendar(fromDate,untilDate)"></div></div></div></div></div>'),e.put("filterCalendar/filterCalendar.tpl.html",'<div class="calendar-inner" data-range-apply=""><div class="dates"><input class="js-daterange-input icon" type="text" data-ng-readonly="true" placeholder="{{placeholder}}" data-ng-class="icon || \'icon-calendar-gray\'" id="{{ uniqId || \'calendar1\' }}"/><span class="calendar-clear" data-ng-click="clearDatepicker()">Сбросить</span></div></div>'),e.put("newsFeed/newsFeed.tpl.html",'<div class="news-feed" data-ng-hide="hideme" data-ng-class="{\'contrast\':colorScheme==\'contrast\', \'{{setClass}}\': setClass}"><div class="news-feed__feed" data-ng-repeat="feed in feeds track by feed.id"><div class="news-feed__list"><div class="news-feed__item" data-ng-repeat="item in feed.items track by $index" data-ng-class="{\'news-feed__item_big-accent\': item.typeOfMaterial === \'big_accent\', \'news-feed__item_accent\': item.typeOfMaterial === \'accent\',\'news-feed__item_with-photo\': item.typeOfMaterial === \'with_photo\', \'news-feed__item_default\': !item.typeOfMaterial}" data-on-finish-render=""><div class="news-feed__item-wrapper"><div class="news-feed__item-text-wrapper" data-ng-class="{\'news-feed__item-text-no-image\': !item.image}"><div class="news-feed__item-text"><div class="news-feed__item-district-title" data-ng-if="showDistricts &amp;&amp; item.districtTitle">{{::item.districtTitle}}</div><a class="news-feed__item-title" data-ng-href="{{ item.link}}" target="{{ itemLinkTarget }}">{{ ::item.title }}</a><div class="news-feed__credentials"><span class="news-feed__item-date" data-ng-if="(item.date_timestamp || item.date_from_timestamp) &amp;&amp; !(item.kind &amp;&amp; item.kind.id === \'event\') &amp;&amp; !(item.kind &amp;&amp; item.kind.id === \'conference\')">{{(item.date_timestamp || item.date_from_timestamp)*1000 | prepareDateSince : \'d MMM\'}}</span><div class="news-feed__item-views" data-ng-if="item.counter"><span class="news-feed__item-icon icon-eye_grey"></span><span class="news-feed__item-date">{{::item.counter}}</span></div></div></div></div><a class="news-feed__item-image-wrapper" data-ng-href="{{ ::item.link }}" target="{{ itemLinkTarget }}"><div class="news-feed__item-image" data-ng-if="item.typeOfMaterial === \'big_accent\' &amp;&amp; item.image" data-ng-class="{\'grayscale\':colorScheme==\'contrast\'}" data-image-set-element="item.image"></div><div class="news-feed__item-image" data-ng-if="item.typeOfMaterial === \'accent\'" data-ng-class="{\'grayscale\':colorScheme==\'contrast\' &amp;&amp; item.image}" data-image-set-element="item.image"></div><div class="news-feed__item-image" data-ng-if="(item.typeOfMaterial === \'with_photo\' || !item.typeOfMaterial) &amp;&amp; item.image" data-ng-class="{\'grayscale\':colorScheme==\'contrast\'}" data-image-set-element="item.image"></div></a></div></div></div><div class="news-feed__list-without-images" data-ng-if="feed.itemsWithoutImage.length"><div class="customScrollbar"><div class="news-feed__item-without-image" data-ng-repeat="item in feed.itemsWithoutImage"><a class="news-feed__link" data-ng-href="{{ ::item.link }}" target="{{ itemLinkTarget }}">{{ ::item.title}}<span class="news-feed__item-date" data-ng-if="item.date_timestamp || item.date_from_timestamp">{{ (item.date_timestamp || item.date_from_timestamp)*1000 | prepareDateSince : \'d MMM\' }}</span></a></div></div></div></div><div class="news-feed__get-more" data-ng-if="isThereMorePages" data-ng-click="getMoreNews()" data-translate="newsFeed.see"></div><div class="news-feed__not-found" data-ng-if="notFound" data-translate="newsFeed.notFound"></div></div>'),e.put("newsFeedAdditional/newsFeedAdditional.tpl.html",'<div class="news-feed-additional-additional" data-ng-hide="hideme" data-ng-class="{\'contrast\':colorScheme==\'contrast\'}"><div class="news-feed-additional__list" data-ng-if="!minimize"><div class="news-feed-additional__item" data-ng-repeat="item in items" data-ng-class="{\'news-feed-additional__item_default\': !item.typeOfMaterial, \'news-feed-additional__item_big-accent\': item.typeOfMaterial === \'big_accent\', \'news-feed-additional__item_accent\': item.typeOfMaterial === \'accent\',\'news-feed-additional__item_with-photo\': item.typeOfMaterial === \'with_photo\'}"><div class="news-feed-additional__item-wrapper row"><a class="news-feed-additional__item-image-wrapper" data-ng-href="{{ item.link }}" target="{{ itemLinkTarget }}"><div class="news-feed-additional__item-image" data-ng-if="item.typeOfMaterial === \'big_accent\' || item.typeOfMaterial === \'accent\' &amp;&amp; item.image" data-ng-class="{\'grayscale\':colorScheme==\'contrast\'}" data-image-set-element="item.image"></div><div class="news-feed-additional__item-image" data-ng-if="item.typeOfMaterial === \'with_photo\' || !item.typeOfMaterial &amp;&amp; item.image" data-ng-class="{\'grayscale\':colorScheme==\'contrast\'}" data-image-set-element="item.image"></div></a><div class="news-feed-additional__item-text-wrapper" data-ng-class="{\'news-feed__item-text-no-image\': !item.image}"><div class="news-feed-additional__item-text"><div class="news-feed-additional__item-district-title" data-ng-if="showDistricts &amp;&amp; item.districtTitle">{{item.districtTitle}}</div><a class="news-feed-additional__item-title" data-ng-href="{{ item.link }}" target="{{ itemLinkTarget }}">{{ item.title }}</a><div class="news-feed-additional__credentials"><span class="news-feed-additional__item-date" data-ng-if="item.date_timestamp || item.date_from_timestamp">{{ (item.date_timestamp || item.date_from_timestamp)*1000 | prepareDateSince : \'d MMM\' }}</span><div class="news-feed-additional__item-views" data-ng-if="item.counter"><span class="news-feed-additional__item-icon icon-eye_grey"></span><span class="news-feed-additional__item-date">{{item.counter}}</span></div></div></div></div></div></div></div><div class="news-feed-additional__list" data-ng-if="minimize"><div class="news-feed-additional__item news-feed-additional__item_default" data-ng-repeat="item in items"><div class="news-feed-additional__item-wrapper row"><a class="news-feed-additional__item-image-wrapper" data-ng-href="{{ item.link }}" target="{{ itemLinkTarget }}"><div class="news-feed-additional__item-image" data-ng-if="item.image" data-ng-class="{\'grayscale\':colorScheme==\'contrast\'}" data-image-set-element="item.image"></div></a><div class="news-feed-additional__item-text-wrapper" data-ng-class="{\'news-feed__item-text-no-image\': !item.image}"><div class="news-feed-additional__item-text"><div class="news-feed-additional__item-district-title" data-ng-if="showDistricts &amp;&amp; item.districtTitle">{{item.districtTitle}}</div><a class="news-feed-additional__item-title" data-ng-href="{{ item.link }}" target="{{ itemLinkTarget }}">{{ item.title }}</a><div class="news-feed-additional__credentials"><span class="news-feed-additional__item-date" data-ng-if="item.date_timestamp || item.date_from_timestamp">{{ (item.date_timestamp || item.date_from_timestamp)*1000 | prepareDateSince : \'d MMM\' }}</span><div class="news-feed-additional__item-views" data-ng-if="item.counter"><span class="news-feed-additional__item-icon icon-eye_grey"></span><span class="news-feed-additional__item-date">{{item.counter}}</span></div></div></div></div></div></div></div><a class="news-feed-additional__get-more" data-ng-click="getMore(); $event.preventDefault(); $event.stopPropagation();" data-ng-href="{{ getNextPageUrl() }}" data-ng-if="isThereMorePages &amp;&amp; (items.length || allInMainFeed)" data-translate="newsFeedAdditional.see"></a></div>'),e.put("newsMediaAdditional/newsMediaAdditional.tpl.html",'<div class="news-media-additional" data-ng-hide="hideme" data-ng-class="{\'contrast\':colorScheme==\'contrast\'}"><div class="news-media-additional__item"><a class="news-media-additional__item-extconts" data-ng-if="item.link" data-ng-href="{{item.link}}"><div class="text" data-ng-bind-html="trustAsHtml(item.text)"></div><div class="img hidden-xs" data-ng-class="{\'grayscale\':colorScheme==\'contrast\'}" data-ng-style="{\'background-image\': \'url(&quot;{{item.image | imagesPath}}&quot;)\'}"></div><div class="img visible-xs-block" data-ng-class="{\'grayscale\':colorScheme==\'contrast\'}" data-ng-style="{\'background-image\': \'url(&quot;{{ item.imagehorizontal | imagesPath}}&quot;)\'}"></div></a></div></div>'),e.put("carouselFourItems/carouselFourItems.tpl.html",'<div class="b-navtitle container-fluid"><div class="b-navtitle__top-panel navbar navbar-static"><div class="b-navtitle__title"><a data-ng-if="moreLink &amp;&amp; !section &amp;&amp; !moreLinkTarget" data-ng-click="titleClick($event)" data-ng-href="{{moreLink}}"><span class="img" data-ng-if="titleImage"><img data-ng-src="{{titleImage.src | imagesPath}}" width="{{titleImage.width}}" height="{{titleImage.height}}"/></span><span data-ng-bind-html="title"></span></a><a data-ng-if="moreLink &amp;&amp; !section &amp;&amp; moreLinkTarget" data-ng-href="{{moreLink}}" data-ng-click="titleClick($event)" target="{{moreLinkTarget}}"><span class="img" data-ng-if="titleImage"><img data-ng-src="{{titleImage.src | imagesPath}}" width="{{titleImage.width}}" height="{{titleImage.height}}"/></span><span data-ng-bind-html="title"></span></a><span data-ng-if="!moreLink"><span class="img" data-ng-if="titleImage"><img data-ng-src="{{titleImage.src | imagesPath}}" width="{{titleImage.width}}" height="{{titleImage.height}}"/></span><span data-ng-bind-html="title"></span></span></div><ul class="nav b-navtitle__nav"><li><div class="b-navtitle__nav-prev" data-ng-if="showArrows"><a class="s-prev" href="" ng-click="gotoPrev()"><span class="ico"><span></span></span></a></div><div class="b-navtitle__nav-next" data-ng-if="showArrows"><a class="s-next" href="" ng-click="gotoNext()"><span class="ico"><span></span></span></a></div><div class="b-navtitle__nav-details" data-ng-if="moreLink || section"><a data-ng-if="moreLink &amp;&amp; !section &amp;&amp; !moreLinkTarget" data-ng-href="{{moreLink}}" data-ng-click="titleClick($event)" data-ng-bind-html="moreLinkText"></a><a data-ng-if="moreLink &amp;&amp; !section &amp;&amp; moreLinkTarget" data-ng-click="titleClick($event)" data-ng-href="{{moreLink}}" target="{{moreLinkTarget}}" data-ng-bind-html="moreLinkText"></a><a data-ng-if="!moreLink &amp;&amp; section" data-ng-click="titleClick($event)" data-ui-sref="{{section}}" data-ng-bind-html="moreLinkText"></a></div></li></ul></div></div><div class="b-slick-carousel" slick="" arrows="false" infinite="{{infinite}}" slides-to-show="{{slidesToShow}}" slides-to-scroll="{{slidesToScroll}}" responsive="responsive" init-onload="true" data="items" on-init="onInitCarousel(evt, slick)" accessibility="false" draggable="false" swipe="true" rows="{{rows}}" slides-per-row="{{slidesPerRow}}" touch-move="true" adaptive-height="{{adaptiveHeight}}" variableWidth="{{variableWidth}}" speed="{{speed}}" wait-for-animate="true" init-delay="{{initDelay}}"><div class="b-carousel__item" data-ng-repeat="item in items track by $index"><div data-compile-template="data-compile-template" template="{{template}}"></div></div></div>'),e.put("pressCategories/pressCategories.tpl.html",'<div class="b-press-dropdown"><h1 class="b-dropdown__opener" data-bs-dropdown="categories" data-animation="am-fade" data-template="dropdown/dropdown.press.categories.tpl.html" data-ng-if="h1">{{category.title}}<span class="ico icon-arrow_down_01_black"></span></h1><span class="b-dropdown__opener" data-bs-dropdown="categories" data-animation="am-fade" data-template="dropdown/dropdown.press.categories.tpl.html" data-ng-if="!h1">{{category.title}}<span class="ico icon-arrow_down_01_black"></span></span></div>'),e.put("pressCategoriesCheckbox/pressCategoriesCheckbox.tpl.html",'<div class="b-press-dropdown"><span class="b-dropdown__opener" data-bs-dropdown="categories" data-animation="am-fade" data-template="dropdown/dropdown.press.categoriesCheckbox.tpl.html">{{category.title}}<span class="ico icon-arrow_down_01_black"></span></span></div>'),e.put("pressCategoriesCheckbox/pressCategoriesCheckboxLabel.tpl.html",'<div class="b-press-dropdown"><span class="b-dropdown__opener" data-ng-if="category.length" data-template="dropdown/dropdown.press.categoriesCheckbox.tpl.html">{{category | listTitles}}<span class="ico icon-arrow_down_01_black"></span></span><span class="b-dropdown__opener" data-ng-if="!category.length" data-template="dropdown/dropdown.press.categoriesCheckbox.tpl.html">{{placeholder}}<span class="ico icon-arrow_down_01_black"></span></span></div>'),e.put("sharing/sharing.tpl.html",'<div class="b-sharing"><div class="b-sharing__share-button" data-ng-if="isModal()"><button class="b-iconic-btn" data-ng-click="openPopup()"><i class="icon-share_blue"></i><span class="b-iconic-btn__text" data-translate="mosSharing.shareTitle"></span></button></div><div class="b-sharing-links" id="{{id}}" data-ng-class="dynClass" data-ng-if="!isModal()"></div></div>'),e.put("sharingPopup/sharingPopup.tpl.html",'<div class="b-popup-sharing"><div class="b-popup-sharing__body"><div class="b-popup-sharing__header"><h3 class="b-popup-sharing__title" data-translate="mosSharingPopup.shareTitle"></h3><button class="b-popup-sharing__close" data-ng-click="closePopup()"></button></div><div class="b-popup-sharing__content"><div class="b-popup-sharing__socials"><div class="b-sharing-links b-sharing-links_type_horizontal b-sharing-links_behaviour_form" id="{{id}}"></div></div></div><div class="b-popup-sharing__footer"></div></div></div>'),e.put("tags/tags.tpl.html",'<div class="b-article__tags"><span data-translate="mosTags.tagTitle"> </span> <a data-ng-href="{{getSearchLink(item.title)}}" data-ng-repeat="item in tags">{{item.title}}<span data-ng-if="$index!=tags.length-1!=0 || $index!=tags.length-1">,</span></a></div>'),e.put("spheres/spheres.tpl.html",'<div class="b-article__spheres"><span data-translate="mosSpheres.spheresTitle"> </span> <a data-ng-href="{{getSphereLink(item)}}" data-ng-repeat="item in params.spheres" target="{{target}}">{{item.title}}<span data-ng-if="$index!=params.spheres.length-1!=0 || $index!=params.spheres.length-1">,</span></a></div>'),e.put("responceDialog/responceDialog.tpl.html",'<div class="b-depdoc-result" data-ng-if="notFound"><div class="b-depdoc-result__title">{{title}}</div></div>'),e.put("mosError/mosError.tpl.html",'<div class="mos-error error-page"><div class="header"><h1 class="errorMessage" data-ng-if="pageInfo.title" data-translate="mosError.errorMessage_{{pageInfo.title}}" ng-class="{ header_cn: lang === \'cn\'}"></h1><p class="errorText" data-ng-if="pageInfo.title" data-translate="mosError.errorText_{{pageInfo.title}}"></p><div ng-if="showSearch" id="{{ appId }}"></div></div><div class="live" ng-if="lang === \'ru\'" data-widget="widget-live"></div><script ng-if="lang === \'ru\' &amp;&amp; isClientError" type="text/javascript" src="/widget-collection/main.js"><\/script></div>'),e.put("rssSubscriber/rssSubscriber.tpl.html",'<div class="rss-subscriber" data-ng-class="{\'contrast\':colorScheme==\'contrast\'}"><div class="rss-subscriber__title" data-translate="rssSubscriber.subscribeTitle"></div><form><input class="rss-subscriber__input" placeholder="{{\'rssSubscriber.email\' | translate}}"/><button class="rss-subscriber__button" type="submit" data-translate="rssSubscriber.sendTitle"></button><div class="rss-subscriber__rss">rss<span class="rss-subscriber__icon-rss icon-share-rss-blue" data-ng-class="{\'grayscale\':colorScheme==\'contrast\'}"></span></div></form></div>'),e.put("newsPageThemes/newsPageThemes.tpl.html",'<div class="districts-page"><div class="after_header__clearfix" data-ng-if="lang!==\'en\'"></div><div class="districts-page__directives"><div class="col-xs-12" data-ng-if="lang===\'en\'"><div data-themes-list="" data-api-root="assembler" data-api-path="blocks" data-page-path="news" data-item-path="/maintheme/" data-hide-subtitle="true" data-title="true" data-h1="h1"></div></div><div class="districts-page__news col-xs-12 col-sm-8 col-md-9 col-lg-9 pull-left"><div data-news-feed="" data-set-class="full-width" data-filter-brick-off="true" data-api-root="newsfeed" data-api-path="materialAggregator" data-set-and-get-params="setAndGetParams" data-page-path="news" data-item-path="/maintheme/%id%/item/" data-sphere-path="/maintheme/%id%/" data-additional-feed-items="newsFeedItems" data-is-there-more-pages="isThereMorePages" data-max-height="1850" data-activate-button-for-next-loading="activateButtonForNextLoading" data-get-more-news="getMoreNewsFunc" data-item-link-target="_self"></div></div><div class="news-media-wrapper col-xs-12 col-sm-4 col-md-3 col-lg-3 pull-right"><div class="extconts" data-ng-if="extconts &amp;&amp; extconts.items.length"><div class="hidden-xs extconts-item" data-ng-repeat="item in extconts.items" data-mos-extconts-service="" data-domain="extconts.domain" data-url-path="extconts.urlPath" data-item="item"></div></div></div><div class="col-xs-12 col-sm-8 col-md-9 col-lg-9 pull-left"><div data-news-feed-additional="" data-minimize="true" data-filter-brick-off="true" data-items="newsFeedItems" data-is-there-more-pages="isThereMorePages" data-activate-button-for-next-loading="activateButtonForNextLoading" data-get-more-news="getMoreNewsFunc" data-item-link-target="_self"></div></div></div></div>'),e.put("mosLightbox/mosLightbox.tpl.html",'<div class="mos-lightbox-popup-modal" data-ng-class="{\'{{prefixClass}}\': prefixClass }"><div class="mos-lightbox__icon mos-lightbox-popup-modal__close" data-ng-click="hidePop()"></div><div class="mos-lightbox__zoom-controls" data-ng-class="{\'mos-lightbox__zoom-controls_zoom\': zoom &gt; 1}"><div class="mos-lightbox__icon mos-lightbox__zoom-in" data-ng-click="zoomIn()"></div><div class="mos-lightbox__icon mos-lightbox__zoom-out" data-ng-click="zoomOut()"></div><div class="mos-lightbox__icon mos-lightbox__zoom" data-ng-click="zoomIn()"></div></div><div class="mos-lightbox-popup-modal__cont-wrapper"><div class="mos-lightbox-popup-modal__cont"><div class="mos-lightbox-popup-modal__wrapper"></div></div></div></div>'),e.put("articleEmergency_v2/articleEmergency_v2.tpl.html",'<div class="emergency_wrapper" data-ng-if="!dubplicate" data-ng-class="{\'has_data\': !hideMe}"><div class="emergency_outside-content" data-ng-if="extconts &amp;&amp; extconts.items.length"><div data-ng-repeat="item in extconts.items" data-mos-extconts-service="" data-domain="extconts.domain" data-url-path="extconts.urlPath" data-item="item"></div></div><div class="emergency {{ emergency.importance }}" data-ng-if="emergency"><div class="wrapper"><div class="emergency__time col-sm-2" data-ng-if="emergency.date_timestamp">{{ emergency.date_timestamp*1000 | prepareDateSince : \'d MMM\' }}</div><a class="emergency__title col-sm-10" data-ng-href="{{ emergency._link }}" ng-click="markAsRead()">{{ emergency.title }}</a></div></div></div>'),e.put("mosCopyright/mosCopyright.tpl.html",'<div class="mos-copyright" data-ng-if="title || copyright"><h4 class="mos-copyright__title" data-ng-if="title">{{title}}</h4><p class="mos-copyright__description" data-ng-if="copyright"><span data-translate="mosCopyright.photo"></span>: {{copyright}}</p></div>')}])}(window,window.angular);