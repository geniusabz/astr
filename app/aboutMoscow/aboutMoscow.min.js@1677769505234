!function(window,angular,undefined){function TmplService(){this.transferToPhantom=function(t){t&&(angular.isString(t)&&(t=+t),"function"!=typeof window.phantomJsLastModified||isNaN(t)||window.phantomJsLastModified(moment.unix(t).utcOffset(3).toDate().toUTCString()))}}angular.module("aboutMoscow",["mosapp","ngAnimate","ui.router","mgcrea.ngStrap","aboutMoscow.templates","mosapp.audio.player","mosapp.sharing","mosapp.banner","mosapp.sharing.popup","mosapp.mosError","mosapp.aboutmoscow.main","mosapp.aboutmoscow.plan","mosapp.aboutmoscow.honors","mosapp.aboutmoscow.honors.item","mosapp.aboutmoscow.navigation","mosapp.aboutmoscow.symbols","mosapp.aboutmoscow.symbols.item","mosapp.aboutmoscow.symbols.head","mosapp.aboutmoscow.symbols.head.item","mosapp.aboutmoscow.history","mosapp.aboutmoscow.documents","mosapp.banner.service"]).service("metaConfig",["$translate","$q",function(t,e){var a=!1,o={history:{image:"img",url:"news/"},plan:{image:"img",url:"news/"},symbols:{image:"img",url:"news/"},honors:{image:"img",url:"news/"},head:{image:"img",url:"news/"}};return this.config=o,this.init=function(){return a?e.when(o):e.when(t(["aboutMoscow.history.section","aboutMoscow.history.title","aboutMoscow.history.description","aboutMoscow.history.keywords","aboutMoscow.plan.section","aboutMoscow.plan.title","aboutMoscow.plan.description","aboutMoscow.plan.keywords","aboutMoscow.symbols.section","aboutMoscow.symbols.title","aboutMoscow.symbols.description","aboutMoscow.symbols.keywords","aboutMoscow.honors.section","aboutMoscow.honors.title","aboutMoscow.honors.description","aboutMoscow.honors.keywords","aboutMoscow.head.section","aboutMoscow.head.title","aboutMoscow.head.description","aboutMoscow.head.keywords"]).then(function(t){o.history.section=t["aboutMoscow.history.section"],o.history.title=t["aboutMoscow.history.title"],o.history.description=t["aboutMoscow.history.description"],o.history.keywords=t["aboutMoscow.history.keywords"],o.plan.section=t["aboutMoscow.plan.section"],o.plan.title=t["aboutMoscow.plan.title"],o.plan.description=t["aboutMoscow.plan.description"],o.plan.keywords=t["aboutMoscow.plan.keywords"],o.symbols.section=t["aboutMoscow.symbols.section"],o.symbols.title=t["aboutMoscow.symbols.title"],o.symbols.description=t["aboutMoscow.symbols.description"],o.symbols.keywords=t["aboutMoscow.symbols.keywords"],o.honors.section=t["aboutMoscow.honors.section"],o.honors.title=t["aboutMoscow.honors.title"],o.honors.description=t["aboutMoscow.honors.description"],o.honors.keywords=t["aboutMoscow.honors.keywords"],o.head.section=t["aboutMoscow.head.section"],o.head.title=t["aboutMoscow.head.title"],o.head.description=t["aboutMoscow.head.description"],o.head.keywords=t["aboutMoscow.head.keywords"],a=!0}))},this}]).run(["mosconfig","toolsSrvc","$rootScope","$state",function(t,r,e,i){e.$on("$stateChangeStart",function(t,e,a){e.redirectTo&&(t.preventDefault(),i.go(e.redirectTo,a))}),e.$on("$stateChangeSuccess",function(t,e,a,o,n){e.TARGET_NAME&&r.statCounter({metrika:{TARGET_NAME:e.TARGET_NAME}}),r.handleAlternateTags(i,e.name,["home","home.plan"])});var a=$(".b-article__title_h1").eq(0).text();r.setMeta({},{about:{title:a+=" - О Москве",description:a}},"about"),e.$watch(function(){return r.colorScheme()},function(t){setTimeout(function(){r.togglerBlackAndWhite("img",t,".b-fix-wrapper")},700)})}]).config(["$stateProvider","$urlRouterProvider","$urlMatcherFactoryProvider","$locationProvider","$compileProvider","$translatePartialLoaderProvider","$translateProvider",function(t,e,a,o,n,r,i){a.strictMode(!1),o.html5Mode(!0),o.hashPrefix("!"),n.debugInfoEnabled(!1),r.addPart("aboutMoscow"),i.useSanitizeValueStrategy("escaped"),a.type("keyVal",{},function(){return{encode:function(t){return t},decode:function(t,e){return t},is:angular.isString,equals:function(t,e){return t==e}}}),e.otherwise(function(t,e){var a=e.path(),t=t.get("$state");e.$$absUrl.match(/\/#!(\/)?$/)&&0==a.length?t.go("home",{},{location:!1}):t.go("404",{},{location:!1})}),this.scrollTop=function(t){TweenLite.to(window,t||.75,{scrollTo:{y:0},ease:Power2.easeOut,onComplete:function(){}})},t.state("home",{url:"/",views:{"@":{template:'<div data-about-moscow-main=""></div>'}}}).state("404",{url:"/404/",template:'<div data-mos-error="404"></div>'}).state("home.plan",{url:"plan/"}).state("home.honors",{url:"honors/"}).state("home.honors.item",{url:":id/"}).state("home.symbols",{url:"symbols/"}).state("home.symbols.item",{url:":id/"}).state("home.heads",{url:"heads/"}).state("home.heads.item",{url:":id/"})}]),angular.module("mosapp.banner.service",[]).directive("mosExtcontsService",[function(){return{scope:{domain:"=",urlPath:"=",item:"="},link:function(t,e,a){if(t.banner=t.item,t.hideMe=!1,!t.item)return!(t.hideMe=!0);t.item.domain||(t.domain?t.item.domain=t.domain:t.item.domain="//"+window.location.hostname),t.item.urlPath||(t.banner.urlPath=t.urlPath),t.item.link=t.item.domain+(location.port?":"+location.port:"")+t.item.urlPath+"?id="+t.item.id;var o=document.createElement("script");o.type="text/javascript",o.language="JavaScript",o.id="mos-platform-"+t.item.id,o.src=t.item.link,angular.element(e).find(".extconts-service-container").append(o)},templateUrl:"mosBanner/mosBanner.tpl.html"}}]),angular.module("mosapp.social.widget",[]).directive("socialWidget",["UrlSrvc","LangSrvc",function(n,r){return{restrict:"A",scope:{stripeColor:"@?"},link:function(t,e){function a(){return-1<navigator.appVersion.indexOf("Edge/13",0)}function o(){a()&&angular.element(document).find(".mayor-social .icon").css({"background-size":"14px 14px"})}o(),a()&&t.$watch(function(){return angular.element(window).width()},function(){o()}),t.lang=r.getCurrentLang(),t.social=n.linksPath("social"),t.social=t.social[t.lang],t.stripeColor?t.border={"border-bottom":"3px solid "+t.stripeColor}:t.border={"border-bottom":"border: 3px solid #666"}},templateUrl:n.tmplPath("socialWidget/socialWidget.tpl.html")}}]).directive("informerWeatherTraffic",["UrlSrvc","dataSrvc",function(t,a){return{restrict:"A",scope:{color:"@"},link:function(t,e){a.el=e,t.informers=a.data.informers,t.colorScheme=a.data.colorScheme,t.error=a.data.error},templateUrl:t.tmplPath("socialWidget/informerWeatherTraffic.tpl.html")}}]).service("dataSrvc",["UrlSrvc","apiSrvc","toolsSrvc","$translate",function(t,e,o,n){this.data={informers:[{api:"infoTraffic",title:"social_widget.jam",units:"social_widget.jam_units_many",hideme:!0}],error:!1,colorScheme:!1,flag:!1},this.el=!1;var r=this;function a(a){e.getData("citypulse",a.api,{},!0,r.el).then(function(t){var e;angular.isObject(t)?(r.data.error=!1,a.data=t,a.hideme=!1,"infoTraffic"==a.api&&(t=a,e=parseInt(t.data.value),t.class=e<4?"icon-traffic-lights__green":e<8?"icon-traffic-lights__yellow":"icon-traffic-lights__red",t.units=1===e?"social_widget.jam_units_one":1<e&&e<5?"social_widget.jam_units_few":"social_widget.jam_units_many"),r.data.colorScheme=o.colorScheme(),n([a.title,a.units]).then(function(t){a.title=t[a.title],a.units=t[a.units]})):a.hideme=!0},function(t){r.data.error=t})}if(!this.flag)for(var i=0;i<this.data.informers.length;i++)a(this.data.informers[i])}]),angular.module("mosapp.audio.player",[]).directive("mosAudioPlayer",["UrlSrvc","APsrvc","$rootScope",function(w,e,t){return{restrict:"A",link:function(v,b,y,t){v.initPlayer=function(){e.playerLoad({}).then(function(t){v.createPlayer()},function(t){})},v.initPlayer(),v.createPlayer=function(){v.audioPlay=y.audioPlay,v.audioFormat=y.audioFormat,v.audioHref=y.src||y.audioHref,v.audioVolum=y.audioVolum;var t,e=$(b),a=$('<div class="audioplayer"></div>').prependTo(e),o=e.find(".title").text(),n={},r="",i=e.attr("id")?e.attr("id"):"a"+(new Date).getTime();e.find(".media a").each(function(t){$(this);r+=0<t?","+v.audioFormat:v.audioFormat,n[v.audioFormat]=v.audioHref}),e.data("width")&&e.data("width"),e.data("autoplay")&&e.data("autoplay"),e.data("mute")&&e.data("mute");v.audioVolum?(t=v.audioVolum,null!=localStorage.getItem("volume")&&(t=localStorage.getItem("volume"))):t=.6;$('<div id="container_'+i+'" class="nota_audio"><div class="nota_type-single"><div id="notaplayer_'+i+'" class="nota_jplayer"></div><div class="nota_gui"><div class="nota_interface"><div class="nota_title-container"><div class="nota_title">'+o+'</div></div><div class="nota_progress-container"><div class="nota_progress jp-progress-slider"><div class="nota_seek-bar"><div class="nota_play-bar"><div class="nota_time-container"><span class="nota_current-time"></span></div><a href="#" class="ui-slider-range"></a></div></div></div><div class="nota_time-tooltip"><span>00:00</span><i></i></div></div><div class="nota_controls-holder"><div class="nota_controls"><a href="javascript:;" class="nota_play" tabindex="1"><span class="icon-play_black">воспр.</span></a><a href="javascript:;" class="nota_pause" tabindex="1"><span class="icon-pause_black">пауза</span></a><a href="javascript:;" class="nota_stop" tabindex="1"><span  class="icon-pause_black">стоп</span></a><div class="nota_volume-controls"><a href="javascript:;" class="nota_mute" tabindex="1" title="выкл."><span class="icon-mute">выкл.</span></a><a href="javascript:;" class="nota_unmute" tabindex="1" title="вкл."><span class="icon-unmute">вкл.</span></a><a href="javascript:;" class="nota_volume-max" tabindex="1" title="max volume"><span class="icon-mute">вжарить</span></a><div class="nota_volume-bar"><div class="nota_volume-bar-value"><i></i><i></i><i></i><i></i><i></i></div></div></div></div></div></div></div><div class="errorlayer"><div class="errorstatus"></div></div><div class="waitinglayer"><div class="waitingstatus">Подождите, загрузка...</div></div><div class="nota_no-solution"><span>Нужен плагин</span>Для воспроизведения аудио вам нужно обновить браузер или <a href="http://get.adobe.com/flashplayer/" target="_blank">Flash plugin</a>.</div></div></div>').appendTo(a);var s,c=0,l=0,u=0,m=0,d=0,p=0,g=a.find(".errorlayer"),h=g.find(".errorstatus"),f=a.find(".waitinglayer");"apready"!=a.data("apready")&&$("#notaplayer_"+i).jPlayer({ready:function(t){var e=$(this);e.jPlayer("setMedia",n),a.data("apready","apready"),v.autoPlay&&e.jPlayer("play",0)},loadedmetadata:function(t){},timeupdate:function(t){},error:function(t){var e=$(this);t.jPlayer.status.currentTime!=undefined&&0<t.jPlayer.status.currentTime&&(c=t.jPlayer.status.currentTime,l=t.jPlayer.status.currentPercentRelative,u=t.jPlayer.status.currentPercentAbsolute,m=t.jPlayer.status.currentTime,d=t.jPlayer.status.duration,p=t.jPlayer.status.remaining),"play"==s&&(window.setTimeout(function(){t.jPlayer.status.currentPercentRelative=l,t.jPlayer.status.currentPercentAbsolute=u,t.jPlayer.status.currentTime=m,t.jPlayer.status.duration=d,t.jPlayer.status.remaining=p,g.css("display",""),e.jPlayer("play",c)},1e4),g.css("display","block"),h.html("Соединение с сервером прервано.<br>Восстановление соединения..."))},play:function(t){s="play";var e=$(this);0<c&&e.jPlayer("play",c)},pause:function(){s="pause"},stop:function(){s="stop"},waiting:function(){f.css("display","block")},canplay:function(){f.css("display","")},seeking:function(t){c=t.jPlayer.status.currentTime},swfPath:w.jsPath("jplayer/"),errorAlerts:!1,cssSelectorAncestor:"#container_"+i,cssSelector:{play:".nota_play",pause:".nota_pause",stop:".nota_stop",seekBar:".nota_seek-bar",playBar:".nota_play-bar",mute:".nota_mute",unmute:".nota_unmute",volumeBar:".nota_volume-bar",volumeBarValue:".nota_volume-bar-value",volumeMax:".nota_volume-max",currentTime:".nota_current-time",duration:".nota_duration",fullScreen:".nota_full-screen",restoreScreen:".nota_restore-screen",repeat:".nota_repeat",repeatOff:".nota_repeat-off",gui:".nota_gui",noSolution:".nota_no-solution"},volumechange:function(t){t=t.jPlayer.options.volume;localStorage.setItem("volume",t)},volume:t,supplied:r,wmode:"window",smoothPlayBar:!1,keyEnabled:!1})}},scope:{audioFormat:"@",audioHref:"@",audioVolum:"@",autoPlay:"="},templateUrl:w.tmplPath("audioPlayer/audioPlayer.tpl.html")}}]),angular.module("mosapp.filters.containers",[]).directive("containerRatio",["$timeout",function(t){return{restrict:"A",link:function(a,t,e){for(var o="containerRatio"+(new Date).getTime()+(9998*Math.random()+1),n=(t.on("$destroy",function(){$(window).off("resize."+o),a.$destroy()}),a.attrParams=e.containerRatio,a.attrParams=a.attrParams.split(":"),a.params={},a.attrParams.length);n--;){var r=a.attrParams[n].split("|");a.params[r[0]]=r[1]}a.getRatio=function(){var t=document.documentElement.clientWidth;return t?1170<t?"e":970<t?"d":750<t?"c":463<t?"b":"a":"a"},a.setElementSize=function(){a.ratio=a.getRatio(),t.height(t.width()*a.params[a.ratio])},a.setElementSize(),a.$watch(function(){return t.width()},function(t,e){t!==e&&(a.t&&clearTimeout(a.t),a.t=setTimeout(function(){a.setElementSize()},50))})},scope:{containerRatio:"@"}}}]),angular.module("mosapp.filters.imageSrc",[]).value("imageSet",{defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",ratioMask:"x1_",size:{s:"small",m:"middle",b:"big"}}).service("imgSrvc",["mosconfig",function(e){this.isMarkupImage=function(t){return-1<t.indexOf("%markup_images_dir%")?t.replace("%markup_images_dir%",e.imagesPath):t},this.testSrc=function(t){return""!==t&&t},this.testObj=function(t,e){return!!(angular.isObject(t)&&angular.isObject(t[e])&&angular.isDefined(t[e].src)&&this.testSrc(t[e].src))&&t[e].src}}]).filter("imgThumb",["imgSrvc","imageSet",function(a,o){return function(t){var e=o.defaultImage;return angular.isObject(t)?angular.isDefined(t.src)&&a.testSrc(t.src)?a.isMarkupImage(t.src):(t=a.testObj(t,"thumb")||a.testObj(t,"small")||a.testObj(t,"middle")||a.testObj(t,"big"))?a.isMarkupImage(t):e:e}}]).filter("imgShow",["imgSrvc","imageSet",function(a,o){return function(t){var e=o.defaultImage;return angular.isObject(t)?angular.isDefined(t.src)&&a.testSrc(t.src)?a.isMarkupImage(t.src):(t=a.testObj(t,"show")||a.testObj(t,"big")||a.testObj(t,"original"))?a.isMarkupImage(t):e:e}}]).filter("imgDownload",["imgSrvc","imageSet",function(o,n){return function(t){var e,a=n.defaultImage;return angular.isObject(t)?angular.isDefined(t.src)&&o.testSrc(t.src)?o.isMarkupImage(t.src):(e=(e=o.testObj(t,"download")||o.testObj(t,"show")||o.testObj(t,"big")||o.testObj(t,"original"))&&0===o.isMarkupImage(e).split("/").pop().indexOf("undefined(",0)?o.testObj(t,"show")||o.testObj(t,"big")||o.testObj(t,"original"):e)?o.isMarkupImage(e):a:a}}]).filter("imageSrc",["imgSrvc","imageSet",function(a,o){return function(t){var e=o.defaultImage;return angular.isObject(t)?angular.isDefined(t.src)&&a.testSrc(t.src)?a.isMarkupImage(t.src):(t=a.testObj(t,"small")||a.testObj(t,"middle")||a.testObj(t,"big"))?a.isMarkupImage(t):e:e}}]).filter("imageSrcBig",["imgSrvc","imageSet",function(a,o){return function(t){var e=o.defaultImage;return angular.isObject(t)?angular.isDefined(t.src)&&a.testSrc(t.src)?a.isMarkupImage(t.src):(t=device.mobile()?a.testObj(t,"small")||a.testObj(t,"middle")||a.testObj(t,"big"):device.tablet()?a.testObj(t,"middle")||a.testObj(t,"big")||a.testObj(t,"small"):a.testObj(t,"big")||a.testObj(t,"middle")||a.testObj(t,"small"))?a.isMarkupImage(t):e:e}}]).filter("imageSrcMiddle",["imgSrvc","imageSet",function(a,o){return function(t){var e=o.defaultImage;return angular.isObject(t)?angular.isDefined(t.src)&&a.testSrc(t.src)?a.isMarkupImage(t.src):(t=a.testObj(t,"middle")||a.testObj(t,"big")||a.testObj(t,"small"))?a.isMarkupImage(t):e:e}}]).filter("imageSetSrc",["imgSrvc","imageSet",function(c,l){return function(t,e,a,o,n,r){var i=l.defaultImage,s=document.documentElement.clientWidth,r=s?1280<s?r:1024<s?n:768<s?o:480<s?a:e:o,n=(r=r.split("|"))[1]||"3",s=r[2]||"m";return angular.isObject(t)?angular.isDefined(t.src)&&c.testSrc(t.src)?c.isMarkupImage(t.src):(a=c.testObj(t,n+l.ratioMask+s)||c.testObj(t,l.size[s]))?c.isMarkupImage(a):i:i}}]).filter("imageSrcOriginal",["imgSrvc","imageSet",function(a,o){return function(t){var e=o.defaultImage;return angular.isObject(t)?angular.isDefined(t.src)&&a.testSrc(t.src)?a.isMarkupImage(t.src):(t=a.testObj(t,"original")||a.testObj(t,"big")||a.testObj(t,"middle")||a.testObj(t,"small"))?a.isMarkupImage(t):e:e}}]).filter("imgFileName",["imgSrvc",function(o){return function(t){var e="Moscow.jpg",a=angular.isObject(t)&&(a=angular.isDefined(t.src)&&o.testSrc(t.src)?o.isMarkupImage(t.src):o.isMarkupImage(o.testObj(t,"original")))?a.split("/").pop():e;return a}}]).directive("fixHeadImage",[function(){return{restrict:"A",scope:{},link:function(o,t){t.on("$destroy",function(){o.$destroy()}),o.EL=$(t),o.HDR=$(".b-header.attached"),o.WND=$(window),o.WND.on("scroll",function(){var t=o.EL.offset().top,e=o.HDR.length?o.HDR.height():0,a=t-e<(a=o.WND.scrollTop())?a+e-t:0;o.EL.css({"background-position":"center "+a+"px"})})}}}]).directive("imageSetElement",["imgSrvc","imageSet","$timeout","toolsSrvc","loader",function(i,s,t,e,c){return{restrict:"A",link:function(n,r){r.on("$destroy",function(){n.$destroy()}),n.removeLoader=function(){var t=r;n.loaderType&&(t={loaderType:n.loaderType,elems:r}),c.switchOff(t)},n.firstStart=!0,n.getSrc=function(){var t=s.defaultImage,e=r.width(),a=r.height(),o=(n.firstStart&&(o=r,n.loaderType&&(o={loaderType:n.loaderType,elems:r}),c.switchOn(o)),Math.round(e/a)),a=(o=(o=4<o?4:o)<1?1:o,800<e?"b":480<e?"m":"s");return angular.isObject(n.imageSetElement)?angular.isDefined(n.imageSetElement.src)&&i.testSrc(n.imageSetElement.src)?i.isMarkupImage(n.imageSetElement.src):(e=i.testObj(n.imageSetElement,o+s.ratioMask+a)||i.testObj(n.imageSetElement,s.size[a]))?i.isMarkupImage(e):t:t},n.setBackground=function(){n.firstStart&&(n.firstStart=!1,e.hideContentArea(angular.element(r))),n.removeLoader(),r.css("background-image",'url("'+n.img.src+'")'),e.showContentArea(angular.element(r))},n.loadBackground=function(){n.img=new Image,n.img.src=n.getSrc(),angular.element(n.img).on("load",n.setBackground).on("error",n.removeLoader)},t(function(){n.childImgEl=r.children("img"),n.childImgEl.length&&n.childImgEl[0]?n.$watch(function(){return n.childImgEl[0].src},function(){t.cancel(n.loadBGTimer),n.loadBGTimer=t(function(){n.loadBackground()},1e3)}):(n.loadBackground(),n.enableWatch&&(n.parentNode=angular.element(r[0].parentNode),n.$watch(function(){return{width:r.width(),height:r.height()}},function(t,e){t.width===e.width&&t.height===e.height||n.loadBackground()},!0)))})},scope:{imageSetElement:"=",loadHeight:"@",enableWatch:"@",loaderType:"@"}}}]).directive("imgSpacer",[function(){return{restrict:"A",link:function(t,e,a){for(var o="imgSpacer"+(new Date).getTime()+(9998*Math.random()+1),n=(e.on("$destroy",function(){$(window).off("resize."+o),t.$destroy()}),t.attrParams=a.imgSpacer,t.attrParams=t.attrParams.split(":"),t.params={},t.attrParams.length);n--;){var r=t.attrParams[n].split("|");t.params[r[0]]=r[1]}t.images={"1x1":"data:image/gif;base64,R0lGODlhDwAPAIAAAP///wAAACH5BAEAAAAALAAAAAAPAA8AAAINhI+py+0Po5y02otnAQA7","2x1":"data:image/gif;base64,R0lGODlhHgAPAIAAAP///wAAACH5BAEAAAAALAAAAAAeAA8AAAIThI+py+0Po5y02ouz3rz7D4ZTAQA7","3x1":"data:image/gif;base64,R0lGODlhLQAPAIAAAP///wAAACH5BAEAAAAALAAAAAAtAA8AAAIYhI+py+0Po5y02ouz3rz7D4biSJbmiTYFADs=","4x1":"data:image/gif;base64,R0lGODlhPAAPAIAAAP///wAAACH5BAEAAAAALAAAAAA8AA8AAAIchI+py+0Po5y02ouz3rz7D4biSJbmiabqyrZrAQA7"},t.rewriteSet=function(){t.w=document.documentElement.clientWidth,t.set="a",t.w&&(t.set="a",463<t.w&&(t.set="b"),750<t.w&&(t.set="c"),970<t.w&&(t.set="d"),1170<t.w&&(t.set="e")),e[0].src=t.images[t.params[t.set]+"x1"],e[0].style.width="100%",e[0].style.height="auto"},t.rewriteSet(),$(window).on("resize."+o,function(){t.t&&clearTimeout(t.t),t.t=setTimeout(function(){t.rewriteSet()},Math.floor(400*Math.random())+100)})},scope:{imgSpacer:"@"}}}]).directive("imgRatio",["mosconfig","$timeout","imgSrvc","imageSet","toolsSrvc","loader",function(t,i,s,c,l,u){return{restrict:"A",link:function(n,a,e){for(var t="imgRatio"+(new Date).getTime()+(9998*Math.random()+1),o=(a.on("$destroy",function(){$(window).off("resize."+t),n.$destroy()}),n.images={"1x1":"data:image/gif;base64,R0lGODlhDwAPAIAAAP///wAAACH5BAEAAAAALAAAAAAPAA8AAAINhI+py+0Po5y02otnAQA7","2x1":"data:image/gif;base64,R0lGODlhHgAPAIAAAP///wAAACH5BAEAAAAALAAAAAAeAA8AAAIThI+py+0Po5y02ouz3rz7D4ZTAQA7","3x1":"data:image/gif;base64,R0lGODlhLQAPAIAAAP///wAAACH5BAEAAAAALAAAAAAtAA8AAAIYhI+py+0Po5y02ouz3rz7D4biSJbmiTYFADs=","4x1":"data:image/gif;base64,R0lGODlhPAAPAIAAAP///wAAACH5BAEAAAAALAAAAAA8AA8AAAIchI+py+0Po5y02ouz3rz7D4biSJbmiabqyrZrAQA7"},n.noAnimation="true"===e.noAnimation,n.attrParams=e.imgRatio,n.attrParams=n.attrParams.split(":"),n.params={},n.attrParams.length);o--;){var r=n.attrParams[o].split("|");n.params[r[0]]=r[1]}n.parentNode=angular.element(a[0].parentNode),n.removeLoader=function(){u.switchOff(n.parentNode[0])},n.firstStart=!0,n.getSrc=function(t){var e=n.images[t+"x1"],a=n.parentNode.width(),o=(!n.noAnimation&&n.firstStart&&u.switchOn(n.parentNode[0]),800<a?"b":480<a?"m":"s");return n.parentNode.height(a/t),angular.isObject(n.imgSource)?angular.isDefined(n.imgSource.src)&&s.testSrc(n.imgSource.src)?(a=s.isMarkupImage(n.imgSource.src),/^(\/)|(http(s):\/\/)/.test(a)?a:"/"+a):(a=s.testObj(n.imgSource,t+c.ratioMask+o)||s.testObj(n.imgSource,c.size[o]))?s.isMarkupImage(a):e:e},n.restoreStyle=function(t){n.needForRestore=!1,i.cancel(n.needForRestoreTimer),n.noAnimation||n.removeLoader(),!n.noAnimation&&n.firstStart&&(n.firstStart=!1,l.hideContentArea(n.parentNode)),a[0].src=t,a[0].style.height="auto",n.noAnimation||l.showContentArea(n.parentNode)},n.brokenImageSrc=function(t){e.setBrokenImageSrc&&n.setBrokenImageSrc(t)},n.rewriteSet=function(){n.needForRestore=!0,a[0].style.width="100%";var t=new Image,e=n.params[n.ratio];t.src=n.getSrc(e),n.noAnimation&&(a[0].src=t.src),angular.element(t).on("load",function(){n.needForRestore&&(n.brokenImageSrc(!1),n.restoreStyle(t.src,e))}),angular.element(t).on("error",function(){t.src=n.images[e+"x1"],n.needForRestore&&(n.brokenImageSrc(!0),n.restoreStyle(t.src,e))}),n.needForRestoreTimer=i(function(){n.needForRestore&&(n.brokenImageSrc(!1),n.restoreStyle(t.src,e))},1e4)},n.getRatio=function(){var t=document.documentElement.clientWidth;return t?1170<t?"e":970<t?"d":750<t?"c":463<t?"b":"a":"a"},n.ratio=n.getRatio(),n.rewriteSet(),n.$watch(function(){return n.parentNode.width()},function(t,e){t!==e&&(n.ratio=n.getRatio(),n.parentNode.css({height:t/n.params[n.ratio],overflow:"hidden"}),a[0].style.height="100%",n.t&&clearTimeout(n.t),n.t=setTimeout(function(){n.rewriteSet()},Math.floor(100*Math.random())+50))})},scope:{imgRatio:"@",imgSource:"=",noAnimation:"@",setBrokenImageSrc:"=?"}}}]),angular.module("mosapp.filters.prepareDate",[]).filter("prepareDate",function(){return function(t){var e,a,o=[];return-1===t.indexOf("-")?t:((o=t.split("-"))[0]=o[0].slice(0,o[0].length-1),o[1]=o[1].slice(1,o[1].length+1),o[0]===o[1]?o[0]:(e=o[0].split(" "),a=o[1].split(" "),1===e.length&&1===a.length?t:e[1]===a[1]?e[0]+"–"+a[0]+" "+a[1]:o[0]!==o[1]?t:void 0))}}),angular.module("mosapp.filters.prepareDateSince",[]).filter("prepareDateSince",["$filter",function(n){return function(t,e){var a=new Date,o=a.getTimezoneOffset()/60,o=(a=-3!=o?new Date(a.getTime()+3600*o*1e3+108e5):a).getFullYear();if(new Date(t).getFullYear()<o)return n("date")(t,e+" yyyy");o=Math.abs(t-a.getTime());if(1<=Math.floor(o/864e5))return n("date")(t,e);a=Math.floor(o/36e5);if(0<a&&a<24)return a+n("translate")("prepareDateSince.hours");a=Math.floor(o/6e4);return 0<a&&a<60?a+n("translate")("prepareDateSince.minutes"):0==a?n("translate")("prepareDateSince.momentAgo"):n("date")(t,e)}}]),angular.module("mosapp.sharing",["mosapp.sharing.popup"]).directive("mosSharing",["UrlSrvc","$compile","$modal","$stateParams","apiSrvc","$timeout","mosconfig","LangSrvc",function(s,t,c,e,a,l,p,u){return{restrict:"A",priority:0,link:function(o,t,e){t.on("$destroy",function(){o.$destroy()}),o.$watch(function(){return angular.element(document).width()},function(t){o.direction=e.dynDirect?o.dynDirect:e.direction,o.dynClass="b-sharing-links_type_"+o.direction+" b-sharing-links_behaviour_plain"}),e.socials||(o.lang=u.getCurrentLang(),"ru"===o.lang?o.socials="vkontakte,odnoklassniki":o.socials="vkontakte");var a=["plain","modal"],m="icon-share",d={vkontakte:"vk",facebook:"facebook",twitter:"twitter",odnoklassniki:"odnoklassniki"},n=null;function r(t){return(t=t?String(t).replace(/\&\w{4,5};/gm," "):"")?String(t).replace(/<[^>]+>/gm,""):""}function i(){l(function(){var t="";p.domain&&(t=(t=(0===p.domain.indexOf("http")?"":location.protocol+"//")+p.domain).replace(new RegExp("/$"),""));var s=0===(s=o.image&&""!==o.image&&o.image.indexOf("data:image",0)<0?o.image:(p.imagesPath||"")+"icon200x200.png").indexOf("http")?s:t+"/"+s.replace(new RegExp("^/"),""),c=t+"/"+location.pathname.replace(new RegExp("^/"),""),l=r(o.title||o.text||document.title),u=r(o.description||o.preview||o.title||o.text||document.title),t=("article"!==e.itemType&&0!==window.location.pathname.indexOf("/city/about/symbols/")&&0!==window.location.pathname.indexOf("/city/about/honors/")||(s="https://"+window.location.hostname+"/open-graph/v1/frontend"+window.location.pathname,$('meta[property="og:image:width"]').attr("content","1200"),$('meta[property="og:image:height"]').attr("content","630")),o.letAloneOg||($('meta[property="og:url"]').attr("content",c),$('meta[property="og:title"]').attr("content",l),$('meta[property="og:description"]').attr("content",u),$('meta[property="og:image"]').attr("content",s),$('meta[property="og:image:url"]').attr("content",s)),"undefined"===o.showCounter||o.showCounter);o.socials&&o.id&&document.getElementById(o.id)&&(n?n.updateContent({url:c,title:l,description:u,image:s}):n=new Ya.share2(o.id,{content:{url:c,title:l,description:u,image:s},theme:{services:o.socials,counter:t,lang:"ru",bare:!1},hooks:{onready:function(){var n=$("#"+o.id),t=n.find(".ya-share2__icon"),a=o.getSocials(),r=(t.each(function(t,e){$(e).addClass(m).addClass(m+"-"+d[a[t]])}),new Date),i=setInterval(function(){var t=new Date;if(t-r<1e4&&n.find(".ya-share2__item_service_odnoklassniki").find(".ya-share2__link").attr("href","https://connect.ok.ru/dk?st.cmd=WidgetSharePreview&&st.imageUrl="+encodeURIComponent(s)+"&st.description="+encodeURIComponent(u)+"&st.shareUrl="+encodeURIComponent(c)+"&st.title="+encodeURIComponent(l)+"&utm_source=share2"),t-r<6e4)for(var e=n.find(".ya-share2__counter"),a=e.length-1;0<=a;a--){var o=$(e[a]);isNaN(parseInt(o.text()))?isNaN(o.data("count"))?o.removeClass("show-counter"):o.text($(e[a]).data("count")):o.hasClass("show-counter")||(o.css({opacity:0}).addClass("show-counter"),TweenLite.to(o,.75,{opacity:1,ease:Power1.easeOut}))}else clearInterval(i)},1e3)},onshare:function(t){for(var e=$("#"+o.id).find(".ya-share2__counter"),a=e.length-1;0<=a;a--)isNaN($(e[a]).text())||$(e[a]).css({opacity:1}).addClass("show-counter")}}})),o.calculatePos=function(){var t=angular.element(document).height(),e=angular.element(document).find(".b-popup-sharing__body").height();angular.element(document).find(".b-sharing").offset().top;return currentTop=(t-e)/2},o.isModal()&&o.$watch(function(){return angular.element(document).width()},function(t){o.widthShareItem&&(767<t?(angular.element(document).find(".ya-share2__item").attr("style","width: "+o.widthShareItem+"%"),o.calculatePos()):angular.element(document).find(".ya-share2__item").removeAttr("style"))})},10)}o.getSocials=function(){return o.socials.split(",")},o.isModal=function(){return o.type===a[1]||a.indexOf(o.type)<0},o.openPopup=function(t){o.widthShareItem=Math.round(100/o.getSocials().length),o.popup=c({scope:o,template:s.tmplPath("sharingPopup/sharingPopup.tpl.html"),show:!1,prefixClass:"share-modal",backdropAnimation:"am-fade"}),o.popup.$promise.then(function(){o.popup.show(),i()})},o.isModal()&&angular.element(window).on("click",function(t){angular.element(document).find(t.target).hasClass("am-fade")&&o.closePopup()}),o.closePopup=function(){n=null,o.popup.hide()},o.$watch("text",function(t){t&&!o.isModal()&&i()}),o.$watch("image",function(t){t&&!o.isModal()&&i()}),i()},scope:{id:"@",type:"@",socials:"@",direction:"@",dynDirect:"=",image:"@",text:"@",showCounter:"=",title:"@",preview:"@",description:"@",letAloneOg:"="},templateUrl:s.tmplPath("sharing/sharing.tpl.html")}}]),angular.module("mosapp.sharing.popup",[]).directive("mosSharingPopup",["UrlSrvc","$compile","$modal","$stateParams","apiSrvc","$timeout",function(t,e,a,o,n,r){return{restrict:"A",link:function(t,e,a){},scope:{},templateUrl:t.tmplPath("sharingPopup/sharingPopup.tpl.html")}}]),angular.module("mosapp.banner",[]).directive("mosBanner",["UrlSrvc","apiSrvc","mosconfig","$sce",function(t,e,n,r){return{restrict:"A",scope:{},link:function(e,t,a,o){try{e.flagon=n.insertionHeader.current,"on"===e.flagon&&(e.path=r.trustAsResourceUrl(n.insertionHeader.path))}catch(t){e.flagon="off"}},templateUrl:t.tmplPath("banner/banner.tpl.html")}}]),angular.module("mosapp.mosError",["mosapp.filters.imageSrc","ngSanitize"]).filter("to_trusted",["$sce",function(e){return function(t){return e.trustAsHtml(t)}}]).directive("mosError",["UrlSrvc","apiSrvc","toolsSrvc","$state","$stateParams","$timeout","libsLoader","LangSrvc","headmetaSrvc","$translate",function(t,a,o,e,n,r,i,s,c,l){return{scope:{mosError:"="},link:function(e){i.get({js:"error/index.js",css:"error/index.css",id:"error-app.js",api:"Error"});["msapplication-tap-highlight","fb:pages","og:url","og:title","og:type","og:description","og:image","og:site_name","twitter:card"].forEach(function(t){c.removeMetaTag(t)}),l("mosError.errorMessage_"+e.mosError).then(function(t){o.setTitleClean(t)}),e.$watch("mosError",function(t){t!=undefined&&a.getData("mosError","page",{code:e.mosError},!0).then(function(t){e.pageInfo=t,r(function(){"function"==typeof window.phantomJsError&&window.phantomJsError(e.mosError)})})}),e.lang=s.getCurrentLang(),e.appId="en"===e.lang?"app-en":"app",e.isClientError="4"===e.mosError.toString()[0],e.showSearch=!("en"!==e.lang&&"ru"!==e.lang||!e.isClientError),"404"==e.mosError&&o.statCounter({metrika:{TARGET_NAME:"error_404"}})},templateUrl:t.tmplPath("mosError/mosError.tpl.html")}}]),angular.module("mosapp.aboutmoscow.main",[]).directive("aboutMoscowMain",["UrlSrvc","LangSrvc","metaConfig","toolsSrvc","mosconfig","$timeout",function(n,r,t,e,a,i){return{restrict:"A",scope:{},link:function(a,t,e,o){a.lang=r.getCurrentLang(),a.extconts=n.getBanners("aboutMoscow",a.lang),a.page={},a.scrollTo=function(t){t=t||0,TweenLite.to(window,1,{scrollTo:{y:t},ease:Power1.easeOut,onComplete:function(){}})},i(a.scrollTo),a.hideMenu=!1,t.on("click",function(t){a.hideMenu=!0,a.target=t}),a.findAndLoadItemPage=function(){setTimeout(function(){var t,e;a.activePage=location.pathname,angular.element(document).find(".lt-ie10").length&&(e=location.href,t=location.pathname,e=e.slice(e.indexOf(t)),a.activePage=e,a.IE9="/#!/",a.key="/",a.activePage=a.activePage.replace(a.IE9,a.key)),a.page.honor!=a.activePage&&-1<a.activePage.indexOf(a.page.honor)&&(a.activePage=a.page.honorItem),a.page.symbols!=a.activePage&&-1<a.activePage.indexOf(a.page.symbols)&&(a.activePage=a.page.symbolsItem),a.page.head!=a.activePage&&-1<a.activePage.indexOf(a.page.head)&&(a.activePage=a.page.headItem)},300)},a.$watch("page",function(t){angular.isObject(t)&&0<Object.keys(t).length&&(a.findAndLoadItemPage(),a.$on("$stateChangeSuccess",function(){a.findAndLoadItemPage()}))},!0),a.activePage=location.pathname},templateUrl:n.tmplPath("aboutMoscowMain/aboutMoscowMain.tpl.html")}}]),angular.module("mosapp.aboutmoscow.plan",[]).directive("aboutMoscowPlan",["UrlSrvc","apiSrvc","$state","$stateParams","$compile","metaConfig","toolsSrvc","mosconfig","LangSrvc","$timeout",function(t,o,e,a,r,i,s,c,l,u){return{restrict:"A",scope:{rootApi:"@",rootApiSection:"@"},link:function(n,e,t,a){n.lang=l.getCurrentLang(),n.sharingDirection="vertical",n.$watch(function(){return s.colorScheme()},function(t){n.colorScheme=t}),n.scrollTo=function(t){t=t||0,TweenLite.to(window,1,{scrollTo:{y:t},ease:Power1.easeOut,onComplete:function(){}})},u(n.scrollTo),i.init().then(function(){s.setMeta(n,i.config,"plan"),s.setTitle(i.config.plan.title,i.config.plan.section)}),n.imagesDir=c.imagesPath,n.parseImagesDir=function(t){for(var e=0,a="%markup_images_dir%";;){var o=t.indexOf(a,e);if(!(-1<o))return t;e=o+1,t=t.replace(a,n.imagesDir)}},o.getData(n.rootApi,n.rootApiSection,{},!0,e).then(function(t){t.id?(n.mosError=undefined,t.text=t.text.replace(/(<img)/g,"$1 data-ng-class=\"{'grayscale':colorScheme=='contrast'}\""),t.text=n.parseImagesDir(t.text),t.text=r(t.text)(n),n.items=t,e.find(".about-plan__text").append(n.items.text)):n.mosError=404},function(t){n.mosError=t.code})},templateUrl:t.tmplPath("aboutMoscowPlan/aboutMoscowPlan.tpl.html")}}]),angular.module("mosapp.aboutmoscow.honors",[]).directive("aboutMoscowHonors",["UrlSrvc","apiSrvc","$state","$stateParams","metaConfig","toolsSrvc","$timeout",function(t,r,e,a,i,s,c){return{restrict:"A",scope:{rootApi:"@",rootApiSection:"@",rootApiSectionGroups:"@"},link:function(o,n,t,e){o.scrollTo=function(t){t=t||0,TweenLite.to(window,1,{scrollTo:{y:t},ease:Power1.easeOut,onComplete:function(){}})},c(o.scrollTo),i.init().then(function(){s.setMeta(o,i.config,"honors"),s.setTitle(i.config.honors.title,i.config.honors.section)}),o.$watch(function(){return s.colorScheme()},function(t){o.colorScheme=t}),o.honors=[],o.get=function(t,e,a){return r.getData(t,e,a,!0,n)},o.get(o.rootApi,o.rootApiSectionGroups,{}).then(function(t){angular.isArray(t.items)&&t.items.length?(o.mosError=undefined,o.groups=t.items,o.groups.forEach(function(t){var a;a=t,o.get(o.rootApi,o.rootApiSection,{filter:{group_id:a.id}}).then(function(t){if(angular.isArray(t.items)&&t.items.length){o.mosError=undefined;for(var e=0;e<t.items.length;e++)angular.isObject(t.items[e].icon)&&(t.items[e].icon.metaImage=s.getMetaForImage(t.items[e].title));o.honors.push({title:a.title,items:t.items})}},function(t){})})):o.mosError=404},function(t){o.mosError=t.code})},templateUrl:t.tmplPath("aboutMoscowHonors/aboutMoscowHonors.tpl.html")}}]),angular.module("mosapp.aboutmoscow.honors.item",[]).directive("aboutMoscowHonorsItem",["UrlSrvc","apiSrvc","$state","$stateParams","$compile","toolsSrvc","metaConfig","$timeout",function(t,n,r,i,s,c,l,u){return{restrict:"A",scope:{rootApi:"@",rootApiSection:"@"},link:function(e,a,t,o){if(!i.id)return r.go("home.honors",{},{reload:!0});e.scrollTo=function(t){t=t||0,TweenLite.to(window,1,{scrollTo:{y:t},ease:Power1.easeOut,onComplete:function(){}})},u(e.scrollTo),e.$watch(function(){return c.colorScheme()},function(t){e.colorScheme=t}),n.getData(e.rootApi,e.rootApiSection,{id:i.id},!0,a).then(function(t){t.id?(e.mosError=undefined,t.description=t.description.replace(/(<img)/g,"$1 data-ng-class=\"{'grayscale':colorScheme=='contrast'}\""),t.description=s(t.description)(e),e.items=t,e.metaImage=c.getMetaForImage(e.items.title||e.items.name),a.find(".honor-content__text").append(e.items.description),l.init().then(function(){c.setTitle(e.items.title,l.config.symbols.title,l.config.symbols.section)})):e.mosError=404},function(t){e.mosError=t.code})},templateUrl:t.tmplPath("aboutMoscowHonorsItem/aboutMoscowHonorsItem.tpl.html")}}]),angular.module("mosapp.aboutmoscow.symbols",[]).directive("aboutMoscowSymbols",["UrlSrvc","apiSrvc","$state","$stateParams","metaConfig","toolsSrvc","$timeout",function(t,r,e,a,i,s,c){return{restrict:"A",scope:{rootApi:"@",rootApiSection:"@",rootApiSectionGroups:"@"},link:function(o,n,t,e){i.init().then(function(){s.setMeta(o,i.config,"symbols"),s.setTitle(i.config.symbols.title,i.config.symbols.section)}),o.$watch(function(){return s.colorScheme()},function(t){o.colorScheme=t}),o.scrollTo=function(t){t=t||0,TweenLite.to(window,1,{scrollTo:{y:t},ease:Power1.easeOut,onComplete:function(){}})},c(o.scrollTo),o.symbols=[],o.get=function(t,e,a){return r.getData(t,e,a,!0,n)},o.get(o.rootApi,o.rootApiSectionGroups,{}).then(function(t){angular.isArray(t.items)&&t.items.length?(o.mosError=undefined,o.groups=t.items,o.groups.forEach(function(t){var a;a=t,o.get(o.rootApi,o.rootApiSection,{filter:{group_id:a.id}}).then(function(t){if(angular.isArray(t.items)&&t.items.length){o.mosError=undefined;for(var e=0;e<t.items.length;e++)angular.isObject(t.items[e].icon)&&(t.items[e].icon.metaImage=s.getMetaForImage(t.items[e].title));o.symbols.push({title:a.title,items:t.items})}},function(t){})})):o.mosError=404},function(t){o.mosError=t.code})},templateUrl:t.tmplPath("aboutMoscowSymbols/aboutMoscowSymbols.tpl.html")}}]),angular.module("mosapp.aboutmoscow.symbols.head",[]).directive("aboutMoscowSymbolsHead",["UrlSrvc","apiSrvc","$state","$stateParams","metaConfig","toolsSrvc","$timeout",function(t,n,e,a,r,i,s){return{restrict:"A",scope:{rootApi:"@",rootApiSection:"@"},link:function(e,t,a,o){e.$watch(function(){return i.colorScheme()},function(t){e.colorScheme=t}),e.scrollTo=function(t){t=t||0,TweenLite.to(window,1,{scrollTo:{y:t},ease:Power1.easeOut,onComplete:function(){}})},s(e.scrollTo),r.init().then(function(){i.setMeta(e,r.config,"head"),i.setTitle(r.config.head.title,r.config.head.section)}),n.getData(e.rootApi,e.rootApiSection,{},!0,t).then(function(t){angular.isArray(t.items)&&t.items.length?(e.mosError=undefined,e.persons=t.items):e.mosError=404},function(t){e.mosError=t.code})},templateUrl:t.tmplPath("aboutMoscowSymbolsHead/aboutMoscowSymbolsHead.tpl.html")}}]),angular.module("mosapp.aboutmoscow.symbols.head.item",[]).directive("aboutMoscowSymbolsHeadItem",["UrlSrvc","apiSrvc","$state","$stateParams","toolsSrvc","$compile","metaConfig","$timeout",function(t,n,r,i,s,c,l,u){return{restrict:"A",scope:{rootApi:"@",rootApiSection:"@"},link:function(e,a,t,o){if(!i.id)return r.go("home.heads",{},{reload:!0});e.scrollTo=function(t){t=t||0,TweenLite.to(window,1,{scrollTo:{y:t},ease:Power1.easeOut,onComplete:function(){}})},u(e.scrollTo),e.$watch(function(){return s.colorScheme()},function(t){e.colorScheme=t}),n.getData(e.rootApi,e.rootApiSection,{id:i.id},!0,a).then(function(t){t.id?(e.mosError=undefined,t.biography=t.biography.replace(/(<img)/g,"$1 data-ng-class=\"{'grayscale':colorScheme=='contrast'}\""),t.biography=c(t.biography)(e),e.items=t,a.find(".head-content__text").append(e.items.biography),l.init().then(function(){s.setTitle(e.items.name,l.config.head.title,l.config.head.section)})):e.mosError=404},function(t){e.mosError=t.code})},templateUrl:t.tmplPath("aboutMoscowSymbolsHeadItem/aboutMoscowSymbolsHeadItem.tpl.html")}}]),angular.module("mosapp.aboutmoscow.symbols.item",[]).directive("aboutMoscowSymbolsItem",["UrlSrvc","apiSrvc","$state","$stateParams","toolsSrvc","$compile","metaConfig","$timeout",function(t,n,r,i,s,c,l,u){return{restrict:"A",scope:{rootApi:"@",rootApiSection:"@"},link:function(e,a,t,o){if(!i.id)return r.go("home.symbols",{},{reload:!0});e.scrollTo=function(t){t=t||0,TweenLite.to(window,1,{scrollTo:{y:t},ease:Power1.easeOut,onComplete:function(){}})},u(e.scrollTo),e.$watch(function(){return s.colorScheme()},function(t){e.colorScheme=t}),n.getData(e.rootApi,e.rootApiSection,{id:i.id},!0,a).then(function(t){t.id?(e.mosError=undefined,t.description=t.description.replace(/(<img)/g,"$1 data-ng-class=\"{'grayscale':colorScheme=='contrast'}\""),t.description=c(t.description)(e),e.items=t,e.metaImage=s.getMetaForImage(e.items.title||e.items.name),a.find(".symbol-content__text").append(e.items.description),l.init().then(function(){s.setTitle(e.items.title,l.config.symbols.title,l.config.symbols.section)})):e.mosError=404},function(t){e.mosError=t.code})},templateUrl:t.tmplPath("aboutMoscowSymbolsItem/aboutMoscowSymbolsItem.tpl.html")}}]),angular.module("mosapp.aboutmoscow.navigation",[]).directive("aboutMoscowNavigation",["UrlSrvc","apiSrvc","$state","$stateParams","toolsSrvc",function(t,a,e,o,i){return{restrict:"A",scope:{page:"=",hideMenu:"="},link:function(n,r,t,e){n.$watch("hideMenu",function(t){1==t&&angular.element(document).width()<768&&(r.find(".about-menu").removeClass("about-menu_state_open"),angular.element(document).find(".about-moscow").removeClass("about-moscow_state_open"),n.hideMenu=!1,n.menuItems.forEach(function(t,e){t.nav&&t.nav.forEach(function(t,e){t.current&&n.setTitleFromNdx(0,t.title)}),t.current&&n.setTitleFromNdx(0,t.title)}))}),n.setTitleFromNdx=function(t,e){r.find(".about-menu__link span").eq(t).text(e)},n.toggle=function(){r.find(".about-menu").hasClass("about-menu_state_open")?(r.find(".about-menu").toggleClass("about-menu_state_open"),angular.element(document).find(".about-moscow").toggleClass("about-moscow_state_open")):setTimeout(function(){r.find(".about-menu").toggleClass("about-menu_state_open"),angular.element(document).find(".about-moscow").toggleClass("about-moscow_state_open"),r.find(".about-menu__link span").eq(0).text(n.menuItems[0].title)},350)},n.$watch(function(){return i.colorScheme()},function(t){n.colorScheme=t}),n.setTitleForAdaptive=function(){angular.element(document).width()<768?r.find(".about-menu__link span").eq(0).text(n.currentTitle):r.find(".about-menu__link span").eq(0).text(n.menuItems[0].title)},n.currentMenuItem=location.pathname,n.findAndSetActiveItemPage=function(){var t,e;n.currentMenuItem=location.pathname,angular.element(document).find(".lt-ie10").length&&(e=location.href,t=location.pathname,e=e.slice(e.indexOf(t)),n.currentMenuItem=e,n.IE9="/#!/",n.key="/",n.currentMenuItem=n.currentMenuItem.replace(n.IE9,n.key)),n.page.honor!=n.currentMenuItem&&-1<n.currentMenuItem.indexOf(n.page.honor)&&(n.currentMenuItem=n.page.honor),n.page.symbols!=n.currentMenuItem&&-1<n.currentMenuItem.indexOf(n.page.symbols)&&(n.currentMenuItem=n.page.symbols),n.page.head!=n.currentMenuItem&&-1<n.currentMenuItem.indexOf(n.page.head)&&(n.currentMenuItem=n.page.head)},n.currentFirstInc=0,n.toggleList=function(t,e,a,o){!r.find(".about-menu").hasClass("about-menu_state_open")&&angular.element(document).width()<768&&o.preventDefault(),r.find(".about-menu").hasClass("about-menu_state_open")&&(n.stopedEvent=!0),setTimeout(function(){0==e?(n.currentTitle==n.menuItems[0].title&&(n.currentFirstInc++,n.menuItems[0].opened=!0),angular.element(document).width()<768&&1<n.currentFirstInc&&(n.menuItems[0].opened=!1,r.find(".about-menu").removeClass("about-menu_state_open"),angular.element(document).find(".about-moscow").removeClass("about-moscow_state_open"),n.currentFirstInc=0)):(n.currentFirstInc=0,n.menuItems[0].opened=!1),n.stopedEvent=!1},400)},n.clearCurrent=function(){n.menuItems.forEach(function(t){t.nav&&t.nav.forEach(function(t){delete t.current}),delete t.current})},n.setActiveMenuItem=function(){n.menuItems.forEach(function(t,e){delete t.current,t.url==n.currentMenuItem&&(n.clearCurrent(),t.current=!0,0==e&&(n.menuItems[0].opened=!0),n.currentTitle=t.title,n.setTitleForAdaptive()),t.nav&&t.nav.forEach(function(t){delete t.current,t.url==n.currentMenuItem&&(t.current=!0,n.currentTitle=t.title,n.menuItems[0].opened=!0,n.setTitleForAdaptive())})}),setTimeout(function(){n.setTitleForAdaptive()},300)},a.getData("about","aboutNav",{},!0,r).then(function(t){angular.isArray(t.nav)&&t.nav.length&&(n.menuItems=t.nav,n.menuItems.forEach(function(t){t.nav&&t.nav.forEach(function(t){n.page[t.key]=t.url,t.child&&(n.page[t.child.key]=t.child.url)}),n.page[t.key]=t.url,t.child&&(n.page[t.child.key]=t.child.url)}),n.findAndSetActiveItemPage(),n.setActiveMenuItem(),n.$on("$stateChangeSuccess",function(){setTimeout(function(){n.findAndSetActiveItemPage(),n.setActiveMenuItem(),angular.element(document).width()<768&&(r.find(".about-menu").removeClass("about-menu_state_open"),angular.element(document).find(".about-moscow").removeClass("about-moscow_state_open")),n.$watch(function(){return angular.element(document).width()},function(){n.setTitleForAdaptive()}),n.currentFirstInc=0,n.setTitleForAdaptive()},500)}))},function(t){})},templateUrl:t.tmplPath("aboutMoscowNavigation/aboutMoscowNavigation.tpl.html")}}]),angular.module("mosapp.aboutmoscow.history",[]).directive("aboutMoscowHistory",["UrlSrvc","apiSrvc","$state","$stateParams","$compile","metaConfig","toolsSrvc","mosconfig","$timeout",function(t,o,e,a,r,i,s,c,l){return{restrict:"A",scope:{rootApi:"@",rootApiSection:"@"},link:function(n,e,t,a){n.sharingDirection="vertical",n.imagesDir=c.imagesPath,n.$watch(function(){return s.colorScheme()},function(t){n.colorScheme=t}),n.scrollTo=function(t){t=t||0,TweenLite.to(window,1,{scrollTo:{y:t},ease:Power1.easeOut,onComplete:function(){}})},l(n.scrollTo),n.parseImagesDir=function(t){for(var e=0,a="%markup_images_dir%";;){var o=t.indexOf(a,e);if(!(-1<o))return t;e=o+1,t=t.replace(a,n.imagesDir)}},i.init().then(function(){s.setMeta(n,i.config,"history"),s.setTitle(i.config.history.title,i.config.history.section)}),o.getData(n.rootApi,n.rootApiSection,{},!0,e).then(function(t){t.id?(n.mosError=undefined,t.text=t.text.replace(/(<img)/g,"$1 data-ng-class=\"{'grayscale':colorScheme=='contrast'}\""),t.text=n.parseImagesDir(t.text),t.text=r(t.text)(n),n.items=t,e.find(".about-content__text").append(n.items.text)):n.mosError=404},function(t){n.mosError=t.code})},templateUrl:t.tmplPath("aboutMoscowHistory/aboutMoscowHistory.tpl.html")}}]),angular.module("mosapp.aboutmoscow.documents",[]).directive("aboutDocuments",["UrlSrvc","apiSrvc","$state","$stateParams",function(t,n,e,a){return{restrict:"A",scope:{rootApi:"@",rootApiSection:"@",type:"@"},link:function(e,t,a,o){n.getData(e.rootApi,e.rootApiSection,{},!0,t).then(function(t){angular.isArray(t.items)&&t.items.length&&(e.icon=t.icon,e.docs=t.items)},function(t){})},templateUrl:t.tmplPath("aboutDocuments/aboutDocuments.tpl.html")}}]),angular.module("mosapp").service("APsrvc",["UrlSrvc","$q","$rootScope","$window",function(r,t,i,s){var c={default:"audioPlayer",v4:"audioPlayer_v4"};this.playerLoad=function(n){return t(function(t,e){var a,o=n.skin&&c[n.skin]||c.default;i.audioPlayer?"ready"!==i.audioPlayer.status?(a=document.getElementById("jplayerapiscript"),$(a).on("load",function(){t()})):t():(i.audioPlayer={},i.audioPlayer.status="load",(a=document.createElement("script")).id="jplayerapiscript",a.async="true",document.getElementsByTagName("head")[0].appendChild(a),a.src=r.jsPath("jplayer/jquery.jplayer.min.js"),$(a).on("load",function(){i.audioPlayer.api=s.jPlayer,i.audioPlayer.status="ready",t()}),n.nocss||((a=document.createElement("link")).rel="stylesheet",a.href=r.jsPath("jplayer/skin/"+o+".css"),a.type="text/css",document.getElementsByTagName("head")[0].appendChild(a)))})}}]),angular.module("mosapp").value("apiQueue",[]).value("lastReq",!1).service("apiSrvc",["UrlSrvc","$http","$q","transformRequestAsFormPost","apiQueue","$timeout","loader","lastReq","LangSrvc",function(m,s,e,c,d,l,p,u,n){function g(){u&&(u=!1,l(function(){"function"==typeof window.callPhantom&&window.callPhantom({queue:"isempty"})},100))}s.defaults.headers.common["x-caller-id"]="markup-app",this.sendRequestFromQueue=function t(){var a,o,n,e,r,i=Math.floor(50*Math.random()+25);0<d.length&&(a={},angular.forEach(d[0],function(t,e){a[e]=d[0][e]}),"POST"===a.method?(e=(n=a).header,r=n.notTransform,e={url:n.url,method:"POST",data:n.params,headers:e},r||(e.transformRequest=c),s(e).success(function(t,e){var a;n.showError&&t.error&&(a={title:"Ошибка получения данных из API.",content:t.description,placement:"top",type:"warning",show:!0},t.errorMessage=a),p.switchOff(n.loaderEl),g(),n.resolve(t)}).error(function(t,e){p.switchOff(n.loaderEl),g(),n.reject({content:t,code:e})})):s({url:(o=a).url,method:"GET",params:o.params}).success(function(t,e){var a;o.showError&&t.error&&(a={title:"Ошибка получения данных из API.",content:t.description,placement:"top",type:"warning",show:!0},t.errorMessage=a),o.loaderEl&&!o.loaderEl.dontSwitchOff&&p.switchOff(o.loaderEl),g(),o.resolve(t,e)}).error(function(t,e){p.switchOff(o.loaderEl),g(),o.reject({content:t,code:e})}),d.shift(),0===d.length&&(u=!0)),l(t,i)};new Date;function h(t,e,a,o){return console.error("Object '"+t+"' not found! Check config, please."),p.switchOff(o),("function"==typeof a?a:e)({error:"Object '"+t+"' not found! Check config, please."}),!1}function f(a,t){var o=[];angular.forEach(t,function(t,e){-1<a.indexOf("%"+e+"%")&&(a=a.replace("%"+e+"%",t),o.indexOf(e)<0&&o.push(e))});for(var e=0;e<o.length;e++)delete t[o[e]];return a=-1<a.indexOf("[lang]")?a.replace("[lang]",n.getCurrentLang()):a}this.sendRequestFromQueue(),this.getData=function(n,r,i,s,c){return e(function(t,e){p.switchOn(c);var a=angular.copy(i),o=m.apiPath(n);if(!angular.isObject(o))return h(n,t,e,c);if(!(o=o[r]))return h(n+"."+r,t,e,c);angular.isObject(a);o=f(o,a);d.push({method:"GET",url:o,resolve:t,reject:e,params:a,showError:s,loaderEl:c})})},this.getDataByUrl=function(o,n,r,i){return e(function(t,e){p.switchOn(i);var a=angular.copy(n);if(!o)return h(o,t,e,i);angular.isObject(a);t={method:"GET",url:o=f(o,a),resolve:t,reject:e,params:a,showError:r,loaderEl:i};d.push(t)})},this.getDataCancelable=function(n,r,i,s,c){var l,t=e(function(t,e){p.switchOn(c);var a=angular.copy(i),o=m.apiPath(n);return angular.isObject(o)?(o=o[r])?(angular.isObject(a),o=f(o,a),l={method:"GET",url:o,resolve:t,reject:e,params:a,showError:s,loaderEl:c},void d.push(l)):h(n+"."+r,t,e,c):h(n,t,e,c)});return t.cancel=function(){l.resolve({state:"cancelled"})},t},this.postData=function(n,r,i,s,c,l,u){return e(function(t,e){p.switchOn(c);var a=angular.copy(i),o=m.apiPath(n);if(!angular.isObject(o))return h(n,t,e,c);if(!(o=o[r]))return h(n+"."+r,t,e,c);o=f(o,a);d.push({method:"POST",url:o,resolve:t,reject:e,params:a,showError:s,loaderEl:c,header:l,notTransform:u})})}}]).factory("transformRequestAsFormPost",function(){return function(t,e){e()["Content-Type"]="application/x-www-form-urlencoded; charset=utf-8";var a,o=t;if(!angular.isObject(o))return null===o?"":o.toString();var n,r=[];for(n in o)o.hasOwnProperty(n)&&(a=o[n],r.push(encodeURIComponent(n)+"="+encodeURIComponent(null===a?"":a)));return r.join("&").replace(/%20/g,"+")}}).service("loader",["toolsSrvc",function(a){var n=50,r=.7;function i(t,e){"plainDots"===e.loaderType?(t.addClass("rel"),e.animate&&t.css({height:n+"px",overflow:"hidden"}),t.prepend('<div class="dots-loader-backdrop"></div><div class="dots-loader"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>')):(e="contrast"==a.colorScheme()?"grayscale":"",t.addClass("rel"),t.prepend('<div class="loader"><div class=" '+e+' loader-image"><div class="cssload-progress cssload-float cssload-shadow"><div class="cssload-progress-item"></div></div></div></div>'))}function s(t,e){var a;"plainDots"===e.loaderType?e.animate?(a=t,TweenLite.set(a,{height:""}),TweenLite.from(a,r,{height:n+"px",ease:Power2.easeIn,onComplete:function(){TweenLite.set(a,{height:"",overflow:""}),a.removeClass("rel"),a.find(".dots-loader-backdrop,.dots-loader").remove()}})):(t.removeClass("rel"),t.find(".dots-loader-backdrop,.dots-loader").remove()):(t.removeClass("rel"),t.find(".loader").remove())}function e(t){return t instanceof angular.element||("object"==typeof HTMLElement||"function"==typeof HTMLElement?t instanceof HTMLElement:t&&"object"==typeof o&&null!==t&&1===o.nodeType&&"string"==typeof t.nodeName)}this.switchOn=function(a){var t;a&&(e(a)?(t=angular.element(a)).length&&i(t,a):a.hasOwnProperty("elems")&&(a.elems.hasOwnProperty("length")?a.elems.length&&angular.forEach(a.elems,function(t,e){i(angular.element(t),a),a.elems.length===e&&"function"==typeof a.onSwitchOn&&a.onSwitchOn()}):(i(t=angular.element(a.elems),a),"function"==typeof a.onSwitchOn&&a.onSwitchOn())))},this.switchOff=function(a){var t;a&&(e(a)?(t=angular.element(a)).length&&s(t,a):a.hasOwnProperty("elems")&&(a.elems.hasOwnProperty("length")?a.elems.length&&angular.forEach(a.elems,function(t,e){s(angular.element(t),a),a.elems.length===e&&"function"==typeof a.onSwitchOn&&a.onSwitchOn()}):(s(t=angular.element(a.elems),a),"function"==typeof a.onSwitchOff&&a.onSwitchOff()),"function"==typeof a.onSwitchOff&&a.onSwitchOff()))}}]).service("apiCache",["$q","apiSrvc",function(i,s){var c={};this.getData=function(t,e,a,o,n){var r=t+e+JSON.stringify(a);if(c[r])return i.when(c[r]);return s.getData(t,e,a,o,n).then(function(t){return c[r]=t})}}]),angular.module("mosapp.customisation",[]).service("CustomisationSrvc",[function(){var n={};return{add:function(t,e,a,o){return!n[t]&&(n[t]={name:t,fromWhere:e,options:a,callback:o},n.name)},get:function(t){return n[t]},delete:function(t){return delete n[t]},rewrite:function(t,e,a,o){return n[t]={name:t,fromWhere:e,options:a,callback:o},n[t]}}}]),angular.module("mosapp").service("districtsSrvc",["apiSrvc","$q","UrlSrvc","LangSrvc",function(t,e,a,r){var i=this,o={};function s(t){(t=t||{}).category=t.category||"";var e=(e=a.getLangLink(a.pagePath("search",""))).replace(new RegExp("/$","g"),"");return e=(e+="?category="+t.category)+("&hostApplied=false&page=1&skip_stat=2&q="+(t.query||"")),t.districts&&(e+="&districts="+t.districts),t.areas&&(e+="&areas="+t.areas),e}this.getDistricts=function(){return o.districtsMap?e.when(o.districtsMap):t.getData("newsfeed","directories",{expand:"areas"},!1).then(function(t){var a;return t.items&&t.items.length&&(a={},t.items.forEach(function(t){var e={};t.areas.forEach(function(t){e[t.id]=t}),t.areas=e,a[t.id]=t}),o.districtsMap=a),o.districtsMap},function(){return null})},this.extractDistrictsAndAreasFromMap=function(a,t,o){var n=[],r=[];return angular.forEach(t,function(t){var e=angular.copy(a[t.id]);e&&(e.url=s({districts:e.id,category:o.category,query:o.query}),n.push(e),t.area_ids&&t.area_ids.length&&angular.forEach(t.area_ids,function(t){t=e.areas[t];t&&(t.url=s({districts:e.id,areas:t.id,category:o.category,query:o.query}),r.push(t))}))}),{districts:n,areas:r}},this.handleDistricts=function(e,a,o){o=o||{};var n="ru"===r.getCurrentLang()?"title":"title_en";e&&e.length&&i.getDistricts().then(function(t){t&&(a.districts=[],a.areas=[],a.maxExtra=o.maxExtra||2,t=i.extractDistrictsAndAreasFromMap(t,e,{category:o.category}),a.districts=t.districts.map(function(t){return t.title=t[n],t}),a.areas=t.areas.map(function(t){return t.title=t[n],t}),a.districts.length>a.maxExtra?a.districtsMax=a.maxExtra:a.districtsMax=a.districts.length,a.areas.length>a.maxExtra?a.areasMax=a.maxExtra:a.areasMax=a.areas.length,a.moreClicked=function(t,e){e.widthLT768||(a[t+"Max"]=a[t].length)},a.moreReset=function(t){a[t+"Max"]=a.maxExtra})})}}]),angular.module("mosapp").service("GIS2srvc",["UrlSrvc","$q","$rootScope","$window","mosconfig","$timeout",function(t,a,e,o,n,r){var i={},s="no";this.add=function(t,e){i[t]=e},this.get=function(t){return i[t]},this.loadLibrary=function(){var t,e=a.defer();return"no"!==s?r(function t(){"yes"===s?e.resolve():"loading"===s&&r(t,100)},100):(s="loading",(t=document.createElement("script")).id="GisApi",t.async="true",document.getElementsByTagName("head")[0].appendChild(t),t.src=n["2GisApi"].url,$(t).on("load",function(){window.DG===undefined?(s="no",e.reject("API not found")):(s="yes",e.resolve())})),e.promise}}]),angular.module("mosapp").service("headmetaSrvc",["mosconfig","$timeout","LangSrvc","UrlSrvc","toolsSrvc",function(s,t,c,l,u){var m=this;this.expandWithSiteName=!0,this.reSetMetaTag=function(t,e,a){var o=document.querySelector("head"),n=o.querySelector("meta["+t+'="'+e+'"]');a?(n||(n=document.createElement("meta"),o.appendChild(n)),n.setAttribute(t,e),n.setAttribute("content",a)):n&&n.parentNode.removeChild(n)},this.removeMetaTag=function(t){var e=document.querySelector("head"),a=e.querySelector('meta[property="'+t+'"]');(a=a||e.querySelector('meta[name="'+t+'"]'))&&a.parentNode.removeChild(a)},this.setTitle=function(){for(var t=document.querySelector("head"),e=t.querySelector("title"),a=c.getCurrentLang(),o=s.titleParams||{},n=o.separator||" / ",o=o.siteName[a]||"Сайт Москвы",r=[],i=0;i<arguments.length;i++)r.push(u.htmlToPlaintext(arguments[i]));a=Array.prototype.slice.call(r,0);return a.push(o),e||(e=document.createElement("title"),t.appendChild(e)),e.innerHTML=a.join(n),this},this.setDescription=function(t){if(!t||""==t)return this;t=this.expandWithSiteName?this.expandDataWithSiteName(t):t;return m.reSetMetaTag("name","description",t),this},this.expandDataWithSiteName=function(t){var e=c.getCurrentLang(),e=(s.altParams||{})[e]||"Официальный сайт Мэра Москвы",a=" ";return t+(a="."!==t[t.length-1]?". ":a)+e},this.setKeywords=function(t){t&&""!=t&&m.reSetMetaTag("name","keywords",t)},this.addAmpHtml=function(t){var e=document.querySelector("head"),a=e.querySelector('link[rel="amphtml"]');a&&a.parentNode.removeChild(a),(t.match(/^\/mayor\/telegrams\/[\d]+\/$/)||t.match(/^\/mayor\/interviews\/[\d]+\/$/)||t.match(/^\/mayor\/transcripts\/[\d]+\/$/)||t.match(/^\/mayor\/media\/photo\/[\d]+\//)||t.match(/^\/mayor\/media\/video\/[\d]+\/$/))&&(a=document.createElement("link"),e.appendChild(a),a.setAttribute("rel","amphtml"),a.setAttribute("href","/amp"+t))},this.setPageMeta=function(t,e){if(!t[e])return this;var a,o=l.getMainDomain()||"",n=c.getCurrentLang(),r=(s.altParams||{})[n]||"Официальный сайт Мэра Москвы",i=angular.isObject(t[e].image)&&t[e].image.src?angular.copy(t[e].image):{src:(s.imagesPath||"")+"favicon/icon200x200.png",width:200,height:200,title:r};return i.src=0===i.src.indexOf("http")?i.src:o+"/"+i.src.replace(new RegExp("^/"),""),m.removeMetaTag("og:image"),m.removeMetaTag("og:image:width"),m.removeMetaTag("og:image:height"),m.removeMetaTag("og:image:alt"),"/mayor/themes/"!==window.location.pathname&&"/mayor/biography/"!==window.location.pathname&&0!==window.location.pathname.indexOf("/mayor/transcripts/")&&0!==window.location.pathname.indexOf("/mayor/telegrams/")&&0!==window.location.pathname.indexOf("/mayor/interviews/")&&0!==window.location.pathname.indexOf("/mayor/media/")&&!window.location.pathname.match("^/mayor/themes/[\\d]+/$")||(i.src="https://"+window.location.hostname+"/open-graph/v1/frontend"+window.location.pathname,i.width="1200",i.height="630"),m.reSetMetaTag("property","og:image",i.src),m.reSetMetaTag("property","og:image:url",i.src),m.reSetMetaTag("property","og:image:width",i.width),m.reSetMetaTag("property","og:image:height",i.height),m.reSetMetaTag("property","og:image:alt",i.fullTitle||i.title),m.addAmpHtml(location.pathname),m.reSetMetaTag("property","og:url",o+"/"+location.pathname.replace(new RegExp("^/"),"")),m.reSetMetaTag("property","og:site_name",r),e&&t[e]&&(a=u.htmlToPlaintext(t[e].description),setTimeout(function(){m.reSetMetaTag("property","og:title",u.htmlToPlaintext(t[e].title)),m.reSetMetaTag("property","og:description",a)}),m.setDescription(a),m.setKeywords(t[e].keywords),"article"===t[e].type?(m.reSetMetaTag("property","og:type",t[e].type),m.reSetMetaTag("property","article:publisher",s.linksPath.social[n].facebook),m.reSetMetaTag("property","article:author",s.linksPath.social[n].facebook),isNaN(+t[e].published_time)?m.removeMetaTag("article:published_time"):m.reSetMetaTag("property","article:published_time",moment.unix(+t[e].published_time).utcOffset(3).format()),m.reSetMetaTag("name","twitter:site_name",s.domain.replace("www.","")),m.reSetMetaTag("name","twitter:creator",s.linksPath.social[n].twitter_creator)):(m.removeMetaTag("article:publisher"),m.removeMetaTag("article:author"),m.removeMetaTag("article:published_time"),m.removeMetaTag("twitter:site_name"),m.removeMetaTag("twitter:creator"),m.reSetMetaTag("property","og:type",t[e].type||"website"))),this},this.extractMeta=function(){return{title:document.title,description:u.htmlToPlaintext(this.getContentFor("description")),keywords:this.getContentFor("keywords")}},this.getContentFor=function(t){t=document.querySelector('meta[name="'+t+'"]');return null!==t?t.getAttribute("content"):""},this.withoutSiteName=function(){return this.expandWithSiteName=!1,this},this.withSiteName=function(){return this.expandWithSiteName=!0,this}}]),angular.module("mosapp").service("libsLoader",["UrlSrvc","$q","$window",function(r,e,i){var a={};this.get=function(o){var n,t;return void 0===a[o.id]&&(n={},o.js&&(n.js=e(function(t,e){var a;n.status="load",o.js&&((a=document.createElement("script")).id=o.id,a.async="true"),document.getElementsByTagName("head")[0].appendChild(a),a.src=r.jsPath(o.js),$(a).on("load",function(){o.api&&(n.api=i[o.api]),n.status="ready",t(n)})})),a[o.id]=n,o.css&&((t=document.createElement("link")).rel="stylesheet",t.href=r.jsPath(o.css),t.type="text/css",document.getElementsByTagName("head")[0].appendChild(t))),a[o.id]}}]),angular.module("mosapp").config(["mosconfig","$translateProvider","$translatePartialLoaderProvider","LangSrvcProvider",function(t,e,a,o){e.usePostCompiling(!0),e.useSanitizeValueStrategy("escape"),e.useLoader("$translatePartialLoader",{urlTemplate:t.i18nPath+"{part}/{lang}.json?1677769505234"}),e.preferredLanguage(o.setCurrentLang())}]),angular.module("mosapp").service("opengraphSrvc",["mosconfig","$timeout","LangSrvc","UrlSrvc","toolsSrvc","headmetaSrvc","$location",function(t,e,a,o,n,r,i){this.invalidateWithGlobalMeta=function(){var t=r.extractMeta();return e(function(){r.reSetMetaTag("property","og:title",t.title),r.reSetMetaTag("property","og:description",t.description)}),this},this.passUrl=function(){return r.reSetMetaTag("property","og:url",i.absUrl().replace(new RegExp("all/$"),"")),this}}]),angular.module("mosapp").service("tColumn",["UrlSrvc","$q","$rootScope","$window",function(o,e,n,r){this.columnizerLoad=function(t){return e(function(t,e){var a;n.textColumnizer?"ready"!==n.textColumnizer.status?(a=document.getElementById("columnizerapiscript"),$(a).on("load",function(){t()})):t():(n.textColumnizer={},n.textColumnizer.status="load",(a=document.createElement("script")).id="columnizerapiscript",a.async="true",document.getElementsByTagName("head")[0].appendChild(a),a.src=o.jsPath("columnizer/jquery.columnizer.js"),$(a).on("load",function(){n.textColumnizer.api=r.columnizer,n.textColumnizer.status="ready",t()}))})}}]),angular.module("mosapp").service("tmplSrvc",TmplService),angular.module("mosapp").service("toolsSrvc",["mosconfig","$timeout","LangSrvc","UrlSrvc","$filter",function(mosconfig,$timeout,LangSrvc,UrlSrvc,$filter){var errorInfo,self=this;this.ruStrToDate=function(t){var e,a=!1;return(a=angular.isString(t)&&2<(e=t.split(".")).length?new Date(e[2],e[1]-1,e[0]):a)||t},this.getMaxDate=function(t){return Math.max.apply(null,t)},this.sanitize=function(t){return t.replace(/\u200B/g,"")},this.getSiteLogo=function(){return mosconfig.siteLogo||null},this.fillOutPages=function(t,e){for(var a=[],o=1;o<e+1;o++)a.push({num:o});return a},this.scrollTop=function(t){TweenLite.to(window,t||.75,{scrollTo:{y:0},ease:Power2.easeOut,onComplete:function(){}})},this.colorScheme=function(){return"true"===localStorage.getItem("contrast")?"contrast":"default"},this.htmlToPlaintext=function(t){return(t=t?String(t).replace(/\&\w{4,5};/gm," "):"")?String(t).replace(/<[^>]+>/gm,""):""},this.getMetaForImage=function(t){var e=LangSrvc.getCurrentLang();return{alt:t+". "+mosconfig.altParams[e],title:t}},this.removeMetaTag=function(t){var e=document.querySelector("head"),a=e.querySelector('meta[property="'+t+'"]');(a=a||e.querySelector('meta[name="'+t+'"]'))&&a.parentNode.removeChild(a)},this.setMeta=function(t,e,a){var o=UrlSrvc.getMainDomain(),t=t.image&&""!==t.image&&t.image.indexOf("data:image",0)<0?t.image:(mosconfig.imagesPath||"")+"favicon/icon200x200.png",n=(t=0===t.indexOf("http")?t:o+"/"+t.replace(new RegExp("^/"),""),LangSrvc.getCurrentLang()),n=(mosconfig.altParams||{})[n]||"Официальный сайт Мэра Москвы";0===window.location.pathname.indexOf("/news/maintheme/")||"/city/projects/"===window.location.pathname||"/city/about/plan/"===window.location.pathname||"/authority/documents/"===window.location.pathname||0===window.location.pathname.indexOf("/authority/documents/doc/")||0===window.location.pathname.indexOf("/authority/projects/active/")||0===window.location.pathname.indexOf("/authority/projects/archive/")||0===window.location.pathname.indexOf("/authority/projects/doc/")||"/authority/discussion/"===window.location.pathname||0===window.location.pathname.indexOf("/authority/discussion/doc/")||0===window.location.pathname.indexOf("/city/about/symbols/")||0===window.location.pathname.indexOf("/city/about/honors/")?(t="https://"+window.location.hostname+"/open-graph/v1/frontend"+window.location.pathname,$('meta[property="og:image:width"]').attr("content",1200),$('meta[property="og:image:height"]').attr("content",630)):(self.removeMetaTag("og:image:width"),self.removeMetaTag("og:image:height")),$('meta[property="og:url"]').attr("content",o+"/"+location.pathname.replace(new RegExp("^/"),"")),$('meta[property="og:type"]').attr("content","website"),$('meta[property="og:site_name"]').attr("content",n),a&&e[a]&&(o=this.htmlToPlaintext(e[a].description),$('meta[property="og:title"]').attr("content",this.htmlToPlaintext(e[a].title)),$('meta[property="og:description"]').attr("content",o),self.setDescription(o)),$('meta[property="og:image"]').attr("content",t),$('meta[property="og:image:url"]').attr("content",t),self.removeMetaTag("article:publisher"),self.removeMetaTag("article:author"),self.removeMetaTag("article:published_time"),self.removeMetaTag("og:image:alt")},this.setTitle=function(){for(var t=LangSrvc.getCurrentLang(),e=mosconfig.titleParams||{},a=e.separator||" / ",e=e.siteName[t]||"Сайт Москвы",o=[],n=0;n<arguments.length;n++)o.push(this.htmlToPlaintext(arguments[n]));t=Array.prototype.slice.call(o,0);t.push(e),$("title").text(t.join(a))},this.setTitleClean=function(){for(var t=(mosconfig.titleParams||{}).separator||" / ",e=[],a=0;a<arguments.length;a++)e.push(this.htmlToPlaintext(arguments[a]));var o=Array.prototype.slice.call(e,0);$("title").text(o.join(t))},this.setDescription=function(t){var e,a=LangSrvc.getCurrentLang();t&&""!=t&&(a=(mosconfig.altParams||{})[a]||"Официальный сайт Мэра Москвы",e=" ","."!==t[t.length-1]&&(e=". "),self._setMeta("description",t+e+a))},this.setRawDescription=function(t){self._setMeta("description",t)},this.setRawTitle=function(t){$("title").text(t)},this.setKeywords=function(t){t&&""!=t&&self._setMeta("keywords",t)},this.setVerification=function(){self._setMeta("baidu-site-verification","Jauog7E16g")},this._setMeta=function(t,e){var a;t&&0!=t.length&&(0<(a=$("meta[name="+t+"]")).length?a.attr("content",e):((a=document.createElement("meta")).name=t,a.content=e,document.getElementsByTagName("head")[0].appendChild(a)))},this.togglerBlackAndWhite=function(t,e,a){a instanceof $||"string"!=typeof a?a instanceof $&&void 0!==a||(a=$(document.body)):a=$(a),"contrast"===e?(a.find(t).addClass("grayscale"),a.find(".grayscale-img").addClass("grayscale"),a.find(".grayscale").gray()):(a.find(".grayscale").toggleClass("grayscale-off"),a.find(t).removeClass("grayscale"),a.find(".grayscale-img").removeClass("grayscale"))},this.prepareTags=function(t){var e=[];return angular.isString(t)?t:angular.isArray(t)?(t.forEach(function(t){e.push(t.title)}),e.join(", ")):void 0},this.setErrorInfo=function(t){errorInfo=t},this.getErrorInfo=function(){return errorInfo},this.statCounter=function statCounter(params){var maxAttempts=20;function trySendMetrika(COUNTER_ID,TARGET_NAME,GOAL_PARAMS,cnt){var js="yaCounter"+COUNTER_ID+".reachGoal('"+TARGET_NAME+"');",params;try{GOAL_PARAMS?(params="yaCounter"+COUNTER_ID+".params("+(angular.isObject(GOAL_PARAMS)?JSON.stringify(GOAL_PARAMS):GOAL_PARAMS)+");",eval(params)):eval(js)}catch(e){cnt++,cnt<maxAttempts&&$timeout(function(){trySendMetrika(COUNTER_ID,TARGET_NAME,GOAL_PARAMS,cnt)},500)}}if(angular.isObject(params)&&angular.isObject(params.metrika)&&params.metrika.TARGET_NAME){var COUNTER_ID,TARGET_NAME=angular.isObject(params.metrika)&&params.metrika.TARGET_NAME?params.metrika.TARGET_NAME:null,GOAL_PARAMS=angular.isObject(params.params)?params.params:null;try{COUNTER_ID=mosconfig.stat.metrika.id}catch(e){}COUNTER_ID&&TARGET_NAME&&trySendMetrika(COUNTER_ID,TARGET_NAME,GOAL_PARAMS,0)}},this.localeNum=function(t,e){if("number"!=typeof(t=+t))return"";if((!e||e.length<1)&&(e=new Array("")),0<(t=t.toString()).indexOf(".")||0<t.indexOf(","))return e[1];var a=t.length,o=new Number(a<2?0:t.substr(a-2,1)),t=new Number(t.substr(a-1,1));return 1!=o?1<t&&t<5?e[1]:4<t&&t<=9||0==t?e[2]:1==t?e[0]:void 0:e[2]},this.hideContentArea=function(t){t.css("opacity",0)},this.showContentArea=function(t){t&&t.length&&TweenLite.to(t,.5,{opacity:1,ease:Power1.easeIn,onComplete:function(){t.css("opacity","")}})},this.transformDateToMos=function(t){var e=t.getTimezoneOffset()/60;return t=-3!=e?new Date(t.getTime()+3600*e*1e3+108e5):t},this.handleAlternateTags=function(o,t,e){for(var a=document.querySelectorAll('link[rel="alternate"]'),n=function(t){var e,a=[];for(e in t)a.push({lang:e,href:t[e].href,fromState:t[e].fromState});return a}(o.current.alternateLinks),r=0;r<a.length;r++){var i=a[r].attributes.href.nodeValue,s=a[r].attributes.hreflang.nodeValue;(n=n||[]).push({lang:s,href:i,fromState:!1})}n&&n.length&&n.forEach(function(a){(function(t,e){"zn"===t&&(t="cn");return UrlSrvc.getMainDomain()+("ru"===t?"":"/"+t)+("ru"===LangSrvc.getCurrentLang()?e:e.slice(3))})(a.lang,o.href(t)).replace(/^https/,"http")!==a.href.replace(/^https/,"http")?(e.forEach(function(t){var e=o.href(t),e=new RegExp(("ru"===LangSrvc.getCurrentLang()?e:e.slice(3))+"$","i"),t=o.get(t);e.test(a.href)&&(t.alternateLinks||(t.alternateLinks={}),t.alternateLinks[a.lang]||(t.alternateLinks[a.lang]={}),t.alternateLinks[a.lang].href=a.href,t.alternateLinks[a.lang].fromState=!0)}),document.querySelector('link[rel="alternate"][hreflang="'+a.lang+'"][href="'+a.href+'"]').remove()):a.fromState&&angular.element("head").append('<link rel="alternate" hreflang="'+a.lang+'" href="'+a.href+'">')})},this.joinProperty=function(t,e,a){var o="";return e&&t?t.map(function(t){return t[e]}).join(a):o},this.statsMosCounter=function(t){if(angular.isObject(t)){t={eventType:t.type,eventSrc:"mos.ru",eventDst:"stats",eventTime:parseInt((new Date).getTime()/1e3,10),mosId:getCookie("mos_id"),eventObject:t.params},t=JSON.stringify(t);try{fetch("https://stats.mos.ru/eds.gif?o="+t,{credentials:"include"})}catch(t){}}},this.dateRange=function(t,e){var a="d MMMM",o="d MMMM yyyy",n=(t=!!t&&new Date(t),e=!!e&&new Date(e),new Date),r=n.getTimezoneOffset()/60;if(-3!=r&&(n=new Date(n.getTime()+3600*r*1e3+108e5)),!t&&!e)return"";if(!t||!e)return i=(r=t||e).getFullYear()===n.getFullYear(),$filter("date")(r,i?a:o);var i,r=(i=t.getFullYear()===n.getFullYear())?a:o;return t.getFullYear()===e.getFullYear()?t.getMonth()===e.getMonth()?t.getDate()===e.getDate()?$filter("date")(t,r):t.getDate()+" – "+$filter("date")(e,r):$filter("date")(t,a)+" – "+$filter("date")(e,r):$filter("date")(t,o)+" – "+$filter("date")(e,o)},this.formatHoursMinutes=function(t){var t=self.transformDateToMos(new Date(1e3*t)),e=((e=t.getHours())<10?"0":"")+e,t=t.getMinutes();return e+":"+((t<10?"0":"")+t)}}]),angular.module("mosapp").service("UrlSrvc",["mosconfig","LangSrvc","$rootScope",function(r,a,t){function o(t){var e,a;if(!(t.length<=1))return e=t.split("/"),e=e[e.length-1].split("?"),a="/"!=t[t.length-1],a&&1===e.length?t+"/":a&&1!=e.length&&""!=e[0]?t.replace("?","/?"):t}function n(t){var t=o(t),e=a.getCurrentLang();return"ru"==e?t:"/"+e+t}function i(t,e){e=e((t=t||1)+1);return e?n(e):""}function s(t,e){e=e((t=t||1)-1);return e?n(e):""}function c(t,e,a){var o,n;t&&e&&(n=!1,(o=a?document.getElementById(a):o)||(o=document.createElement("link"),n=!0),o.id=a,o.rel=t,o.href=function(){var t="";r.domain&&(t=(t=(0===r.domain.indexOf("http")?"":location.protocol+"//")+r.domain).replace(new RegExp("/$"),""));return t}()+e,n&&document.getElementsByTagName("head")[0].appendChild(o))}function l(t){t=document.getElementById(t);t&&"LINK"===t.tagName&&document.getElementsByTagName("head")[0].removeChild(t)}t.$on("$stateChangeSuccess",function(){try{setTimeout(window.$mos_layouts.api.setActive,0)}catch(t){}}),this.getMainDomain=function(){var t="";return t=r.domain?(t=(0===r.domain.indexOf("http")?"":location.protocol+"//")+r.domain).replace(new RegExp("/$"),""):t},this.getLangLink=n,this.getLangLinkPrefix=function(){var t=a.getCurrentLang();return"ru"==t?"":"/"+t},this.getLangPath=function(t,e){return this.getLangLink(this.pagePath(t,e))},this.tmplPath=function(t){return t},this.apiPath=function(t,e){return r.restAPI[t]},this.jsPath=function(t){return((r.jsPath||"")+t).replace(new RegExp("//","g"),"/")},this.cssPath=function(t){return((r.cssPath||"")+t).replace(new RegExp("//","g"),"/")},this.pagePath=function(t,e){return o((r.pagePath[t]||"")+e).replace(new RegExp("//","g"),"/")},this.linksPath=function(t){return r.linksPath[t]},this.specialType=function(t){return r.specialType[t]||""},this.currentEmergency=function(t){if(t||r.emergency)return r.emergency[t]||""},this.currentEmergencyPath=function(t){if(t||r.emergency||r.emergency.path)return r.emergency.path[t]||""},this.getBanners=function(t,e){if(t&&r.banners&&r.banners[t])return e=e||a.getCurrentLang(),{domain:r.banners.domain,urlPath:r.banners.urlPath,items:r.banners[t][e]}},this.isExternalUrl=function(t){return!/(^((http(s)?:\/\/)?(www.)?|\/\/)?mos.ru)|^\/{1}([^\/]+|$)/gi.test(t)},this.addParamsToUrl=function(t,e){if(!e)return t;var a=(n=t.split("#"))[1]?"#"+n[1]:"",o=[],n=n[0].split("?");return angular.forEach(e,function(t,e){o.push(e+"="+t)}),1===n.length?t=n[0]+"?"+o.join("&"):2===n.length&&(t=n[0]+"?"+n[1]+"&"+o.join("&")),t+a},this.setCanonical=function(t){var e,a="";r.domain&&(a=(a=(0===r.domain.indexOf("http")?"":location.protocol+"//")+r.domain).replace(new RegExp("/$"),"")),t&&((e=document.createElement("link")).id="canonicalLink",e.rel="canonical",e.href=a+t,document.getElementsByTagName("head")[0].appendChild(e))},this.setPrevNextLinks=function(t,e,a,o){var n=i(t,a),t=s(t,a);e&&n?c("next",n,"link-rel-next"):l("link-rel-next"),t?c("prev",t,"link-rel-prev"):l("link-rel-prev")},this.getNextPageUrl=i,this.getPrevPageUrl=s,this.appendLink=c}]),angular.module("mosapp").filter("imagesPath",["mosconfig",function(e){return function(t){return((e.imagesPath||"")+t).replace(new RegExp("//","g"),"/")}}]),angular.module("mosapp").run(["$state","$stateParams","$window",function(t,e,a){function o(){if(angular.isObject(t))try{t.transitionTo(t.current,e,{reload:!0,inherit:!1,notify:!0})}catch(t){return window.location=window.location.href,!1}else window.location=window.location.href}a.addEventListener?a.addEventListener("contrastTrigger",o):a.attachEvent("oncontrastTrigger",function(){o.call(a)})}]),angular.module("mosapp").provider("LangSrvc",function(){var t=!1;this.setCurrentLang=function(){return t=t||((t=document.documentElement.lang)||"ru")},this.$get=function(){return{getCurrentLang:function(){return t}}}}).service("linksInterceptor",[function(){var a,i=0,s=new Object(null),c=(s[++i]={regExp:[/\/pgu\./],attr:"href",callback:function(t,e){"object"==typeof _paq&&"function"==typeof _paq.push&&(t.preventDefault(),t=$(e).attr("href"),_paq.push(["trackLink",t,"link"]),(e=window.open(t,"_blank"))&&e.focus())},id:i},s[++i]={regExp:[/\/pgu\//],attr:"href",callback:function(t,e){"object"==typeof window._paq&&"function"==typeof window._paq.push&&(e=$(e).attr("href"),_paq.push(["trackLink",e,"link"]))},id:i},{openInNewTab:function(t,e){t.preventDefault();t=$(e).attr("href"),e=window.open(t,"_blank");e&&e.focus()}});function l(t){return"function"==typeof t.exec}return function t(){var e=$("div.b-content");a&&$timeout.cancel(a),e.length?e.on("click","a",function(n){var r=$(this);Object.keys(s).forEach(function(t){var e=s[t],a=r.attr(e.attr);if(a&&""!==a)for(var o=0;o<e.regExp.length;o++)if(null!==e.regExp[o].exec(a)){e.callback(n,r,e.cbParams);break}})}):a=$timeout(t,100)}(),{add:function(t,e,a,o){var n,r=new Object(null);if(Array.isArray(t)?(n=[],t.forEach(function(t){l(t)&&n.push(t)}),r.regExp=n):l(t)&&(r.regExp=[t]),r.attr="string"==typeof a?a:"href","function"==typeof e)r.callback=e;else if("string"==typeof e){if("function"!=typeof c[e])return!1;r.callback=c[e]}return r.cbParams="object"==typeof o?o:new Object(null),r.id=++i,s[i]=r},remove:function(t){return!!s[t]&&(delete s[t],!0)},check:function(t){return!!s[t]}}}]),angular.module("mosapp").service("VPsrvc",["UrlSrvc","$q","$rootScope","$window","$timeout",function(i,t,s,c,l){this.playerLoad=function(o){return t(function(t,e){var a;s.videoPlayer?"ready"!==s.videoPlayer.status?(a=document.getElementById("flowplayerapiscript"),$(a).on("load",function(){t()})):t():(s.videoPlayer={},s.videoPlayer.status="load",(a=document.createElement("script")).id="flowplayerapiscript",a.async="true",document.getElementsByTagName("head")[0].appendChild(a),a.src=i.jsPath("flowplayer/flowplayer.min.js"),$(a).on("load",function(){s.videoPlayer.api=c.flowplayer,s.videoPlayer.status="ready",s.videoPlayer.api.conf={splash:!0,key:"$219658761613389, $156847843995181, $217505261009336, $438958512312610"},t()}),o.nocss||((a=document.createElement("link")).rel="stylesheet",a.href=i.jsPath("flowplayer/skin/playful.css"),a.type="text/css",document.getElementsByTagName("head")[0].appendChild(a)))})},this.playerVideoJSLoad=function(r){return t(function(e,t){var a,o,n;s.videoPlayerJS?"load"===s.videoPlayerJS.status?l(function t(){"ready"===s.videoPlayerJS.status?e():l(t,100)},100):e():(s.videoPlayerJS={},s.videoPlayerJS.status="load",(n=document.createElement("script")).id="videojs_script",n.async="true",(o=document.getElementsByTagName("head")[0]).appendChild(n),n.src=i.jsPath("videojs/video.js"),$(n).on("load",function(){(a=document.createElement("script")).id="videojs_hls_script",a.async="true",a.src=i.jsPath("videojs/videojs-contrib-hls.js"),o.appendChild(a),$(a).on("load",function(){window.videojs.options.flash.swf=i.jsPath("videojs/video-js.swf"),s.videoPlayerJS.api=c.videojs,s.videoPlayerJS.status="ready",e()})}),r.nocss||((n=document.createElement("link")).rel="stylesheet",n.href=i.jsPath("videojs/video-js.min.css"),n.type="text/css",o.appendChild(n)))})}}]),angular.module("aboutMoscow.templates",[]).run(["$templateCache",function(t){t.put("mosBanner/mosBanner.tpl.html",'<div class="extconts-service-container"></div>'),t.put("socialWidget/informerWeatherTraffic.tpl.html",'<ul class="weather-traffic-informer"><li data-ng-repeat="informer in informers" data-ng-if="!informer.hideme" data-ng-class="informer.api"><span class="title">{{informer.title}}</span><img class="ico" data-ng-if="informer.data.image &amp;&amp; informer.api !== \'infoTraffic\'" data-ng-class="{\'grayscale-modern\': colorScheme == \'contrast\'}" data-ng-src="{{informer.data.image | imageSrc}}" data-ng-style="{width:((colorScheme==\'contrast\')?(informer.data.image.width*2) : informer.data.image.width) + \'px\',height:((colorScheme==\'contrast\')?(informer.data.image.height*2) : informer.data.image.height) + \'px\'}" alt=""/><div class="ico icon-traffic-lights" data-ng-if="informer.api == \'infoTraffic\'" data-ng-class="{\'grayscale-modern\': colorScheme == \'contrast\', \'{{informer.class}}\': informer.class}"></div><span class="data">{{ informer.data.value }} {{ informer.units }}</span></li></ul>'),t.put("socialWidget/socialWidget.tpl.html",'<div class="subhead"><div class="row" data-ng-style="border"><ul class="mayor-social col-sm-7" data-ng-if="lang === \'ru\'"><li class="mayor-social__logo"><img ng-src="{{\'mayour-logo.jpg\' | imagesPath}}" alt=""/></li><li class="title"><strong>{{\'social_widget.mayor_in_social_first\' | translate}}</strong><span> {{\'social_widget.mayor_in_social_last\' | translate}}</span></li><li><a class="icon icon-share-vk" data-ng-href="{{social.vkMayor}}" target="_blank" href="" title="vk"></a></li></ul><div class="weater-trafic-informer-wrapper hidden-xs col-sm-5" informer-weather-traffic="" data-ng-class="{\'pull-left\': lang !== \'ru\'}"></div></div></div>'),t.put("audioPlayer/audioPlayer.tpl.html",'<div class="media"><a rel="" href=""></a></div>'),t.put("sharing/sharing.tpl.html",'<div class="b-sharing"><div class="b-sharing__share-button" data-ng-if="isModal()"><button class="b-iconic-btn" data-ng-click="openPopup()"><i class="icon-share_blue"></i><span class="b-iconic-btn__text" data-translate="mosSharing.shareTitle"></span></button></div><div class="b-sharing-links" id="{{id}}" data-ng-class="dynClass" data-ng-if="!isModal()"></div></div>'),t.put("sharingPopup/sharingPopup.tpl.html",'<div class="b-popup-sharing"><div class="b-popup-sharing__body"><div class="b-popup-sharing__header"><h3 class="b-popup-sharing__title" data-translate="mosSharingPopup.shareTitle"></h3><button class="b-popup-sharing__close" data-ng-click="closePopup()"></button></div><div class="b-popup-sharing__content"><div class="b-popup-sharing__socials"><div class="b-sharing-links b-sharing-links_type_horizontal b-sharing-links_behaviour_form" id="{{id}}"></div></div></div><div class="b-popup-sharing__footer"></div></div></div>'),t.put("banner/banner.tpl.html",'<div class="insertionHeader" ng-if="flagon === &quot;on&quot;"><iframe name="insertionHeader" scrolling="no" data-ng-src="{{path}}"></iframe></div>'),t.put("mosError/mosError.tpl.html",'<div class="mos-error error-page"><div class="header"><h1 class="errorMessage" data-ng-if="pageInfo.title" data-translate="mosError.errorMessage_{{pageInfo.title}}" ng-class="{ header_cn: lang === \'cn\'}"></h1><p class="errorText" data-ng-if="pageInfo.title" data-translate="mosError.errorText_{{pageInfo.title}}"></p><div ng-if="showSearch" id="{{ appId }}"></div></div><div class="live" ng-if="lang === \'ru\'" data-widget="widget-live"></div><script ng-if="lang === \'ru\' &amp;&amp; isClientError" type="text/javascript" src="/widget-collection/main.js"><\/script></div>'),t.put("aboutMoscowMain/aboutMoscowMain.tpl.html",'<div class="about-moscow"><div class="about-moscow__wrapper"><p class="about-moscow__title">Информация</p><div class="about-moscow__row"><div class="about-moscow__col col-sm-3"><div class="about-moscow__menu"><div data-about-moscow-navigation="" data-page="page" data-hide-menu="hideMenu"></div></div><div class="outside_content hidden-xs" data-ng-if="extconts &amp;&amp; extconts.items.length &amp;&amp; lang !== \'ru\'"><div class="outside_content-wrapper" data-ng-repeat="item in extconts.items" data-mos-extconts-service="" data-domain="extconts.domain" data-url-path="extconts.urlPath" data-item="item"></div></div></div><div class="about-moscow__col col-sm-9"><div class="about-moscow__content"><div data-about-moscow-history="" data-root-api="about" data-root-api-section="aboutHistory" data-ng-if="activePage == page.content"></div><div data-about-moscow-plan="" data-root-api="about" data-root-api-section="aboutPlan" data-ng-if="activePage == page.plan"></div><div data-about-moscow-honors="" data-root-api="about" data-root-api-section="aboutHonors" data-root-api-section-groups="aboutHonorsGroup" data-ng-if="activePage == page.honor"></div><div data-about-moscow-honors-item="" data-ng-if="activePage == page.honorItem" data-root-api="about" data-root-api-section="aboutHonorItem"></div><div data-about-moscow-symbols="" data-root-api="about" data-root-api-section="aboutSymbols" data-root-api-section-groups="aboutSymbolsGroup" data-ng-if="activePage == page.symbols"></div><div data-about-moscow-symbols-item="" data-ng-if="activePage == page.symbolsItem" data-root-api="about" data-root-api-section="aboutSymbolsItem"></div><div data-about-moscow-symbols-head="" data-ng-if="activePage == page.head" data-root-api="about" data-root-api-section="aboutHeads"></div><div data-about-moscow-symbols-head-item="" data-ng-if="activePage == page.headItem" data-root-api="about" data-root-api-section="aboutHeadsItem"></div></div></div></div></div></div>'),t.put("aboutMoscowPlan/aboutMoscowPlan.tpl.html",'<div data-mos-error="mosError" data-ng-if="mosError"></div><div class="about-plan" data-ng-if="!mosError"><div class="about-plan__row"><div class="about-plan__col" data-ng-class="{\'col-sm-8\': lang === \'ru\', \'col-sm-12\': lang !== \'ru\',}"><h1 class="about-plan__title">{{items.name || items.title}}</h1><div class="b-article__text about-plan__text"></div></div><div class="about-plan__col col-sm-4" data-ng-if="lang === \'ru\'"><div class="about-plan__docs"><div class="about-plan__doc"><div data-about-documents="" data-root-api="about" data-type="documents" data-root-api-section="aboutPlanDocuments"></div></div><div class="about-plan__doc"><div data-about-documents="" data-root-api="about" data-type="links" data-root-api-section="aboutPlanLinks"></div></div></div></div></div></div>'),t.put("aboutMoscowHonors/aboutMoscowHonors.tpl.html",'<div data-mos-error="mosError" data-ng-if="mosError"></div><div class="about-honors" data-ng-if="!mosError"><h1 class="about-honors__title">Награды</h1><div class="about-honors__content"><div class="about-honors__wrap" data-ng-repeat="honor in honors"><h2 class="about-honors__subtitle">{{honor.title || honor.name}}</h2><ul class="about-honors__list"><li class="about-honors__item" data-ng-repeat="subHonor in honor.items"><div class="about-honors__image" data-ng-if="subHonor.icon"><a data-ui-sref="home.honors.item({id: subHonor.id})"><img alt="{{subHonor.icon.metaImage.alt}}" title="{{subHonor.icon.metaImage.title}}" data-ng-src="{{subHonor.icon | imageSrc}}" data-ng-class="{\'grayscale\':colorScheme==\'contrast\'}"/></a></div><div class="about-honors__text-wrapper"><div class="about-honors__text"><a class="about-honors__link" data-ui-sref="home.honors.item({id: subHonor.id})">{{subHonor.title || subHonor.name}}</a></div></div></li></ul></div></div></div>'),t.put("aboutMoscowHonorsItem/aboutMoscowHonorsItem.tpl.html",'<div data-mos-error="mosError" data-ng-if="mosError"></div><div class="honor-content" data-ng-if="!mosError"><h1 class="honor-content__title">{{items.title}}</h1><div class="b-article__text"><div class="hidden" data-ng-if="items.id" data-id="aboutHonors_{{items.id}}" data-mos-sharing="" data-type="plain" data-text="{{items.title || items.name}}" data-image="{{items.image | imageSrc}}"></div><div class="honor-content__text clearfix"><span class="inc left" data-ng-if="items.image"><img alt="{{metaImage.alt}}" title="{{metaImage.title}}" data-ng-src="{{items.image | imageSrc}}" data-ng-class="{\'grayscale\':colorScheme==\'contrast\'}"/><i></i></span></div><a class="head-content__link" data-ui-sref="home.honors">К списку</a></div></div>'),t.put("aboutMoscowSymbols/aboutMoscowSymbols.tpl.html",'<div data-mos-error="mosError" data-ng-if="mosError"></div><div class="about-symbols" data-ng-if="!mosError"><h1 class="about-symbols__title">Символы</h1><div class="about-symbols__row"><div class="about-symbols__col col-sm-8"><div class="about-symbols__content"><div class="about-symbols__wrap" data-ng-repeat="symbol in symbols"><h2 class="about-symbols__subtitle">{{symbol.title || symbol.name}}</h2><ul class="about-symbols__list"><li class="about-symbols__item" data-ng-repeat="subSymbol in symbol.items"><div class="about-symbols__image" data-ng-if="subSymbol.icon"><a data-ui-sref="home.symbols.item({id: subSymbol.id})"><img alt="{{subSymbol.icon.metaImage.alt}}" title="{{subSymbol.icon.metaImage.title}}" data-ng-src="{{subSymbol.icon | imageSrc}}" data-ng-class="{\'grayscale\':colorScheme==\'contrast\'}"/></a></div><div class="about-symbols__text-wrapper"><div class="about-symbols__text"><a class="about-symbols__link" data-ui-sref="home.symbols.item({id: subSymbol.id})">{{subSymbol.title || subSymbol.name}}</a><p class="about-symbols__descr">{{subSymbol.description}}</p></div></div></li></ul></div></div></div><div class="about-symbols__col col-sm-4"><div data-about-documents="" data-root-api="about" data-type="documents" data-root-api-section="aboutSymbolsDocuments"></div></div></div></div>'),t.put("aboutMoscowSymbolsHead/aboutMoscowSymbolsHead.tpl.html",'<div data-mos-error="mosError" data-ng-if="mosError"></div><div class="about-heads" data-ng-if="!mosError"><h1 class="about-heads__title">Главы городской администрации</h1><div class="about-heads__row"><div class="about-heads__col col-lg-4 col-sm-6" data-ng-repeat="person in persons"><div class="about-heads__item"><a data-ui-sref="home.heads.item({id: person.id})"><div class="about-heads__image" data-ng-style="{\'background-image\': \'url(&quot;{{person.icon | imageSrc}}&quot;)\'}" data-ng-class="{\'grayscale\':colorScheme==\'contrast\'}"></div></a><p class="about-heads__info"><a class="about-heads__link" data-ui-sref="home.heads.item({id: person.id})">{{person.name || person.title}}</a><span class="about-heads__years"><span data-ng-if="person.year_start != person.year_end &amp;&amp; person.year_end != 0">{{person.year_start}} - {{person.year_end}}</span><span data-ng-if="person.year_start == person.year_end || person.year_end == 0">{{person.year_start}}</span></span></p></div></div></div></div>'),t.put("aboutMoscowSymbolsHeadItem/aboutMoscowSymbolsHeadItem.tpl.html",'<div data-mos-error="mosError" data-ng-if="mosError"></div><div class="head-content" data-ng-if="!mosError"><h1 class="head-content__title">{{items.name || items.title}}</h1><div class="b-article__text"><div class="hidden" data-ng-if="items.id" data-id="aboutHistory_{{items.id}}" data-mos-sharing="" data-type="plain" data-text="{{items.name || items.title}}" data-image="{{items.image | imageSrc}}"></div><div class="head-content__text clearfix"><span class="inc left" data-ng-if="items.image"><img alt="{{items.name || items.title}}" data-ng-src="{{items.image | imageSrc}}" data-ng-class="{\'grayscale\':colorScheme==\'contrast\'}"/><i></i></span></div><a class="head-content__link" data-ui-sref="home.heads">К списку</a></div></div>'),t.put("aboutMoscowSymbolsItem/aboutMoscowSymbolsItem.tpl.html",'<div data-mos-error="mosError" data-ng-if="mosError"></div><div class="symbol-content" data-ng-if="!mosError"><h1 class="symbol-content__title">{{items.title || items.name}}</h1><div class="b-article__text"><div class="hidden" data-ng-if="items.id" data-id="aboutSymbol_{{items.id}}" data-mos-sharing="" data-type="plain" data-text="{{items.title || items.name}}" data-image="{{items.image | imageSrc}}"></div><div class="symbol-content__text clearfix"><span class="inc left" data-ng-if="items.image"><img alt="{{metaImage.alt}}" title="{{metaImage.title}}" data-ng-src="{{items.image | imageSrc}}" data-ng-class="{\'grayscale\':colorScheme==\'contrast\'}"/><i></i></span></div><a class="head-content__link" data-ui-sref="home.symbols">К списку</a></div></div>'),t.put("aboutMoscowNavigation/aboutMoscowNavigation.tpl.html",'<nav class="about-menu" data-ng-if="menuItems &amp;&amp; menuItems.length"><span class="about-menu__helper" data-ng-click="toggle($event)"></span><ul class="about-menu__list about-menu__list_main"><li class="about-menu__item" data-ng-repeat="item in menuItems" data-ng-click="toggleList(item, $index, item.nav, $event)" data-ng-class="{\'about-menu__item_state_current\': item.current,\'about-menu__item_state_sub\': item.nav, \'about-menu__item_state_open\': item.opened}"><a class="about-menu__link nonlick" data-ng-href="{{item.url}}" target="{{item.target}}" data-ng-class="{\'grayscale\':colorScheme==\'contrast\'}"><span class="nonlick">{{item.title}}</span></a><ul class="about-menu__list about-menu__list_type_sub" data-ng-if="item.nav"><li class="about-menu__item" data-ng-class="{\'about-menu__item_state_current\': sub.current}" data-ng-repeat="sub in item.nav"><a class="about-menu__link" data-ng-href="{{sub.url}}" target="{{sub.target}}" data-ng-class="{\'grayscale\':colorScheme==\'contrast\'}"><span>{{sub.title}}</span></a></li></ul></li></ul></nav>'),t.put("aboutMoscowHistory/aboutMoscowHistory.tpl.html",'<div data-mos-error="mosError" data-ng-if="mosError"></div><div class="about-content" data-ng-if="!mosError"><h1 class="about-content__title">{{items.name || items.title}}</h1><div class="b-article__text about-content__text"></div></div>'),t.put("aboutDocuments/aboutDocuments.tpl.html",'<div class="about-documents" data-ng-if="docs &amp;&amp; docs.length"><div class="about-documents__content"><div class="about-documents__wrap about-documents__wrap_type_docs" data-ng-if="type == \'documents\'"><div class="about-documents__icon about-documents__icon_type_docs" data-ng-if="type == \'documents\'"></div><p class="about-documents__title" data-ng-if="type == \'documents\'">Документы</p></div><div class="about-documents__wrap about-documents__wrap_type_docs" data-ng-if="type == \'links\'"><div class="about-documents__icon about-documents__icon_type_links" data-ng-if="type == \'links\'"></div><p class="about-documents__title" data-ng-if="type == \'links\'">Ссылки</p></div><ul class="about-documents__list" data-ng-class="{\'about-documents__list_type_links\':type == \'links\'}"><li class="about-documents__item" data-ng-repeat="doc in docs"><a class="about-documents__link" data-ng-href="{{doc.url}}">{{doc.title}}</a><p class="about-documents__size">{{doc.description}}</p></li></ul></div></div>')}])}(window,window.angular);